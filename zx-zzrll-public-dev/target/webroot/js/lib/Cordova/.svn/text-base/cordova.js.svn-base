!function(){function e(){return navigator.userAgent.indexOf("SINO_ANDROID_APP")!=-1?"Android":"IPAD"==localStorage.sino_app_version||navigator.userAgent.indexOf("SINO_IOS_APP")!=-1?"IOS":"Browser"}function n(){for(var e=null,n=document.getElementsByTagName("script"),o="/cordova.js",i=n.length-1;i>-1;i--){var t=n[i].src.replace(/\?.*$/,"");if(t.indexOf(o)==t.length-o.length){e=t.substring(0,t.length-o.length)+"/";break}}return e}if(window.appVersion=e(),"Browser"!=appVersion){var o=document.createElement("script");o.setAttribute("type","text/javascript"),o.setAttribute("src",n()+appVersion+"/cordova.js"),document.body.appendChild(o)}}(),function(){window.sino_file={},sino_file.tempDirURL="cdvfile://localhost/temporary/",sino_file.enabled=window.resolveLocalFileSystemURL&&window.requestFileSystem,sino_file.readType={BLOB:0,TEXT:1,DATA_URL:2,ARRAY:3,FILE_URI:4,CORDOVA_URL:5},sino_file.readFileByPath=function(e,n,o){function i(i){i.root.getFile(e,{},function(e){sino_file.readFile(e,n,o,sino_file.errorHandler)},sino_file.errorHandler)}n=n||"text",window.requestFileSystem(window.TEMPORARY,10485760,i,sino_file.errorHandler)},sino_file.readFileByURL=function(e,n,o){window.resolveLocalFileSystemURL(e,function(e){sino_file.readFile(e,n,o,sino_file.errorHandler)},sino_file.errorHandler)},sino_file.writeFileByURL=function(e,n,o){window.resolveLocalFileSystemURL(e,function(e){e.createWriter(function(e){e.onwriteend=function(e){o&&o()},e.onerror=function(e){console.log("Write failed: "+e.toString())},e.write(n)},sino_file.errorHandler)})},sino_file.createFile=function(e,n){var o=e.lastIndexOf("/"),i=e.slice(0,o),t=e.slice(o+1);console.log(i),console.log(t),window.resolveLocalFileSystemURL(i,function(e){console.log("获得文件成功"),e.getFile(t,{create:!0},function(e){n&&n(e)},sino_file.errorHandler)},sino_file.errorHandler)},sino_file.isExist=function(e,n){window.resolveLocalFileSystemURL(e,function(e){n({isExist:1,entry:e})},function(e){n({isExist:0})})},sino_file.mkdirs=function(e,n){function o(n){i(n.root,e.split("/"))}function i(e,o){"."!=o[0]&&""!=o[0]||(o=o.slice(1)),e.getDirectory(o[0],{create:!0},function(e){o.length>1?i(e,o.slice(1)):n&&n(e)},sino_file.errorHandler)}window.requestFileSystem(window.TEMPORARY,10485760,o,sino_file.errorHandler)},sino_file.move=function(e,n,o,i){console.log("准备移动文件,src:"+e+"\ndir:"+n+"\nnewName:"+o);var t=n.replace(sino_file.tempDirURL,"");console.log(t),sino_file.mkdirs(t,function(n){window.resolveLocalFileSystemURL(e,function(e){e.moveTo(n,o),i&&i()})})},sino_file.deleteByURL=function(e,n){try{window.resolveLocalFileSystemURL(e,function(e){e.isFile?e.remove():e.removeRecursively(),n&&n()},function(){n&&n()})}catch(o){console.error(o),n&&n()}},sino_file.deleteTemp=function(e,n){function o(o){function i(){t.readEntries(function(o){o.length?(o.forEach(function(e,o){e.isFile?n&&"file"!=n||e.remove():n&&"dir"!=n||e.removeRecursively()}),i()):e&&e()})}var t=o.root.createReader();i()}window.requestFileSystem(window.TEMPORARY,10485760,o,sino_file.errorHandler)},sino_file.readFile=function(e,n,o,i){console.log("fileEntry:"),console.log(e),e.file(function(i){console.log("开始读取文件"),console.log(i);var t=new FileReader;switch(t.onloadend=function(e){console.log(e),o(e.target.result)},n){case sino_file.readType.BLOB:t.readAsBinaryString(i);break;case sino_file.readType.TEXT:t.readAsText(i);break;case sino_file.readType.DATA_URL:t.readAsDataURL(i);break;case sino_file.readType.ARRAY:t.readAsArrayBuffer(i);break;case sino_file.readType.FILE_URI:o(e.toURL());break;case sino_file.readType.CORDOVA_URL:o(i.localURL);break;default:t.readAsText(i)}},i)},sino_file.uploadFile=function(e){function n(i){var t=new FileTransfer;t.upload(i.fileURL,e.server,function(t){console.log("服务器返回:",t);var r={success:t,data:i};o.push(r);var s=JSON.parse(t.response),a=i.index+1;a<e.data.length&&"1"==s.flag?(e.data[a].index=a,e.onprogress(r),n(e.data[a])):(e.onprogress(r),e.callback(o))},function(t){console.log("服务器返回:",t);var r={error:t,data:i};o.push(r);var s=i.index+1;s<e.data.length?(e.data[s].index=s,e.onprogress(r),n(e.data[s])):(e.onprogress(r),e.callback(o))},i.options)}var o=[];e.data.length>0&&(e.data[0].index=0,e.data[0].options.headers.isStart=1,n(e.data[0]))},sino_file.download=function(e,n){function o(t){function r(r){console.log("下载成功:",r),i.push({success:r,data:t});var s=t.index+1;s<e.length?(e[s].index=s,o(e[s])):n(i)}function s(r){console.log("下载失败:",r),i.push({error:r,data:t});var s=t.index+1;s<e.length?(e[s].index=s,o(e[s])):n(i)}if(t.url){var a=new FileTransfer,l=sino_file.tempDirURL+t.fileName;t.cordovaURL=l,t.coverOnExit?(console.log("开始下载:"+l),a.download(t.url,l,r,s)):sino_file.isExist(l,function(e){console.log("文件"+(e.isExist?"已存在,不进行下载操作":"不存在,准备下载")),e.isExist?r(e.entry):(console.log("开始下载:"+l),a.download(t.url,l,r,s))})}else s({})}var i=[];e.length>0&&(e[0].index=0,o(e[0]))},sino_file.errorHandler=function(e){console.log("发生错误:",e)}}(),$(function(){function e(e,n,i){e="IOS"===appVersion?o[e]:e,i=i?[i]:[];var t={};cordova.exec(function(e){t.success=!0,t.data=e,n&&n(t)},function(e){t.success=!1,t.data=e,n&&n(t)},"SignaPlugin",e,i)}if(window.cordova){var n=cordova.sino=cordova.sino||{},o={1001:"getVersion",2002:"getTabBarTag",2004:"saveCustomerInfo",2005:"scanIDCard",2006:"scanBankCard",2007:"scanVisitingCard",3003:"takePhoto",3005:"initPhotoView",3004:"imagesUpload",4000:"receiveMessageNumber",4001:"setMessageNumberIs0",3001:"showSignViewController",3002:"showCameraViewController",2011:"deleteCustomerInfo",2012:"requestCustomerData",3006:"sendNonGifContent",3007:"sendTencentContent",4003:"modifyLockGesture",4004:"checkGesture",4005:"openLocalURL",6666:"LivenessDetection",6001:"entryPreservation",6002:"entryLocalSysFromOtherSys",7777:"makePhone"};n.LivenessDetection=function(n,o){e("6666",n,o)},n.getInitData=function(n){e("1",n)},n.clientDetailsPhone=function(n,o){e("7777",n,o)},n.getVersion=function(n){e("1001",n)},n.customSycn=function(n,o){e("2001",n,o)},n.goCustom=function(n,o){e("2002",n,o)},n.getCustom=function(n,o){e("2003",n,o)},n.saveCustom=function(n,o){e("2004",n,o)},n.getIDCardInfo=function(n){e("2005",n)},n.getBankCardInfo=function(n){e("2006",n)},n.getVisitCardInfo=function(n){e("2007",n)},n.confirmIDCardInfo=function(n,o){e("2008",n,o)},n.confirmBankCardInfo=function(n,o){e("2009",n,o)},n.confirmVisitCardInfo=function(n,o){e("2010",n,o)},n.deleteCustom=function(n,o){e("2011",n,o)},n.digitalSignature=function(n,o){e("3001",n,o)},n.takePhoto=function(n,o){e("3002",n,o)},n.takePhoto_upload=function(n,o){e("3003",n,o)},n.uploadPhoto=function(n,o){e("3004",n,o)},n.inUploadPage=function(n,o){e("3005",n,o)},n.shareWX=function(n,o){e("3006",n,o)},n.shareQQ=function(n,o){e("3007",n,o)},n.goHomePage=function(n){e("goHomePage",n)},n.signAppnt=function(n){e("20",n)},n.signInsure=function(n){e("21",n)},n.signRiskWarn=function(n){e("30",n)},n.sendUserMsg=function(n,o){e("2012",n,o)},n.initMyCount=function(n,o){e("4000",n,o)},n.reinitMyCount=function(n,o){e("4001",n,o)},n.openPDF=function(n,o){e("4005",n,o)},n.modifyLockGesture=function(n,o){e("4003",o,n)},n.checkGesture=function(n,o){e("4004",o,n)},n.entryOtherSys=function(n,o){e("6001",n,o)},n.entryLocalSys=function(n,o){e("6002",n,o)}}});
//# sourceMappingURL=cordova.js.map
