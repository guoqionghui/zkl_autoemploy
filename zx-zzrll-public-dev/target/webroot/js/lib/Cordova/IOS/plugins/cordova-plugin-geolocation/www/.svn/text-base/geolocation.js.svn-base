cordova.define("cordova-plugin-geolocation.geolocation",function(t,e,i){function o(t){var e={maximumAge:0,enableHighAccuracy:!1,timeout:1/0};return t&&(void 0!==t.maximumAge&&!isNaN(t.maximumAge)&&t.maximumAge>0&&(e.maximumAge=t.maximumAge),void 0!==t.enableHighAccuracy&&(e.enableHighAccuracy=t.enableHighAccuracy),void 0===t.timeout||isNaN(t.timeout)||(t.timeout<0?e.timeout=0:e.timeout=t.timeout)),e}function a(t,e){var i=setTimeout(function(){clearTimeout(i),i=null,t({code:r.TIMEOUT,message:"Position retrieval timed out."})},e);return i}var c=t("cordova/argscheck"),u=t("cordova/utils"),n=t("cordova/exec"),r=t("./PositionError"),m=t("./Position"),l={},s={lastPosition:null,getCurrentPosition:function(t,e,i){c.checkArgs("fFO","geolocation.getCurrentPosition",arguments),i=o(i);var u={timer:null},l=function(e){if(clearTimeout(u.timer),u.timer){var i=new m({latitude:e.latitude,longitude:e.longitude,altitude:e.altitude,accuracy:e.accuracy,heading:e.heading,velocity:e.velocity,altitudeAccuracy:e.altitudeAccuracy},e.timestamp);s.lastPosition=i,t(i)}},d=function(t){clearTimeout(u.timer),u.timer=null;var i=new r(t.code,t.message);e&&e(i)};return s.lastPosition&&i.maximumAge&&(new Date).getTime()-s.lastPosition.timestamp<=i.maximumAge?t(s.lastPosition):0===i.timeout?d({code:r.TIMEOUT,message:"timeout value in PositionOptions set to 0 and no cached Position object available, or cached Position object's age exceeds provided PositionOptions' maximumAge parameter."}):(i.timeout!==1/0?u.timer=a(d,i.timeout):u.timer=!0,n(l,d,"Geolocation","getLocation",[i.enableHighAccuracy,i.maximumAge])),u},watchPosition:function(t,e,i){c.checkArgs("fFO","geolocation.getCurrentPosition",arguments),i=o(i);var d=u.createUUID();l[d]=s.getCurrentPosition(t,e,i);var g=function(t){clearTimeout(l[d].timer);var i=new r(t.code,t.message);e&&e(i)},v=function(e){clearTimeout(l[d].timer),i.timeout!==1/0&&(l[d].timer=a(g,i.timeout));var o=new m({latitude:e.latitude,longitude:e.longitude,altitude:e.altitude,accuracy:e.accuracy,heading:e.heading,velocity:e.velocity,altitudeAccuracy:e.altitudeAccuracy},e.timestamp);s.lastPosition=o,t(o)};return n(v,g,"Geolocation","addWatch",[d,i.enableHighAccuracy]),d},clearWatch:function(t){t&&void 0!==l[t]&&(clearTimeout(l[t].timer),l[t].timer=!1,n(null,null,"Geolocation","clearWatch",[t]))}};i.exports=s});
//# sourceMappingURL=geolocation.js.map
