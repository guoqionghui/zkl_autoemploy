function init(){eventBind(),fHtml=$(".upcoming ul").html(),sHtml=$(".record ul").html(),selectors(),$(".upcoming ul li").remove(),Clients.postClientAjax(url.zx_approvalListP,{strus:upcoming},getApprovalListUpcomingData)}function eventBind(){$("#search").click(function(){$(".search_condition").toggle(),$(".applicate-name").val(""),$("#se-approval-state").val(""),$(".start-time input").attr("value","")}),$(".tab-bar~div").show().eq($(this).index()).hide(),$(".tab-bar .line-first").show(),$(".tab-bar .line-second").hide(),$(".tab-bar li").click(function(){$(".tab-bar li").eq($(this).index()).addClass("cur").siblings().removeClass("cur"),$(".tab-bar .line-first").toggle(),$(".tab-bar .line-second").toggle(),$(".tab-bar~div").hide().eq($(this).index()).show()}),$(".table li:first-of-type").click(function(){$(".upcoming ul li").remove(),Clients.postClientAjax(url.zx_approvalListP,{strus:upcoming},getApprovalListUpcomingData)}),$(".table li:last-of-type").click(function(){$(".record ul li").remove(),Clients.postClientAjax(url.zx_approvalListP,{strus:record},getApprovalListRecordData)}),$(".btnonclick").click(function(){$(".search_condition").toggle();var t=$(".applicate-name").val(),e=$("#se-approval-state").attr("data-i"),a=$(".startTime").val(),i=$(".endTime").val();if(a&&i){var s=new Date(a.slice(0,4),a.slice(5,7)-1,a.slice(8,10)),n=new Date(i.slice(0,4),i.slice(5,7)-1,i.slice(8,10));if(n-s<0)return void mui.alert("结束时间不能小于开始时间");if(Math.floor((n-s)/864e5)>30)return mui.alert("收费日期查询区间不得大于30天"),!1}$(".table li:first-of-type").hasClass("cur")?Clients.postClientAjax(url.zx_approvalListA,{clntsurNm:t,statusNo:e,startDate:a,endDate:i,strus:upcoming},getApprovalListAUData):Clients.postClientAjax(url.zx_approvalListA,{clntsurNm:t,statusNo:e,startDate:a,endDate:i,strus:record},getApprovalListARData)})}function selectors(){!function(t,e){t.init(),t(".mui-input-row input").input(),t.ready(function(){userPicker2=new t.PopPicker;var e=document.getElementsByClassName("mui-poppicker-btn-cancel")[0],a=document.createElement("h2");a.setAttribute("class","addTitle"),a.innerHTML="请选择审核状态",$(e).after(a);var i=document.getElementById("se-approval-state"),s=document.getElementById("inputMask");s.addEventListener("tap",function(t){$(".table li:first-of-type").hasClass("cur")?userPicker2.setData(aprovalState1):userPicker2.setData(aprovalState),$("input").blur(),userPicker2.show(function(t){i.value=t[0].text,i.setAttribute("data-i",t[0].value)})},!1)})}(mui,document),function(t){t.init();var e=t(".uBtdDate");e[0].addEventListener("tap",function(){var e=this.getAttribute("data-options")||"{}",a=JSON.parse(e);DatePicker=new t.DtPicker(a),DatePicker.show(function(t){var e=t.y.value+"/"+t.m.value+"/"+t.d.value;$(".uBtdDate")[0].setAttribute("value",e),uBtdDate=!0,DatePicker.dispose()})},!1),e[1].addEventListener("tap",function(){var e=this.getAttribute("data-options")||"{}",a=JSON.parse(e);DatePicker=new t.DtPicker(a),$(".mui-dtpicker-header h2.accidenttime").text("请选择终止日期"),DatePicker.show(function(t){var e=t.y.value+"/"+t.m.value+"/"+t.d.value;$(".uBtdDate")[1].setAttribute("value",e),uBtdDate=!0,DatePicker.dispose()})},!1)}(mui)}function getApprovalListUpcomingData(t){if(t.success){var e=t.data.items;$(".upcoming ul li").remove();for(var a=0;a<e.length;a++){var i=$(fHtml),s=e[a].statusno;i.find(".app-name").html(e[a].name),i.find(".app-time").html(changTime(new Date(e[a].applydate))),i.find(".referral-person").html(e[a].linkname),e[a].statusname&&(i.find(".approval-state").html(e[a].statusname),i.attr("volor",s),i.attr("secuitynum",e[a].secuityno),i.attr("strus",upcoming)),$("#zx_approval_list .ul").append(i),$("#zx_approval_list .ul li").click(function(){sessionStorage.setItem("secuityno",$(this).attr("secuitynum")),sessionStorage.setItem("strus",$(this).attr("strus")),location.hash="#zx_commonAudit"})}}else mui.alert("暂无数据"),$(".upcoming ul li").remove()}function getApprovalListRecordData(t){if(console.log(t),t.success){var e=t.data.items;$(".record ul li").remove();for(var a=0;a<e.length;a++){var i=$(sHtml),s=e[a].statusno;i.find(".app-name").html(e[a].name),i.find(".app-time").html(changTime(new Date(e[a].applydate))),i.find(".referral-person").html(e[a].linkname),i.find(".approval-state").html(e[a].statusname),i.attr("volor",s),i.attr("secuitynum",e[a].secuityno),i.attr("strus",record),$(".ul").append(i),i.click(function(){sessionStorage.setItem("secuityno",$(this).attr("secuitynum")),sessionStorage.setItem("strus",$(this).attr("strus")),location.hash="#zx_commonAudit"})}}else mui.alert(t.message),$(".record ul li").remove()}function getApprovalListAUData(t){if(t.success){var e=t.data.items;$(".upcoming ul li").remove();for(var a=0;a<e.length;a++){var i=$(fHtml);i.find(".app-name").html(e[a].name),i.find(".app-time").html(changTime(new Date(e[a].applydate)));var s=e[a].statusno;i.find(".referral-person").html(e[a].linkname),e[a].statusname&&(i.find(".approval-state").html(e[a].statusname),i.attr("volor",s),i.attr("secuitynum",e[a].secuityno),i.attr("strus",upcoming)),$("#zx_approval_list .ul").append("<li>"+i.html()+"</li>"),$(".ul li").click(function(){console.log(1),sessionStorage.setItem("secuityno",$(this).attr("secuitynum")),sessionStorage.setItem("strus",$(this).attr("strus")),location.hash="#zx_commonAudit"})}}else mui.alert(t.message),$(".upcoming ul li").remove()}function getApprovalListARData(t){if(t.success){var e=t.data.items;$(".record ul li").remove();for(var a=0;a<e.length;a++){var i=$(sHtml),s=e[a].statusno;i.find(".app-name").html(e[a].name),i.find(".app-time").html(changTime(new Date(e[a].applydate))),i.find(".referral-person").html(e[a].linkname),e[a].statusname&&(i.find(".approval-state").html(e[a].statusname),i.attr("volor",s),i.attr("secuitynum",e[a].secuityno),i.attr("strus",record)),$(".ul").append(i),i.click(function(){sessionStorage.setItem("secuityno",$(this).attr("secuitynum")),sessionStorage.setItem("strus",$(this).attr("strus")),location.hash="#zx_commonAudit"})}}else mui.alert(t.message),$(".record ul li").remove()}function changTime(t){var e=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();return e}var DatePicker,fHtml,sHtml,upcoming="p",record="f";$(document).ready(function(){init()});
//# sourceMappingURL=zx_approval_list.js.map
