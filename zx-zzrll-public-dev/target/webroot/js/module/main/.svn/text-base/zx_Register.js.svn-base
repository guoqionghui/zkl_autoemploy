function init(){removesessionStorage();var e=getUrlParam(),t=e.tradeStatus;"TRADE_SUCCESS"==t?(sessionStorage.setItem("trade",t),location.hash="#zx_approval"):null!=t&&""!=t&&void 0!=t||console.log("3"+t)}function isCardNo(e){var t=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;return t.test(e)}function clickEvent(){reg=/^(((13[0-9]{1})|159|153)+\d{8})$/,$alertInfo=$("#zx_register .alertInfo"),$alertText=$("#zx_register .alertInfo span"),$alertcardInfo=$("#zx_register .alertcardInfo"),$alertcardText=$("#zx_register .alertcardInfo span"),$isSelectinfo=$("#zx_register .Isselect"),$isSelecText=$("#zx_register .Isselect span"),$alerCodetInfo=$("#zx_register .alerCodetInfo"),$alerCodetText=$("#zx_register .alerCodetInfo span"),$alerCodeimg=$("#zx_register .alerCodeimg"),$alerCodeimgText=$("#zx_register .alerCodeimg span"),$("#zx_register .card-phone").bind("input",function(){$alertcardInfo.hide()}),$("#zx_register .phoneInput").bind("input",function(){$alertInfo.hide()}),$("#zx_register .valCode").bind("input",function(){$alerCodetInfo.hide()}),$("#Codeimg").bind("input",function(){$alerCodeimg.hide()}),function(e,t){e.init(),e(".mui-input-row input").input(),e.ready(function(){userPicker2=new e.PopPicker;var t=document.getElementsByClassName("mui-poppicker-btn-cancel")[0],r=document.createElement("h2");r.setAttribute("class","addTitle"),r.innerHTML="请选择证件类型",$(t).after(r),userPicker2.setData(IDKinds);var a=document.getElementById("id-card");a.value=IDKinds[0].text,a.dataset.i=IDKinds[0].PROCFLG01,idType=IDKinds[0].text;var n=document.getElementById("inputMask");n.addEventListener("tap",function(e){userPicker2.show(function(e){a.value=e[0].text,a.dataset.i=e[0].PROCFLG01,idType=e[0].text,$isSelectinfo.hide()})},!1),isType=!0})}(mui,document),$("#zx_register .countBtn").click(function(){var e=$("#zx_register .phoneInput").val();reg.test(e)?(sendPhone=e,telphonenum={telphonenum:e,messageType:"Register"},Clients.postClientAjax(url.zx_signInformationCode,telphonenum,getPhonecode),console.log(telphonenum)):""==e?($alertInfo.show(),$alertText.text("请输入手机号")):($alertInfo.show(),$alertText.text("请输入有效的手机号码"))}),$("#zx_register .card-phone").blur("input",function(){""!=$(this).val()?"身份证"==idType||"身份证"==$("#id-card").val()?checkID($.trim($(this).val()))?($alertcardInfo.hide(),isCardvode=!0):($alertcardInfo.show(),$alertcardText.text("请输入正确的身份证号"),isCardvode=!1):($alertcardInfo.hide(),isCardvode=!0):($alertcardInfo.show(),$alertcardText.text("请输入身份证号"))}),$("#zx_register .phoneInput").blur("input",function(){reg.test($("#zx_register .phoneInput").val())?($alertInfo.hide(),isPhone=!0):($alertInfo.show(),$alertText.text("请输入有效的手机号码"),isPhone=!1)}),$("#randomImg").click(function(){$("#randomImg").attr("src","https://test2.citicpruagents.com.cn/autoemploy/login/getImagecode?t="+(new Date).getTime())}),$("#Codeimg").blur("input",function(){}),$(".btnonclick").click(function(){flag=!0,"身份证"==idType||"身份证"==$("#id-card").val()?checkID($.trim($("#cardPhone").val()))?($alertcardInfo.hide(),ifNonullInfo()):($alertcardInfo.show(),$alertcardText.text("请输入正确的身份证号")):($alertcardInfo.hide(),ifNonullInfo())}),$(".rightButton").click(function(){sessionStorage.setItem("Phone_card",$("#cardPhone").val()),sessionStorage.setItem("Type_code",$("#id-card").attr("data-i")),sessionStorage.setItem("Phonevode",$("#zx_register .phoneInput").val()),sessionStorage.setItem("idType",idType),location.hash="#zx_inforRegister"}),$(".leftButton").click(function(){$("#indexMask").hide(),$("#indexNetPop").hide()})}function ifNonullInfo(){if(isCardvode&&isPhone&&isType){flag=!0;var e=({imageCode:$("#Codeimg").val()},$("#cardPhone").val()),t=$(".phoneInput").val(),r=$("#id-card").attr("data-i"),a={chequeno:e,telphonenum:t,procflg01:r};Clients.postClientAjax(url.zx_Gologin,a,getOkdata)}else mui.alert("信息有未填写或填写错误!"),flag=!1}function getCodeimg(e){1==e.success?console.log(e):($("#indexMask").hide(),$("#indexNetPop").hide(),mui.alert(e.message))}function getOkdata(e){console.log(e),1==e.success&&"true"==e.data.Unique.flag?"false"==e.data.IsAgent.flag?"true"==e.data.IsChequeno.flag?mui.alert(e.message):"true"==e.data.IsTel.flag?mui.alert(e.message):($("#indexMask").show(10),$("#indexNetPop").show()):"true"==e.data.IsAgent.flag&&("true"==e.data.IsZstatus.flag?"true"==e.data.IsApprove.flag?(console.log(e.data.IsApprove.name),sessionStorage.setItem("Phone_card",$("#cardPhone").val()),sessionStorage.setItem("Type_code",$("#id-card").attr("data-i")),sessionStorage.setItem("Phonevode",$("#zx_register .phoneInput").val()),sessionStorage.setItem("IDname",e.data.IsApprove.name),sessionStorage.setItem("IDstatusNo",e.data.IsApprove.statusNo),sessionStorage.setItem("IDstatusname",e.data.IsApprove.statusName),sessionStorage.setItem("imgcode","1"),location.hash="#zx_approval"):(sessionStorage.setItem("Phone_card",$("#cardPhone").val()),sessionStorage.setItem("Type_code",$("#id-card").attr("data-i")),sessionStorage.setItem("IDname",e.data.IsApprove.name),sessionStorage.setItem("Phonevode",$("#zx_register .phoneInput").val()),sessionStorage.setItem("IDstatusNo",e.data.IsApprove.statusNo),sessionStorage.setItem("IDstatusname",e.data.IsApprove.statusName),location.hash="#zx_approvePay"):(sessionStorage.setItem("Phone_card",$("#cardPhone").val()),sessionStorage.setItem("Type_code",$("#id-card").attr("data-i")),sessionStorage.setItem("Phonevode",$("#zx_register .phoneInput").val()),sessionStorage.setItem("idType",idType),location.hash="#zx_inforRegister")):mui.alert(e.message)}function getPhonecode(e){1==e.success?(phoneCode=e.data,validationCode.sendMessage($("#zx_register .countBtn")),msincre=299,msinLess()):mui.alert(e.message),console.log(e.data)}function msinLess(){timer=setInterval(function(){msincre--,0==msincre&&(clearInterval(timer),timer=null)},1e3)}function getUrlParam(){var e=location.search;if(""==e)return{};for(var t=e.slice(1,e.length),r=t.split("&"),a={},n=0;n<r.length;n++)if(""!=r[n]){var i=r[n].split("=");a[i[0]]=i[1]}return console.log(a),a}function identity(e,t,r,a){this.id_no=e,this.id_area=t,this.id_birth=r,this.id_gender=a}function GetVerifyBit(id){var result,nNum=eval(7*id.charAt(0)+9*id.charAt(1)+10*id.charAt(2)+5*id.charAt(3)+8*id.charAt(4)+4*id.charAt(5)+2*id.charAt(6)+1*id.charAt(7)+6*id.charAt(8)+3*id.charAt(9)+7*id.charAt(10)+9*id.charAt(11)+10*id.charAt(12)+5*id.charAt(13)+8*id.charAt(14)+4*id.charAt(15)+2*id.charAt(16));switch(nNum%=11){case 0:result="1";break;case 1:result="0";break;case 2:result="X";break;case 3:result="9";break;case 4:result="8";break;case 5:result="7";break;case 6:result="6";break;case 7:result="5";break;case 8:result="4";break;case 9:result="3";break;case 10:result="2"}return result}function checkID(e){var t=e.length,r="",a="";if(0==t)return null;if(null==aCity[Number(e.substr(0,2))])return null;if(15!=t&&18!=t)return null;if(15==t){var n="19"+e.substring(6,8),i=Number(n),s=e.substring(8,10),o=Number(s),l=e.substring(10,12),d=Number(l),c=i+"/"+o+"/"+d,u=new Date(c);if(c!=u.getFullYear()+"/"+(u.getMonth()+1)+"/"+u.getDate())return null;r=n+"/"+s+"/"+l,a="13579".indexOf(e.substring(14,15))!=-1?"M":"F"}else if(18==t){if(e.indexOf("X")>0&&17!=e.indexOf("X")||e.indexOf("x")>0&&17!=e.indexOf("x"))return null;var n=e.substring(6,10),i=Number(n);if(i>2200||i<1900)return null;var s=e.substring(10,12),o=Number(s),l=e.substring(12,14),d=Number(l),c=i+"/"+o+"/"+d,u=new Date(c);if(c!=u.getFullYear()+"/"+(u.getMonth()+1)+"/"+u.getDate())return null;if(r=n+s+l,"x"==e.charAt(17)||"X"==e.charAt(17)){if("x"!=GetVerifyBit(e)&&"X"!=GetVerifyBit(e))return null}else if(e.charAt(17)!=GetVerifyBit(e))return null;a="13579".indexOf(e.substring(16,17))>-1?"M":"F"}var g=new identity(e,aCity[Number(e.substr(0,2))],r,a);return g}var validationCode={timer:"null",count:59,curCount:null,sendMessage:function(e){var t=this;t.curCount=t.count,e.attr("disabled","true").css("background","#c1c1c1"),e.text(t.curCount+"s"),t.timer=setInterval(function(){t.SetRemainTime(e)},1e3)},SetRemainTime:function(e){var t=this;1==t.curCount?(clearInterval(t.timer),e.removeAttr("disabled").css("background","#fff"),e.text("重新发送")):(t.curCount--,e.text(t.curCount+"s"))}},msincre=100,userPicker2,telphonenum=null,phoneCode,idType,$alertInfo,$alertText,$alertcardInfo,$alertcardText,$isSelectinfo,$isSelecText,$alerCodetInfo,$alerCodetText,$alerCodeimg,$alerCodeimgText,reg,isPhone=!1,isCodephone=!1,isCardvode=!1,isType=!1,dataCard,sendPhone,timer=null,flag,IDKinds=[{PROCFLG01:"1",text:"身份证"},{PROCFLG01:"2",text:"中国护照"},{PROCFLG01:"3",text:"军官证"},{PROCFLG01:"4",text:"港澳回乡证"},{PROCFLG01:"5",text:"其它"},{PROCFLG01:"6",text:"出生证"},{PROCFLG01:"7",text:"户口本"},{PROCFLG01:"8",text:"士兵证"},{PROCFLG01:"9",text:"台胞证"},{PROCFLG01:"A",text:"外国人永久居留身份证"}];$(function(){mui(".mui-input-row input").input(),init(),clickEvent()});
//# sourceMappingURL=zx_Register.js.map
