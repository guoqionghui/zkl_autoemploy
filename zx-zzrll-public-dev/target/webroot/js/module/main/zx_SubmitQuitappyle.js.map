{"version":3,"sources":["js/module/main/zx_SubmitQuitappyle.js"],"names":["init","$","text","dataInfo","filiale","counts","marketing","number","name","rank","time","phone","clickEvent","$alertcauiseInfo","$alertcauiseText","focus","hide","blur","this","val","CauseisText","show","click","hasClass","removeClass","Cheboxopt","addClass","Canvasimg","console","log","dataUrl","mui","alert","bind","self","file","files","r","FileReader","readAsDataURL","load","fileStream","result","attr","getCanvas","save","data_uri","signaturePad","toDataURL","replace","img","src","canvas","document","getElementById","SignaturePad","backgroundColor","clear","slideUp","html","scrollTop","scrollHeight","LzCause","ready","input","width","screen","height","slideDown"],"mappings":"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","file":"js/module/main/zx_SubmitQuitappyle.js","sourcesContent":["var dataUrl;//签名存储\r\nvar LzCause;//存储离职原因\r\nvar Canvasimg = false;//记录有没有签名\r\nvar Cheboxopt = false;//记录是否勾选了本人确认单选按钮\r\nvar CauseisText = false;//记录离职原因是否填写\r\n//获取传过来的信息\r\nvar dataInfo={\r\n\t\"filiale\":\"广州\",\r\n\t\"counts\":\"广州分支\",\r\n\t\"marketing\":\"白云服务部\",\r\n\t\"number\":\"6088726\",\r\n\t\"name\":\"张三\",\r\n\t\"rank\":\"000222\",\r\n\t\"time\":\"2018-8-9\",\r\n\t\"phone\":\"13788889999\"\r\n}\r\n$(document).ready(function() {\r\n\tmui('.mui-input-row input').input();\r\n\tmui.init();\r\n\tinit();//初始化\r\n\tclickEvent();//点击事件初始化方法\r\n\t/*获取1张签名画布*/\r\n\tvar canvas = document.getElementById(\"myCanvas\");\r\n\t//var canvas1 = document.getElementById(\"mytoCanvase\");\r\n\timg = $(\".signPic\")[0];\r\n\tcanvas.width = screen.width - 30;\r\n\tcanvas.height = screen.height / 2 - 40 - 120;\r\n\t//点击签字确认，弹出窗口\r\n\t$(\".confirmBtn\").bind('click', function() {\r\n\t\t\t$(\".signCanvas\").slideDown();\r\n\t\t\tgetCanvas();\r\n\t\t\t$(\".global-shadow\").removeClass(\"sino-hide\");\r\n\t});\r\n});\r\n\r\n/*初始化事件*/\r\nfunction init(){\r\n\t$(\".Text_filiale\").text(dataInfo.filiale);//获取分公司\r\n\t$(\".Text_city\").text(dataInfo.counts);//获取中支\r\n\t$(\".Text_service\").text(dataInfo.marketing);//获取服务部\r\n\t$(\".Text_number\").text(dataInfo.number);//获取工号\r\n\t$(\".Text_name\").text(dataInfo.name);//获取姓名\r\n\t$(\".Text_rank\").text(dataInfo.rank);//获取职级\r\n\t$(\".Text_date\").text(dataInfo.time);//获取入司时间\r\n\t$(\".Text_phone\").text(dataInfo.phone);//获取移动电话\r\n}\r\n/*页面点击事件处理方法*/\r\nfunction clickEvent(){\r\n\tvar $alertcauiseInfo = $(\"#zx_submitinfo .alertcauiseInfo\");//离职原因没有输入错误提示框\r\n\tvar $alertcauiseText = $(\"#zx_submitinfo .alertcauiseInfo span\");//离职原因错误信息\r\n\t//为离职原因输入框绑定事件处理\r\n\t$(\"#Lz_cause\").focus(function(){\r\n\t\t$alertcauiseInfo.hide();\r\n\t});\r\n\t$(\"#Lz_cause\").blur(function(){\r\n\t\tif($(this).val()!=\"\"){\r\n\t\t\tCauseisText = true;\r\n\t\t}else{\r\n\t\t\t$alertcauiseInfo.show();\r\n\t\t\t$alertcauiseText.text(\"请输入离职原因\");\r\n\t\t\tCauseisText = false;\r\n\t\t}\r\n\t});\r\n\t//勾选本人是否确认按钮事件处理\r\n\t$(\"#Chebox\").click(function(){\r\n\t\tif ($(this).hasClass(\"Trueimg\")) {\r\n\t\t\t$(this).removeClass(\"Trueimg\");\r\n\t\t\tCheboxopt = false;\r\n\t\t} else{\r\n\t\t\t$(this).addClass(\"Trueimg\");\r\n\t\t\tCheboxopt = true;\r\n\t\t}\r\n\t});\r\n\t//点击提交申请按钮处理事件\r\n\t$(\".btnonclick\").click(function(){\r\n\t\tif(Canvasimg && Cheboxopt && CauseisText){\r\n\t\t\tconsole.log(dataUrl);\r\n\t\t\t$(\"#indexMask\").show();\r\n\t\t\t$(\"#indexNetPop\").show();\r\n\t\t\t$(\"#Filiale\").text(dataInfo.filiale);\r\n\t\t}else{\r\n\t\t\tmui.alert(\"信息有未填写，请填写完成！\");\r\n\t\t}\r\n\t});\r\n\t//点击提交申请按钮时候弹框的返回按钮事件\r\n\t$(\"#zx_submitinfo .leftButton\").click(function(){\r\n\t\t$(\"#indexMask\").hide();\r\n\t\t\t$(\"#indexNetPop\").hide();\r\n\t});\r\n\t//点击提交申请按钮时候弹框的确认按钮事件\r\n\t$(\"#zx_submitinfo .rightButton\").click(function(){\r\n\t\tconsole.log(\"点击了确认按钮\")\r\n\t});\r\n\t//绑定点击添加图片事件\r\n\t$(\"#zx_submitinfo .addimg\").bind(\"change\",function(){\r\n\t\tvar self= this;\r\n\t\tvar file=self.files[0]; \r\n\t\tvar r=new FileReader(); //图片读取  \r\n\t    r.readAsDataURL(file);\r\n\t    $(r).load(function(){\r\n\t    \tvar fileStream=this.result;\r\n\t    \tif($(self).attr(\"id\")==\"HandImg\"){\r\n\t    \t\t$(\"#imgCrde\").attr(\"src\",fileStream).attr(\"data-i\",\"1\");\r\n\t    \t}\r\n\t    });      \r\n\t});\r\n}\r\n//实现弹窗区域的签字效果\r\nfunction getCanvas() {\r\n\t/*获取第一张画布*/\r\n\tvar canvas = document.getElementById(\"myCanvas\");\r\n\tvar signaturePad = new SignaturePad(canvas, {\r\n\t\tbackgroundColor: 'rgb(255,255,255)',\r\n\t});\r\n\t//点击重画，清空当前画布\r\n\t$(\".overWrite\").click(function() {\r\n\t\tsignaturePad.clear();\r\n\t});\r\n\t//点击完成保存图片\r\n\t$(\".finish\").bind('click', function() {\r\n\t\t$(\".signBox\").show();\r\n\t\t$(\".signBoxtwo\").show();\r\n\t\tsave();\r\n\t\t$(\".global-shadow\").addClass(\"sino-hide\");\r\n\t\t$(\".signCanvas\").slideUp();\r\n\t\t$(\".confirmBtn\").html(\"完成\");\r\n\t\t//getCanvas();\r\n\t\t$('#zx_submitinfo .mui-content').scrollTop($('#zx_submitinfo .mui-content')[0].scrollHeight);\r\n\t\tCanvasimg = true;\r\n\t});\r\n\t//点击取消，弹窗消失\r\n\t$(\".clearBtn\").bind('click', function() {\r\n\t\tsignaturePad.clear();\r\n\t\t$(\".signCanvas\").slideUp();\r\n\t\t$(\".global-shadow\").addClass(\"sino-hide\");\r\n\t\tCanvasimg = false;\r\n\t});\r\n\t/***图片保存处理函数***/\r\n\tfunction save() {\r\n\t\tvar data_uri = signaturePad.toDataURL(\"image/png\");\r\n\t\tdataUrl = data_uri.replace(\"image/png\", \"image/octet-stream\");\r\n\t\timg.src = dataUrl;\r\n\t\t\r\n\t}\r\n}\r\n"],"sourceRoot":"/source/"}