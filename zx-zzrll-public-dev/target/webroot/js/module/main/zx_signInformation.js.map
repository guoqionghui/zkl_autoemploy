{"version":3,"sources":["js/module/main/zx_signInformation.js"],"names":["eventBind","$","click","sessionStorage","setItem","refF","location","hash","refS","refT","on","toggleClass","hasClass","Clients","postClientAjax","url","zx_signContractInit","pdfData","getSignContractInitData","$alertBankPhone","$alertBankPhoneText","bind","hide","refConfirm","getItem","refContract","reg","test","Bankphone","validationCode","sendMessage","zx_signInformationCode","telphonenum","messageType","code","getPhoneCodeData","undefined","show","text","mui","alert","console","log","refTypeCode","appntOcr","appntCamera","appntPen","isFaceVerify","isBankPhone","isSign","unbind","css","ischeck","zx_signInsertApprInfo","chequeno","refPhoneCard","getApprInfoData","goBack","history","go","ref","phoneCodeBlur","PhoneCode","blur","data","msinLess","timer","setInterval","msincre","clearInterval","getsignMultifileUploadPhotoData","result","message","getSignFaceVerifyData","verifyStatus","attr","resultImage","facePhoto","sino","globalLoading","success","pdfUrl","getsignDigitalSignaturData","getReturnPhotoData","allPicTypes","i","length","allPicPaths","count","curCount","elem","self","this","SetRemainTime","removeAttr","dataUrl","conflag","signPhoto","payAmount","JSON","parse","applicationName","AppntverificationData","document","ready","init","swipeBack","html","color","addClass","removeClass","photoTypes","returnPhoto","PicTypes","CHEQUENO","zx_signFaceSignPhoto","appntOcrFlag","appVersion","callback","isSuccess","verificationData","appntOcrSave","cordova","LivenessDetection","appntCameraFlag","width","height","mono","quality","openFromGallery","businessType","exit","signImg","photoName","phoneCard","photoData","fileName","zx_signMultifileUploadPhoto","takePhoto","signAppntFlag","title","titleSpanFromOffset","titleSpanToOffset","singleWidth","singleHeight","Identitycardnbr","username","nessesary","template_serial","serverConfigRule","AppntSignatureData","signatureData","base64Str","ESIGNBACKDSTR","zx_signDigitalSignature","cancel","digitalSignature","ajaxceshi","ajax","type","queryImagePackage","databaseImageContent","databaseImageType","resJson","stringify","beforeSend","xhr","setRequestHeader","paramMap","imagePackage","citizenId","appVersionPlat","customerName","idType","zx_signFaceVerify"],"mappings":"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","file":"js/module/main/zx_signInformation.js","sourcesContent":["\r\n\r\n/**\r\n * validationCode对象用于控制验证码时间\r\n * **/\r\nvar validationCode = {\r\n\ttimer: \"null\", //timer变量，控制时间  \r\n\tcount: 59, //间隔函数，1秒执行  \r\n\tcurCount: null, //当前剩余秒数  \r\n\t/****\r\n\t * ***定义验证码重发时间控制的方法**\r\n\t * ***参数elem 为按钮元素$对象\r\n\t * ***/\r\n\tsendMessage: function sendMessage(elem) {\r\n\t\tvar self = this;\r\n\t\tself.curCount = self.count;\r\n\t\t//设置button效果，开始计时  \r\n\t\telem.attr(\"disabled\", \"true\").css(\"background\", \"#c1c1c1\");;\r\n\t\telem.text(self.curCount + \"s\");\r\n\t\tself.timer = setInterval(function() {\r\n\t\t\tself.SetRemainTime(elem)\r\n\t\t}, 1000); //启动计时器，1秒执行一次\r\n\t},\r\n\t/****\r\n\t * ***timer处理函数，判断时间**\r\n\t * ***参数elem 为按钮元素$对象\r\n\t * ***/\r\n\tSetRemainTime: function(elem) {\r\n\t\tvar self = this;\r\n\t\tif (self.curCount == 1) {\r\n\t\t\tclearInterval(self.timer); //停止计时器  \r\n\t\t\telem.removeAttr(\"disabled\").css(\"background\", \"#fff\"); //启用按钮  \r\n\t\t\telem.text(\"重新发送\");\r\n\t\t} else {\r\n\t\t\tself.curCount--;\r\n\t\t\telem.text(self.curCount + \"s\");\r\n\t\t}\r\n\t}\r\n}\r\nvar refF; //sessionStorage 资料一的变量\r\nvar refS; //sessionStorage 资料二的变量\r\nvar refT; //sessionStorage 资料三的变量\r\nvar refContract; //sessionStorage 代理合同的变量\r\nvar refConfirm; //sessionStorage 本人确认的变量\r\nvar dataUrl; //签字图片保存的变量\r\nvar $alertBankPhone; //手机验证码错误提示框\r\nvar $alertBankPhoneText; //手机验证码错误信息\r\nvar msincre=60;//短信失效时间\r\nvar conflag;//弹出确认框的标志\r\nvar isFaceVerify = false;//人脸识别是否完成标志\r\nvar isBankPhone = false; //标记手机验证码是否填写\r\nvar isSign =false;\r\nvar ischeck = false;//人脸、短信、签名三项是否都完成的标识\r\nvar code=\"Code\"//手机验证码标识，传向后台\r\n// var Bankphone = \"17602066003\"; //获取电话号码\r\nvar signPhoto;//显示签名的变量\r\nvar facePhoto;//显示拍照或者人脸识别的变量\r\n\r\n\r\n//获取sessionStorage的值\r\nvar refF = sessionStorage.getItem(\"infoReadStateF\");//资料一\r\nvar refS = sessionStorage.getItem(\"infoReadStateS\");//资料二\r\nvar refT = sessionStorage.getItem(\"infoReadStateT\");//资料三\r\nvar refContract = sessionStorage.getItem('agencyContract');//代理合同\r\nvar refConfirm = sessionStorage.getItem('confirmed');//本人确认\r\nvar payAmount = sessionStorage.getItem('payAmount');//履约保证金\r\nvar pdfData= JSON.parse(sessionStorage.getItem(\"contract\"));//请求代理合同传的参数(分公司名称、乙方身份在号、详细地址、邮编、履约保证金)\r\nvar refTypeCode = sessionStorage.getItem('Type_code');//登录时证件类型\r\nvar Bankphone = sessionStorage.getItem('Phonevode');//登录时手机号\r\nvar applicationName=sessionStorage.getItem('applicationName');//人脸识别姓名\r\n\r\n\r\nvar refPhoneCard = sessionStorage.getItem('Phone_card');//登录时证件证号\r\n\r\nvar AppntverificationData=\"\";//人脸识别大礼包\r\n// var refTypeCode = \"1\";//登录时证件类型\r\n// var refPhoneCard=\"4254821963188888\";//人脸识别身份证 打开pdf传的参数号\r\n// var applicationName=\"郭浩妙\";//人脸识别姓名\r\n\r\n// var refPhoneCard=\"4254821963188888\";//打开pdf传的参数身份证号\r\n// var comname=\"广东分公司\";//打开pdf传的参数分公司\r\n// var add=\"广东省广州市\";//打开pdf传的参数详细地址\r\n// var post=\"3453333\";//打开pdf传的参数邮编\r\n// var costAmount=\"55\"//pdf 履约保证金\r\n\r\n$(document).ready(function() {\r\n\tmui.init({\r\n\t\tswipeBack: true //启用右滑关闭功能\r\n\t});\r\n\t//调用点击绑定事件\r\n\teventBind();\r\n\t\r\n\r\n\t//\t改变未阅读和已阅读的状态\r\n\t//\t资料状态\r\n\tif (refF == \"1\") {\r\n\t\t$(\"#information1 span\").html(\"已阅读\");\r\n\t\t$(\"#information1 span\").css({\r\n\t\t\tcolor: \"gray\"\r\n\t\t});\r\n\t}\r\n\tif (refS == \"1\") {\r\n\t\t$(\"#information2 span\").html(\"已阅读\");\r\n\t\t$(\"#information2 span\").css({\r\n\t\t\tcolor: \"gray\"\r\n\t\t});\r\n\t}\r\n\tif (refT == \"1\") {\r\n\t\t$(\"#information3 span\").html(\"已阅读\");\r\n\t\t$(\"#information3 span\").css({\r\n\t\t\tcolor: \"gray\"\r\n\t\t});\r\n\t}\r\n\t//\t代理合同状态\r\n\tif (refContract == \"1\") {\r\n\t\t$(\"#agencyContract span\").html(\"已阅读\");\r\n\t\t$(\"#agencyContract span\").css({\r\n\t\t\tcolor: \"gray\"\r\n\t\t});\r\n\t}\r\n\t//\t本人确认方框状态\r\n\tif (refConfirm == \"1\") {\r\n\t\t$(\".readOne\").addClass('read');\r\n\t} else {\r\n\t\t$('.readOne').removeClass('read');\r\n\t}\r\n\tif(sessionStorage.getItem('flag')==\"true\"){\r\n\t\t//从资料、合同页面返回，请求是否做过人脸识别、短信、签名等\r\n\t\t\tvar photoTypes = [\"999900\",\"999800\"];\r\n\t\t\tvar returnPhoto={PicTypes:photoTypes,CHEQUENO:refPhoneCard};\r\n\t\t\tClients.postClientAjax(url.zx_signFaceSignPhoto,returnPhoto,getReturnPhotoData);\t\t\t\r\n\t}\r\n});\r\n\r\n// 绑定函数事件开始\r\nfunction eventBind(){\r\n\t//\t点击资料时,调转其他页面\r\n\t$('#information1').click(function() {\r\n\t\tsessionStorage.setItem(\"aefF\", refF);\r\n\t\tsessionStorage.setItem(\"flag\",false);\r\n\t\tlocation.hash = \"#zx_read-infoContentF\";\r\n\t});\r\n\t$('#information2').click(function() {\r\n\t\tsessionStorage.setItem(\"aefS\", refS);\r\n\t\tsessionStorage.setItem(\"flag\",false);\r\n\r\n\t\tlocation.hash = \"#zx_read-infoContentS\";\r\n\t});\r\n\t$('#information3').click(function() {\r\n\t\tsessionStorage.setItem(\"aefT\", refT);\r\n\t\tsessionStorage.setItem(\"flag\",false);\r\n\r\n\t\tlocation.hash = \"#zx_read-infoContentT\";\r\n\t});\r\n\t//\t本人确认方框\r\n\t$('.check-confirm').on('tap', function() {\r\n\t\t$('.check-confirm span').toggleClass('read');\r\n\t\t//\t判断本人确认方框是否已经选中,并且将状态记录\r\n\t\tif ($('.check-confirm .readOne').hasClass('read')) {\r\n\t\t\tsessionStorage.setItem(\"confirmed\", \"1\");\r\n\t\t} else {\r\n\t\t\tsessionStorage.setItem(\"confirmed\", \"0\");\r\n\t\t}\r\n\t});\r\n\t//点击代理合同\r\n\t$('#agencyContract').click(function() {\r\n\t\tsessionStorage.setItem('agencyContract', '1');\t\r\n\t\tsessionStorage.setItem(\"flag\",false);\r\n\r\n\t\t// var pdfData={\r\n\t\t// \tchequeno: \"450881199412046666\",//身份证号\r\n\t\t// \tsubcomid:\"GD0001\",//分公司\r\n\t\t// \taddress:\"33445657687\",//乙方的地址(详细地址)\r\n\t\t// \tpostcode:\"233234\",//邮编\r\n\t\t// \tpaymoney:\"\",//履约保证金(缴费之后取seesion)\r\n\t\t// };\r\n\t\tClients.postClientAjax(url.zx_signContractInit,pdfData,getSignContractInitData);\r\n\t\t // window.open(\"https://test2.citicpruagents.com.cn/autoemploy/pdf/test.jpg\",'_blank');\r\n\t\t // sessionStorage.setItem(\"contractUrl\",\"https://test2.citicpruagents.com.cn/autoemploy/pdf/test.jpg\");\r\n\t\t // location.hash=\"#zx_agencyContract\";\r\n\t\t // cordova.sino.openPDF(callback, {URL:\"https://test2.citicpruagents.com.cn/autoemploy/pdf/123.pdf\"});\r\n\t\t\r\n\r\n\t});\r\n\r\n\t//手机验证码\r\n\t$alertBankPhone = $(\"#zx_signInformation .alertBankPhone\"); //手机验证码错误提示框\r\n\t$alertBankPhoneText = $(\"#zx_signInformation .alertBankPhone span\"); //手机验证码错误信息\r\n\t/*手机验证码绑定处理事件*/\r\n\t$(\"#zx_signInformation .valCode\").bind(\"input\", function() {\r\n\t\t$alertBankPhone.hide();\r\n\t});\r\n\t/***为发送验证码按钮添加点击事件***/\r\n\t$(\"#zx_signInformation .countBtn\").click(function() {\r\n\t\trefConfirm = sessionStorage.getItem('confirmed');\r\n\t\t//\t当代理合同和本人确认状态改变后,进行人脸识别拍照,验证码,电子签名\r\n\t\tif (refContract == \"1\" && refConfirm == \"1\") {\r\n\t\t\tvar reg = /^1\\d{10}$/; //手机号码的正则表达式\r\n\t\t\tif (reg.test(Bankphone)) {\r\n\t\t\t\tvalidationCode.sendMessage($(\"#zx_signInformation .countBtn\")); //执行验证码重发时间函数\r\n\t\t\t\t$alertBankPhone.hide();\r\n\t\t\t\tClients.postClientAjax(url.zx_signInformationCode,{telphonenum:Bankphone, messageType:code},getPhoneCodeData);\r\n\t\t\t\t\r\n\t\t\t} else if (Bankphone == \"\" || Bankphone == null || Bankphone == undefined) {\r\n\t\t\t\t$alertBankPhone.show();\r\n\t\t\t\t$alertBankPhoneText.text(\"手机号码不存在，无法获取验证码\");\r\n\t\t\t} else {\r\n\t\t\t\t$alertBankPhone.show();\r\n\t\t\t\t$alertBankPhoneText.text(\"手机号码无效，无法获取验证码\");\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tmui.alert('请阅读代理合同并确认')\r\n\t\t}\r\n\t});\r\n\r\n\t//点击人脸识别拍照\r\n\t$(\"#appntCamera\").click(function(){\r\n\t\t//检验是否已经阅读并确认\r\n\t\trefConfirm = sessionStorage.getItem('confirmed');\r\n\t\tconsole.log(refContract);\r\n\t\tif (refContract == \"1\" && refConfirm == \"1\") {\r\n\t\t\t//refTypeCode获取证件类型 \"1\"为身份证\r\n\t\t\t//证件类型是身份证，进行人脸识别\r\n\t\t\tif(refTypeCode == \"1\"){\r\n\t\t\t\tappntOcr();//人脸识别\t\t\t\r\n\t\t\t}else{\r\n\t\t\t//进行拍照\r\n\t\t\t\tappntCamera();//拍照\r\n\t\t\t}\r\n\t\t}\r\n\t\telse{\r\n\t\t\tmui.alert('请阅读代理合同并确认');\t\t\r\n\t\t}\t\t\r\n\t});\r\n\r\n\t//点击电子签名\r\n\t$(\"#Signname\").click(function(){\r\n\t\t//检验是否已经阅读并确认\r\n\t\trefConfirm = sessionStorage.getItem('confirmed');\r\n\t\tif (refContract == \"1\" && refConfirm == \"1\") {\r\n\t\t\tappntPen();\r\n\t\t}else{\r\n\t\t\tmui.alert('请阅读代理合同并确认');\r\n\t\t}\r\n\t\t\r\n\t});\r\n\r\n\t//点击确认按钮\r\n\t$(\"#confirm\").click(function(){\r\n\t\tif(isFaceVerify && isBankPhone && isSign){\r\n\t\t\t$(\"#indexMask\").show();\r\n\t\t\t$(\"#indexNetPop\").show();\r\n\t\t}\r\n\t\telse{\r\n\t\t\tmui.alert(\"请先进行对人脸识别/拍照、验证、电子签名\");\r\n\t\t}\t\t\r\n\t})\r\n\t/*确认按钮点击之后弹框事件*/\r\n\t$(\"#rightButton\").click(function(){\r\n\t\t//点击确认后，人脸识别、拍照、验证码、电子签名按钮置灰\r\n\t\t$(\"#appntCamera\").unbind(\"click\");\r\n\t\t$(\".countBtn\").css(\"display\",\"none\");\r\n\t\t$(\"#Signname\").unbind(\"click\");\r\n\t\t// var photoTypes = [\"999900\",\"999800\"];\r\n\t\t// var returnPhoto={PicTypes:photoTypes,CHEQUENO:refPhoneCard};\r\n\t\t$(\"#indexMask\").hide();\r\n\t\t$(\"#indexNetPop\").hide();\r\n\t\tischeck = true;\r\n\t});\r\n\t/*弹框提示返回按钮事件*/\r\n\t$(\".leftButton\").click(function(){\r\n\t\t$(\"#indexMask\").hide();\r\n\t\t$(\"#indexNetPop\").hide();\r\n\t});\r\n\t//点击提交申请\r\n\t$(\".btnonclick\").click(function() {\r\n\t\tif (ischeck && refF == \"1\" && refS == \"1\"&& refT == \"1\"){\r\n\t\t\tClients.postClientAjax(url.zx_signInsertApprInfo,{chequeno:refPhoneCard},getApprInfoData);\t\r\n\t\t}else{\r\n\t\t\tmui.alert('请阅读完资料以及完成电子签名和人脸识别以上操作');\r\n\t\t}\t\r\n\t});\r\n\t\r\n}\r\n// 绑定函数事件结束\r\n\r\n\r\n\r\n/*返回上一页面事件*/\r\nfunction goBack(){\r\n\thistory.go(-1);\r\n\tvar ref=1;\r\n\tsessionStorage.setItem(\"Imgref\",ref);\r\n}\r\n\r\n\r\n/*验证码输入框失去焦点时校验*/\r\nfunction phoneCodeBlur(PhoneCode){\r\n\t$(\"#zx_signInformation .valCode\").blur(\"input\", function() {\r\n\t\t// console.log(PhoneCode);\r\n\t\t// if ($(this).val() == PhoneCode) {\r\n\t\t\t$alertBankPhone.hide();\r\n\t\t\tisBankPhone = true;\r\n\t\t// \tmui.alert(\"短信验证成功\");\r\n\t\t// } else {\r\n\t\t// \t$alertBankPhone.show();\r\n\t\t// \t$alertBankPhoneText.text(\"请输入正确的验证码\");\r\n\t\t// \tisBankPhone = false;\r\n\t\t// }\r\n\t});\r\n}\t\r\n//获取手机验证码的回调\r\nfunction getPhoneCodeData(data){\r\n\tvar PhoneCode = data.data;\r\n\tconsole.log(PhoneCode);\r\n\tphoneCodeBlur(PhoneCode);\r\n\tmsinLess();\r\n}\r\n/****验证码有效计时****/\r\nfunction msinLess(){\r\n\ttimer=setInterval(function(){\r\n\t\tmsincre--;\r\n\t\tif(msincre==0){\r\n\t\t\tclearInterval(timer);\r\n\t\t\ttimer=null;\r\n\t\t}\r\n\t},1000)\r\n}\r\n\r\n\r\n//人脸识别\r\nvar appntOcrFlag = true;\r\nvar appntOcr = function(){\r\n\tif(appVersion!='IOS'){\r\n\t\tif(!appntOcrFlag){\r\n\t\t\treturn;\r\n\t\t}  \r\n\t\tappntOcrFlag = false;\r\n\t}\r\n\tvar data = {\r\n\t\t};\r\n\tvar callback = function(result){\r\n\t\tappntOcrFlag = true;\r\n\t\tif(result.data.isSuccess == \"1\"){\r\n\t\t\tAppntverificationData = result.data.verificationData;//大礼包\r\n\t\t\t// ajaxceshi(AppntverificationData);\r\n\t\t\tappntOcrSave(AppntverificationData);\r\n\t\t}else{\r\n\t\t\t//人脸识别原生\"没通过\"\r\n\t\t\tsino.alert(\"人脸识别失败\");\r\n\t\t}\r\n\t};\r\n\tcordova.sino.LivenessDetection(callback, data);\r\n}\r\n\r\n\r\n\r\n//拍照，图片采集\r\nvar appntCameraFlag = true;\r\nvar appntCamera = function() {// 投保人拍照\r\n\tif(appVersion!='IOS'){\r\n\t\tif(!appntCameraFlag){\r\n\t\t\treturn;\r\n\t\t}  \r\n\t\tappntCameraFlag = false;\r\n\t}\r\n\tvar data = {\r\n\t\twidth : '960',\r\n\t\theight : '720',\r\n\t\tmono : 'false',//true为黑白 false为彩色\r\n\t\tquality : '50',\r\n\t\topenFromGallery : 'false',//true为相册 false为拍照\r\n\t\tbusinessType : '1'\r\n\t};\r\n\tvar callback = function(result) {\r\n\t\tappntCameraFlag = true;\r\n\t\tif(!result.data.exit){\r\n\t\t\tvar data = result.data;\r\n\t\t\t$(\"#appntCamera\").attr(\"src\",\r\n\t\t\t\t\t\t\t\"data:image/png;base64,\" + data.signImg);\r\n\t\t\tfacePhoto = data.signImg;\r\n\t\t\tvar photoName = [\"data:image/png;base64,\"+ data.signImg];\r\n\t\t\tvar photoTypes = [\"999900\"];\r\n\t\t\tvar photoNos = [\"10\"];\r\n\t\t\tvar phoneCard = refPhoneCard;\r\n\t\t\tvar photoData={fileName:photoName,PicTypes:photoTypes,CHEQUENO:phoneCard};\r\n\t\t\tClients.postClientAjax(url.zx_signMultifileUploadPhoto,photoData,getsignMultifileUploadPhotoData);\r\n\t\t}\r\n\t}\r\n\tcordova.sino.takePhoto(callback, data);\r\n};\r\n//拍照存数据的回调\r\nfunction getsignMultifileUploadPhotoData(result){\r\n\tif(result.message ==\"成功\"){\r\n\t\tisFaceVerify = true;\r\n\t\talert(result.message);\r\n\t}else{\r\n\t\talert(result.message);\r\n\t}\r\n\r\n}\r\n// 电子签名\r\nvar signAppntFlag = true;\r\nvar appntPen=function() {\r\n\tif(appVersion!='IOS'){\r\n\t\tif(!signAppntFlag){\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\tsignAppntFlag = false;\r\n\tvar data = {\r\n\t\ttitle : '请签名',\r\n\t\ttitleSpanFromOffset : '4',\r\n\t\ttitleSpanToOffset : '5',\r\n\t\tsingleWidth : '150',\r\n\t\tsingleHeight : '75',\r\n\t\tbusinessType : '1',\r\n\t\tIdentitycardnbr : refPhoneCard,\r\n\t\tusername : applicationName,\r\n\t\tnessesary : 'false',\r\n\t\ttemplate_serial : refPhoneCard, //标识号\r\n\t\tserverConfigRule : '1135',//关键字 即是签名的位置,是固定编码\r\n\r\n\t};\r\n\tvar callback = function(result) {\r\n\t\tsignAppntFlag = true;\r\n\t\tif(!result.data.exit){\r\n\t\t\tvar data = result.data;\r\n\t\t\tAppntSignatureData = data.signatureData;//投保人签名加密数据\r\n\t\t\t\t$(\"#Signname\").attr(\"src\", \"data:image/png;base64,\" + data.signImg);\r\n\t\t\t\tsignPhoto = data.signImg;\r\n\t\t\t\t// $(\"#AppntSignBase64\").val(data.signImg);\r\n\t\t\t\t// 在这写你的请求\r\n\t\t\t\t// 可以补全方法 也可以调用方法\r\n\t\t\t\tvar data={CHEQUENO:refPhoneCard,base64Str:\"data:image/png;base64,\"+data.signImg,ESIGNBACKDSTR:AppntSignatureData};\r\n\t\t\t\tClients.postClientAjax(url.zx_signDigitalSignature,data,getsignDigitalSignaturData);\t\r\n\t\t}\r\n\t\tif(result.data.cancel){//取消签名放回原有图片\r\n\t\t\t$(\"#Signname\").attr(\"src\", \"resources/imgs/sign.jpg\");\r\n\t\t}\r\n\t}\r\n\tif(!signAppntFlag){\r\n\t\tcordova.sino.digitalSignature(callback, data);\r\n\t}\r\n};\r\n\r\n\r\n// 人脸认识测试方法\r\nvar ajaxceshi = function(AppntverificationData){\r\n\talert(\"进入方法1\");\r\n\t$.ajax({\r\n\t\t// url:\"http://openapi.situdata.com/face/pair-package-photo\",\r\n\t\turl:\"http://openapi.situdata.com/face/pair-package-photo\", \r\n\t\ttype:'post',\r\n\t\tdata:{\r\n\t\t\t\"queryImagePackage\": AppntverificationData,\r\n\t\t\t\"databaseImageContent\":\"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\",\r\n\t\t\t\"databaseImageType\" :\"1\"\r\n\t\t},\r\n\t\tsuccess:function(resJson){\r\n\t\t\talert(JSON.stringify(resJson));\r\n\t\t},\r\n\t\tbeforeSend: function(xhr) {\r\n\t        xhr.setRequestHeader(\"Content-Type\", \"application/json\");\r\n\t        xhr.setRequestHeader(\"X-Auth-Token\", \"895cab5fe05e42769ec00dff2cd80527\");\r\n\t    }\r\n\t})\r\n}\r\n\r\n//保存人脸识别数据\r\nvar appntOcrSave = function(AppntverificationData){\r\n\tsino.globalLoading.show();\r\n\tvar paramMap = {\r\n\t\t\t\"imagePackage\":AppntverificationData,//大礼包\r\n\t\t\t\"citizenId\":refPhoneCard,//身份证号\r\n\t\t\t\"appVersionPlat\":appVersion,//手机版本 ios 安卓\r\n\t\t\t\"customerName\":applicationName,//人脸识别姓名\r\n\t\t\t\"idType\":\"1\",//人脸识别证件类型\r\n\t\t}\r\n\t//发出请求思图后台(url,参数,backback)\r\n\tClients.postClientAjax(url.zx_signFaceVerify,paramMap,getSignFaceVerifyData);\t\r\n}\r\n\r\n//人脸识别请求思图接口回调函数\r\nfunction getSignFaceVerifyData(result){\r\n\t//result.data.verifyStatus==\"0\"即调思图接口成功\r\n\tif(result.data.verifyStatus==\"0\"){\r\n\t\t$(\"#appntCamera\").attr(\"src\",\r\n\t\t\t\t\t\t\t\"data:image/png;base64,\" + result.data.resultImage);\r\n\t\tfacePhoto = result.data.resultImage;\r\n\t\tisFaceVerify = true;\r\n\t\tmui.alert(\"人脸识别成功\");\r\n\t\tsino.globalLoading.hide();\r\n\t}else{\r\n\t\t$(\"#appntCamera\").attr(\"src\",\r\n\t\t\t\t\t\t\t\"resources/imgs/camera-red.jpg\");\r\n\t\t\r\n\t\tmui.alert(result.message);\r\n\t\tsino.globalLoading.hide();\r\n\t}\t\r\n}\r\n\r\n//代理合同回调函数\r\nfunction getSignContractInitData(result){\r\n\t// 请求自己后台获取的数据，result.data为pdf文件的url地址\r\n\t\r\n\tif(result.success){\r\n\t\t// alert(JSON.stringify(result.data));\r\n\t\tvar pdfUrl=result.data;\r\n\t\t//window.open(\"前端服务器地址/pdf/web/viewer.html?file=后台服务器地址的pdf\")\r\n\t\t // window.open(\"http://192.168.43.209:8000/openPdf/web/viewer.html?file=result.data\");\r\n\t\t // window.open(\"https://test2.citicpruagents.com.cn/autoemploy/pdf/435335465346464546_1.jpg\",'_blank');\r\n\r\n\t\t \r\n\t\t // window.open(\"https://test2.citicpruagents.com.cn/autoemploy/openPdf/web/viewer.html?file=\"+pdfUrl,'_blank');\r\n\t\t sessionStorage.setItem(\"contractUrl\",pdfUrl);\r\n\t\t location.hash=\"#zx_agencyContract\"\r\n\t}else{\r\n\t\tmui.alert(\"文件不存在\");\r\n\t}\r\n}\r\n\r\n//安卓电子签名请求后台回调\r\nfunction getsignDigitalSignaturData(result){\r\n\tif(result.success){\r\n\t\talert(\"签名成功\");\r\n\t\tisSign = true;\r\n\t}else{\r\n\t\talert(\"签名失败\");\r\n\t\tisSign = false;\r\n\r\n\t}\t\r\n}\r\n\r\n\r\n// 图片回显回调\r\nfunction getReturnPhotoData(result){\r\n\tif(result.success){\r\n\t\t// var url0 = result.list[0];\r\n\t\t// var url1 = result.list[1];\r\n\t\t// if(url0){\r\n\t\t// \t$(\"#appntCamera\").attr('src',url0);\r\n\t\t// \t$(\"#appntCamera\").attr(\"disabled\",true);\r\n\t\t// \t$(\".countBtn\").css(\"display\",\"none\");\r\n\t\t// }\r\n\t\t// if(url1){\r\n\t\t// \t$('#Signname').attr('src',url1);\r\n\t\t// \t$(\"#Signname\").attr(\"disabled\",true);\r\n\t\t// \t$(\".countBtn\").css(\"display\",\"none\");\r\n\t\t// }\r\n\r\n\t\t// 置灰\r\n\r\n\t\t\tvar allPicTypes = result.data.allPicTypes;\r\n\t\t\tfor(var i=0;i<allPicTypes.length;i++){\r\n                   if(result.data.allPicTypes[i]==\"999900\"){\r\n               \t\t\t$(\"#appntCamera\").attr('src',result.data.allPicPaths[i]);\t\t\t\t\t\t\r\n\t\t\t\t\t\tisFaceVerify = true;\r\n                   }else if(result.data.allPicTypes[i]==\"999800\"){\r\n               \t\t\t$('#Signname').attr('src',result.data.allPicPaths[i]);\t\t\t\t\t\t\r\n\t\t\t\t\t\tisSign = true;\r\n                   }\r\n                   if(isFaceVerify && isSign && isBankPhone){\r\n\t\t\t\t    \tischeck = true;\r\n\t\t\t\t    \t// $(\".countBtn\").css(\"display\",\"none\");\r\n\t\t\t\t    \t$(\"#appntCamera\").unbind(\"click\");\r\n\t\t\t\t    \t$(\"#Signname\").unbind(\"click\");\r\n                   }\r\n                   \r\n\t\t\t}\r\n\t\t\t\r\n\r\n\r\n\t\t\t\r\n\t\t\t\t\r\n\t}\t\r\n}\r\n//提交申请的回调\r\nfunction getApprInfoData(result){\r\n\tif(result.success){\r\n\t\tsessionStorage.setItem(\"stutas\", \"AI\"); //返回审批中\r\n\t\tlocation.hash = \"#zx_approval\";\r\n\t}else{\r\n\t\talert(result.success);\r\n\t}\r\n\t\r\n}\r\n"],"sourceRoot":"/source/"}