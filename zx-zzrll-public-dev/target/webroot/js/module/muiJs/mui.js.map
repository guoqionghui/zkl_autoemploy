{"version":3,"sources":["js/module/muiJs/mui.js"],"names":["mui","document","undefined","readyRE","idSelectorRE","classSelectorRE","tagSelectorRE","translateRE","translateMatrixRE","$","selector","context","wrap","isArrayLike","slice","call","ready","trim","test","found","getElementById","RegExp","$1","qsa","e","dom","Object","setPrototypeOf","fn","uuid","data","extend","options","name","src","copy","copyIsArray","clone","target","arguments","i","length","deep","isFunction","this","isPlainObject","isArray","noop","filter","type","obj","String","class2type","toString","Array","object","isWindow","window","isObject","getPrototypeOf","prototype","isEmptyObject","o","p","value","getElementsByClassName","getElementsByTagName","querySelectorAll","callback","readyState","addEventListener","buffer","ms","run","timer","cancel","lastStart","now","apply","lastEnd","later","stop","each","elements","hasOwnProperty","every","el","idx","key","focus","element","os","ios","setTimeout","trigger","eventType","eventData","dispatchEvent","CustomEvent","detail","bubbles","cancelable","getStyles","property","styles","ownerDocument","defaultView","getComputedStyle","getPropertyValue","parseTranslate","translateString","position","result","match","split","x","parseFloat","y","z","parseTranslateMatrix","matrix","is3D","push","hooks","addAction","hook","index","sort","a","b","doAction","handle","when","f","r","m","d","id","clearTimeout","Date","toLowerCase","JSON","parseJSON","parse","define","amd","detect","ua","funcs","wechat","version","replace","android","isBadAndroid","navigator","appVersion","iphone","ipad","func","userAgent","plus","body","classList","add","stream","isTouchable","EVENT_START","EVENT_MOVE","EVENT_END","EVENT_CANCEL","EVENT_CLICK","_mid","delegates","eventMethods","preventDefault","stopImmediatePropagation","stopPropagation","returnTrue","returnFalse","compatible","event","currentTarget","predicate","sourceMethod","mid","delegateFns","delegateFn","callbackObjs","handlerQueue","selectorAlls","indexOf","disabled","contains","parentNode","matches","callbacks","handlers","handler","tagName","gesture","isPropagationStopped","findDelegateFn","delegateCallbacks","filterFn","preventDefaultException","on","isAddEventListener","delegateEvents","delegateCallbackObjs","delegateFnArray","delegateCallback","href","off","splice","forEach","removeEventListener","bind","targets","targetHandles","registerTarget","founds","isFound","targetHandle","isReset","isContinue","proto","params","evt","createEvent","initEvent","Event","Function","to","partial","bound","args","concat","documentElement","defineProperty","HTMLElement","get","update","classes","self","className","join","ret","remove","toggle","item","requestAnimationFrame","lastTime","webkitRequestAnimationFrame","currTime","getTime","timeToCall","Math","max","cancelAnimationFrame","webkitCancelAnimationFrame","webkitCancelRequestAnimationFrame","FastClick","querySelector","targetElement","click","clickEvent","touch","activeElement","blur","changedTouches","initMouseEvent","screenX","screenY","clientX","clientY","forwardedTouchEvent","propagationStopped","CLASS_FOCUSIN","CLASS_BAR_TAB","CLASS_BAR_FOOTER","CLASS_BAR_FOOTER_SECONDARY","CLASS_BAR_FOOTER_SECONDARY_TAB","webview","currentWebview","children","readOnly","isFooter","scrollTop","scrollHeight","scrollLeft","scrollTo","namespace","classNamePrefix","classSelectorPrefix","classSelector","eventName","module","gestures","session","addGesture","round","abs","sqrt","atan2","atan","getDistance","p1","p2","props","getScale","starts","moves","getAngle","PI","getDirection","getRotation","start","end","getVelocity","deltaTime","stoped","gestureConfig","hasParent","node","parent","uniqueArray","results","values","val","getMultiCenter","touches","touchesLength","pageX","pageY","multiTouch","pinch","copySimpleTouchData","timestamp","center","deltaX","deltaY","calDelta","offset","offsetDelta","prevDelta","prevTouch","calTouchData","firstTouch","firstMultiTouch","offsetCenter","angle","distance","offsetDirection","scale","rotation","calIntervalTouchData","CAL_INTERVAL","velocity","velocityX","velocityY","direction","last","lastInterval","v","targetIds","convertTouches","getTouches","allTouches","targetTouches","changedTargetTouches","sessionTarget","identifier","changedTouchesLength","isFirst","isFinal","handleTouchEvent","popover","offcanvas","modal","isScrolling","scrollingTimeout","flickStartTime","flickStart","flick","flickMaxTime","flickMinDistince","flickTime","flickDistanceX","flickDistanceY","swipe","swipeMaxTime","swipeMinDistince","lockDirection","startDirection","drag","fingers","lastTarget","lastTapTime","tapMaxDistance","tapMaxTime","doubletap","tapMaxInterval","holdTimeout","holdThreshold","hold","lastScale","scaleDiff","minRotationAngle","handleScroll","wrapper","iframe","location","localStorage","getItem","onload","setInterval","_scrollTop","scrollY","setItem","global","tap","longtap","initGlobal","inits","isInitialized","init","isInit","repeat","addInit","subpages","createIframe","createElement","top","bottom","style","url","appendChild","osObj","defaultOptions","swipeBack","preloadPages","preloadLimit","keyEventBind","backbutton","menubutton","defaultShow","autoShow","duration","aniShow","show","isHomePage","waitingOptions","title","showOptions","windowOptions","scalable","bounce","plusReady","fire","stringify","evalJS","receive","triggerPreload","preloaded","list","timeChecked","openWindow","nShow","nWaiting","webviewCache","webviews","getWebviewById","afterShowMethodName","createNew","Error","waitingConfig","waiting","nativeUI","showWaiting","createWindow","showWebview","close","showed","isCreate","preload","getURL","create","extras","subpage","subpageId","subWebview","append","preloads","first","shift","closeAll","closeOpened","opened","len","openedWebview","open_open","createWindows","option","appendWebview","runtime","appid","statusBarBackground","setStatusBarBackground","display","supportStatusbarOffset","addBack","back","history","beforeback","action","_popover","offCanvas","previewImage","getPreviewImage","isShown","closePopup","__back__first","wobj","canBack","quit","toast","hide","menu","__back","__menu","pullRefreshOptions","pullRefresh","hasPulldown","down","hasPullup","up","container","$container","upOptions","webviewId","downOptions","jsonType","htmlType","rscript","scriptTypeRE","xmlTypeRE","blankRE","ajaxSettings","beforeSend","success","error","complete","xhr","protocol","XMLHttpRequest","accepts","script","json","xml","html","text","timeout","processData","cache","ajaxBeforeSend","settings","ajaxSuccess","ajaxComplete","ajaxError","status","serialize","traditional","scope","array","hash","serializeData","param","toUpperCase","appendQuery","query","mimeToDataType","mime","parseArguments","dataType","ajax","abortTimeout","headers","setHeader","nativeSetHeader","setRequestHeader","mimeType","overrideMimeType","contentType","onreadystatechange","isLocal","responseText","getResponseHeader","eval","responseXML","statusText","abort","xhrFields","async","open","username","password","send","k","encodeURIComponent","post","getJSON","load","parts","response","div","innerHTML","selectorDiv","childs","originAnchor","crossDomain","net","urlAnchor","host","box","left","getBoundingClientRect","pageYOffset","clientTop","pageXOffset","clientLeft","scroll","distaince","animationFrame","cb","isQueued","initializing","fnTest","xyz","Class","prop","_super","tmp","constructor","callee","CLASS_PULL_TOP_POCKET","CLASS_PULL_BOTTOM_POCKET","CLASS_PULL","CLASS_PULL_LOADING","CLASS_PULL_CAPTION","CLASS_PULL_CAPTION_DOWN","CLASS_PULL_CAPTION_REFRESH","CLASS_PULL_CAPTION_NOMORE","CLASS_ICON","CLASS_SPINNER","CLASS_ICON_PULLDOWN","CLASS_BLOCK","CLASS_HIDDEN","CLASS_VISIBILITY","CLASS_LOADING_UP","CLASS_LOADING_DOWN","CLASS_LOADING","pocketHtml","PullRefresh","scrollX","indicators","deceleration","height","contentinit","contentdown","contentover","contentrefresh","auto","contentnomore","_init","_initPocket","_initPulldownRefresh","pulldown","pullPocket","topPocket","pullCaption","topCaption","pullLoading","topLoading","_initPullupRefresh","bottomPocket","bottomCaption","bottomLoading","scroller","_createPocket","insertBefore","firstChild","clazz","iconClass","pocket","_resetPullDownLoading","loading","webkitTransition","webkitTransform","webkitAnimation","_setCaptionClass","isPulldown","caption","_setCaption","reset","lastTitle","CLASS_SCROLL","CLASS_SCROLLBAR","CLASS_INDICATOR","CLASS_SCROLLBAR_VERTICAL","CLASS_SCROLLBAR_HORIZONTAL","CLASS_ACTIVE","ease","quadratic","circular","outCirc","outCubic","Scroll","scrollerStyle","stopped","startX","startY","hardwareAccelerated","fixedBadAndorid","momentum","snapX","snap","bounceTime","bounceEasing","scrollTime","scrollEasing","directionLockThreshold","parallaxElement","parallaxRatio","translateZ","refresh","_initParallax","_initIndicators","_initEvent","parallaxStyle","parallaxHeight","offsetHeight","parallaxImgStyle","indicator","_createScrollBar","listenX","listenY","Indicator","_initSnap","currentPage","pages","snaps","n","leftX","rightX","offsetLeft","offsetWidth","_getSnapX","maxScrollX","min","wrapperWidth","_gotoPage","_nearestSnap","nearestX","detach","segmentedControl","_handleIndicatorScrollend","map","fade","_handleIndicatorScrollstart","_handleIndicatorRefresh","handleEvent","resetPosition","_start","_drag","_flick","_end","transitionTimer","_transitionEnd","_scrollend","_resize","moved","needReset","_transitionTime","isInTransition","pos","setTranslate","reLayout","_getDirectionByAngle","innerHeight","isPreventDefault","isReturn","absDeltaX","absDeltaY","hasHorizontalScroll","hasVerticalScroll","newX","newY","maxScrollY","_updateTranslate","_clearRequestAnimationFrame","time","easing","momentumX","_momentum","destination","momentumY","wrapperHeight","that","resizeTimeout","resizePolling","transitionTime","_transitionTimingFunction","transitionTimingFunction","_translate","lastX","lastY","scrollbar","scrollbarY","scrollbarIndicatorY","scrollbarX","scrollbarIndicatorX","_preventDefaultException","exceptions","_reLayout","scrollerWidth","scrollerHeight","items","itemLength","current","lowerMargin","wrapperSize","speed","_getTranslateStr","setStopped","parallaxY","updatePosition","paddingLeft","paddingRight","paddingTop","paddingBottom","clientWidth","clientHeight","_reInit","groups","scrollToBottom","gotoPage","destroy","getAttribute","setAttribute","wrapperStyle","indicatorStyle","speedRatioX","speedRatioY","sizeRatioX","sizeRatioY","maxPosX","maxPosY","opacity","indicatorWidth","width","minBoundaryX","maxBoundaryX","indicatorHeight","minBoundaryY","maxBoundaryY","visible","fadeTimeout","delay","scrollApis","scrollApi","_options","_scrollbottom","pullupLoading","pulldownLoading","endPulldownToRefresh","endPullupToRefresh","finished","disablePullupToRefresh","enablePullupToRefresh","pullRefreshApi","autoY","CLASS_SLIDER","CLASS_SLIDER_GROUP","CLASS_SLIDER_LOOP","CLASS_ACTION_PREVIOUS","CLASS_ACTION_NEXT","CLASS_SLIDER_ITEM","SELECTOR_SLIDER_ITEM","SELECTOR_SLIDER_PROGRESS_BAR","Slider","interval","slideTime","progressBar","progressBarWidth","progressBarStyle","_initTimer","_triggerSlide","slideNumber","_fixedSlideNumber","loop","lastSlideNumber","lastPage","_handleSlide","temps","_slideNumber","indicatorWrap","number","innerText","controlItems","_handleTabShow","gotoItem","tabNumber","_handleIndicatorTap","slidershowTimer","slider","nextItem","page","_getScroll","_getPage","isFlick","_gotoItem","prevItem","getSlideNumber","sliderElement","CLASS_PLUS_PULLREFRESH","PlusPullRefresh","_initPulldownRefreshEvent","scrollInterval","isScroll","setBounce","changeoffset","setStyle","_endPulldownToRefresh","endPullToRefresh","isLoading","attrWebviewId","CLASS_OFF_CANVAS_LEFT","CLASS_OFF_CANVAS_RIGHT","CLASS_ACTION_BACKDROP","CLASS_OFF_CANVAS_WRAP","CLASS_SLIDE_IN","CLASS_TRANSITIONING","SELECTOR_INNER_WRAP","OffCanvas","dragThresholdX","slideIn","offCanvasLefts","offCanvasRights","offCanvasLeft","offCanvasRight","offCanvasRightWidth","offCanvasLeftWidth","offCanvasLeftSlideIn","offCanvasRightSlideIn","backdrop","offsetX","lastTranslateX","_dispatchEvent","isDragging","offCanvasWidth","getTranslateX","_initOffCanvasVisible","updateTranslate","ratio","openPercentage","visibility","percentage","setTranslateX","leftShowing","rightShowing","zIndex","percent","zoomOutScale","zoomInScale","zoomInOpacity","webkitTransformOrigin","shown","directionOrOffCanvas","findOffCanvasContainer","_container","offCanvasApis","offCanvasApi","CLASS_ACTION","CLASS_MODAL","CLASS_POPOVER","CLASS_POPOVER_ARROW","CLASS_ACTION_POPOVER","CLASS_BACKDROP","CLASS_BAR_POPOVER","CLASS_BAR_BACKDROP","CLASS_BOTTOM","removeBackdropTimer","fixedPopoverScroll","isPopoverScroll","onPopoverShown","onPopoverHidden","removeBackdrop","removeChild","togglePopover","anchor","state","isActionSheet","calPosition","wWidth","innerWidth","wHeight","pWidth","pHeight","aWidth","aHeight","arrow","arrowSize","pTop","pLeft","diff","arrowLeft","defaultPadding","createMask","mask","_show","_remove","CLASS_CONTROL_ITEM","CLASS_SEGMENTED_CONTROL","CLASS_SEGMENTED_CONTROL_VERTICAL","CLASS_CONTROL_CONTENT","CLASS_TAB_BAR","CLASS_TAB_ITEM","targetTab","tab","activeTab","activeBodies","targetBody","isLastActive","activeBody","contents","_contents","CLASS_SWITCH","CLASS_SWITCH_HANDLE","CLASS_DRAGGING","CLASS_DISABLED","SELECTOR_SWITCH_HANDLE","Toggle","toggleWidth","handleWidth","handleX","swiperight","webkitTransitionDuration","lastChanged","initialState","isActive","animate","isChanged","switchApis","switchApi","toggleEvents","isRemove","method","cell","CLASS_SELECTED","CLASS_GRID_VIEW","CLASS_RADIO_VIEW","CLASS_TABLE_VIEW_CELL","CLASS_COLLAPSE_CONTENT","CLASS_TOGGLE","CLASS_BTN","CLASS_SLIDER_HANDLE","CLASS_SLIDER_LEFT","CLASS_SLIDER_RIGHT","SELECTOR_SLIDER_HANDLE","SELECTOR_SLIDER_LEFT","SELECTOR_SLIDER_RIGHT","SELECTOR_SELECTED","SELECTOR_BUTTON","overFactor","isMoved","isOpened","openedActions","progress","sliderHandle","sliderActionLeft","sliderActionRight","buttonsLeft","buttonsRight","sliderDirection","sliderRequestAnimationFrame","translateX","sliderActionLeftWidth","sliderActionRightWidth","toggleActive","pow","buttonRight","_buttonOffset","buttonOffset","buttonLeft","isDisabled","selected","swipeoutClose","link","dragend","swipeleft","translate","actionsWidth","isToggle","buttons","newTranslate","button","swipeoutOpen","swipeoutAction","swipeoutWidth","radioOrCheckboxClick","input","checked","isExpand","ul","collapse","alert","message","btnValue","confirm","btnArray","prompt","defaultText","verticalAlign","CLASS_POPUP","CLASS_POPUP_BACKDROP","CLASS_POPUP_IN","CLASS_POPUP_OUT","CLASS_POPUP_INNER","CLASS_POPUP_TITLE","CLASS_POPUP_TEXT","CLASS_POPUP_INPUT","CLASS_POPUP_BUTTONS","CLASS_POPUP_BUTTON","CLASS_POPUP_BUTTON_BOLD","popupStack","createInput","placeholder","createInner","extra","createButtons","btns","createPopup","popupElement","removePopupElement","popup","pop","createAlert","createConfirm","createPrompt","closePopups","CLASS_PROGRESSBAR","CLASS_PROGRESSBAR_IN","CLASS_PROGRESSBAR_OUT","CLASS_PROGRESSBAR_INFINITE","SELECTOR_PROGRESSBAR","_findProgressbar","progressbars","progressbar","showProgressbar","color","_progressbar","setProgressbar","hideProgressbar","span","progressbarApis","progressbarApi","mui_plugin_progressbar","setOptions","setProgress","CLASS_ICON_CLEAR","CLASS_ICON_SPEECH","CLASS_ICON_SEARCH","CLASS_ICON_PASSWORD","CLASS_INPUT_ROW","CLASS_PLACEHOLDER","CLASS_TOOLTIP","SELECTOR_ICON_CLOSE","SELECTOR_ICON_SPEECH","SELECTOR_ICON_PASSWORD","SELECTOR_PLACEHOLDER","SELECTOR_TOOLTIP","findRow","Input","actions","sliderActionClass","sliderActionSelector","clearActionClass","clearActionSelector","speechActionClass","speechActionSelector","searchActionClass","searchActionSelector","passwordActionClass","passwordActionSelector","initAction","initElementEvent","row","sliderAction","createAction","searchAction","speechAction","speechActionClick","clearAction","clearActionClick","passwordAction","passwordActionClick","actionClass","actionSelector","nextSibling","tooltip","showTip","tooltipWidth","distince","scaleWidth","setPlaceholder","oldValue","speech","startRecognize","engine","s","stopRecognize","inputApis","inputApi","rgbaRegex","getColor","colorStr","Transparent","_style","_bgColor","backgroundColor","_R","_G","_B","_A","_bufferFn","destory","mui_plugin_transparent","transparent","transparentApis","transparentApi","touchSupport","tapEventName","changeEventName","holderClassName","plusClassSelector","minusClassSelector","inputClassSelector","Numbox","holder","step","parseInt","minus","checkValue","getValue","isNaN","setOption","numbox","optionsText"],"mappings":"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","file":"js/module/muiJs/mui.js","sourcesContent":["/*!\n * =====================================================\n * Mui v3.2.0 (http://dev.dcloud.net.cn/mui)\n * =====================================================\n */\n/**\n * MUI核心JS\n * @type _L4.$|Function\n */\nvar mui = (function(document, undefined) {\n\tvar readyRE = /complete|loaded|interactive/;\n\tvar idSelectorRE = /^#([\\w-]+)$/;\n\tvar classSelectorRE = /^\\.([\\w-]+)$/;\n\tvar tagSelectorRE = /^[\\w-]+$/;\n\tvar translateRE = /translate(?:3d)?\\((.+?)\\)/;\n\tvar translateMatrixRE = /matrix(3d)?\\((.+?)\\)/;\n\n\tvar $ = function(selector, context) {\n\t\tcontext = context || document;\n\t\tif (!selector)\n\t\t\treturn wrap();\n\t\tif (typeof selector === 'object')\n\t\t\tif ($.isArrayLike(selector)) {\n\t\t\t\treturn wrap($.slice.call(selector), null);\n\t\t\t} else {\n\t\t\t\treturn wrap([selector], null);\n\t\t\t}\n\t\tif (typeof selector === 'function')\n\t\t\treturn $.ready(selector);\n\t\tif (typeof selector === 'string') {\n\t\t\ttry {\n\t\t\t\tselector = selector.trim();\n\t\t\t\tif (idSelectorRE.test(selector)) {\n\t\t\t\t\tvar found = document.getElementById(RegExp.$1);\n\t\t\t\t\treturn wrap(found ? [found] : []);\n\t\t\t\t}\n\t\t\t\treturn wrap($.qsa(selector, context), selector);\n\t\t\t} catch (e) {}\n\t\t}\n\t\treturn wrap();\n\t};\n\n\tvar wrap = function(dom, selector) {\n\t\tdom = dom || [];\n\t\tObject.setPrototypeOf(dom, $.fn);\n\t\tdom.selector = selector || '';\n\t\treturn dom;\n\t};\n\n\t$.uuid = 0;\n\n\t$.data = {};\n\t/**\n\t * extend(simple)\n\t * @param {type} target\n\t * @param {type} source\n\t * @param {type} deep\n\t * @returns {unresolved}\n\t */\n\t$.extend = function() { //from jquery2\n\t\tvar options, name, src, copy, copyIsArray, clone,\n\t\t\ttarget = arguments[0] || {},\n\t\t\ti = 1,\n\t\t\tlength = arguments.length,\n\t\t\tdeep = false;\n\n\t\tif (typeof target === \"boolean\") {\n\t\t\tdeep = target;\n\n\t\t\ttarget = arguments[i] || {};\n\t\t\ti++;\n\t\t}\n\n\t\tif (typeof target !== \"object\" && !$.isFunction(target)) {\n\t\t\ttarget = {};\n\t\t}\n\n\t\tif (i === length) {\n\t\t\ttarget = this;\n\t\t\ti--;\n\t\t}\n\n\t\tfor (; i < length; i++) {\n\t\t\tif ((options = arguments[i]) != null) {\n\t\t\t\tfor (name in options) {\n\t\t\t\t\tsrc = target[name];\n\t\t\t\t\tcopy = options[name];\n\n\t\t\t\t\tif (target === copy) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (deep && copy && ($.isPlainObject(copy) || (copyIsArray = $.isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && $.isArray(src) ? src : [];\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && $.isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttarget[name] = $.extend(deep, clone, copy);\n\n\t\t\t\t\t} else if (copy !== undefined) {\n\t\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn target;\n\t};\n\t/**\n\t * mui noop(function)\n\t */\n\t$.noop = function() {};\n\t/**\n\t * mui slice(array)\n\t */\n\t$.slice = [].slice;\n\t/**\n\t * mui filter(array)\n\t */\n\t$.filter = [].filter;\n\n\t$.type = function(obj) {\n\t\treturn obj == null ? String(obj) : class2type[{}.toString.call(obj)] || \"object\";\n\t};\n\t/**\n\t * mui isArray\n\t */\n\t$.isArray = Array.isArray ||\n\t\tfunction(object) {\n\t\t\treturn object instanceof Array;\n\t\t};\n\t/**\n\t * mui isArrayLike \n\t * @param {Object} obj\n\t */\n\t$.isArrayLike = function(obj) {\n\t\tvar length = !!obj && \"length\" in obj && obj.length;\n\t\tvar type = $.type(obj);\n\t\tif (type === \"function\" || $.isWindow(obj)) {\n\t\t\treturn false;\n\t\t}\n\t\treturn type === \"array\" || length === 0 ||\n\t\t\ttypeof length === \"number\" && length > 0 && (length - 1) in obj;\n\t};\n\t/**\n\t * mui isWindow(需考虑obj为undefined的情况)\n\t */\n\t$.isWindow = function(obj) {\n\t\treturn obj != null && obj === obj.window;\n\t};\n\t/**\n\t * mui isObject\n\t */\n\t$.isObject = function(obj) {\n\t\treturn $.type(obj) === \"object\";\n\t};\n\t/**\n\t * mui isPlainObject\n\t */\n\t$.isPlainObject = function(obj) {\n\t\treturn $.isObject(obj) && !$.isWindow(obj) && Object.getPrototypeOf(obj) === Object.prototype;\n\t};\n\t/**\n\t * mui isEmptyObject\n\t * @param {Object} o\n\t */\n\t$.isEmptyObject = function(o) {\n\t\tfor (var p in o) {\n\t\t\tif (p !== undefined) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t};\n\t/**\n\t * mui isFunction\n\t */\n\t$.isFunction = function(value) {\n\t\treturn $.type(value) === \"function\";\n\t};\n\t/**\n\t * mui querySelectorAll\n\t * @param {type} selector\n\t * @param {type} context\n\t * @returns {Array}\n\t */\n\t$.qsa = function(selector, context) {\n\t\tcontext = context || document;\n\t\treturn $.slice.call(classSelectorRE.test(selector) ? context.getElementsByClassName(RegExp.$1) : tagSelectorRE.test(selector) ? context.getElementsByTagName(selector) : context.querySelectorAll(selector));\n\t};\n\t/**\n\t * ready(DOMContentLoaded)\n\t * @param {type} callback\n\t * @returns {_L6.$}\n\t */\n\t$.ready = function(callback) {\n\t\tif (readyRE.test(document.readyState)) {\n\t\t\tcallback($);\n\t\t} else {\n\t\t\tdocument.addEventListener('DOMContentLoaded', function() {\n\t\t\t\tcallback($);\n\t\t\t}, false);\n\t\t}\n\t\treturn this;\n\t};\n\t/**\n\t * 将 fn 缓存一段时间后, 再被调用执行\n\t * 此方法为了避免在 ms 段时间内, 执行 fn 多次. 常用于 resize , scroll , mousemove 等连续性事件中;\n\t * 当 ms 设置为 -1, 表示立即执行 fn, 即和直接调用 fn 一样;\n\t * 调用返回函数的 stop 停止最后一次的 buffer 效果\n\t * @param {Object} fn\n\t * @param {Object} ms\n\t * @param {Object} context\n\t */\n\t$.buffer = function(fn, ms, context) {\n\t\tvar timer;\n\t\tvar lastStart = 0;\n\t\tvar lastEnd = 0;\n\t\tvar ms = ms || 150;\n\n\t\tfunction run() {\n\t\t\tif (timer) {\n\t\t\t\ttimer.cancel();\n\t\t\t\ttimer = 0;\n\t\t\t}\n\t\t\tlastStart = $.now();\n\t\t\tfn.apply(context || this, arguments);\n\t\t\tlastEnd = $.now();\n\t\t}\n\n\t\treturn $.extend(function() {\n\t\t\tif (\n\t\t\t\t(!lastStart) || // 从未运行过\n\t\t\t\t(lastEnd >= lastStart && $.now() - lastEnd > ms) || // 上次运行成功后已经超过ms毫秒\n\t\t\t\t(lastEnd < lastStart && $.now() - lastStart > ms * 8) // 上次运行或未完成，后8*ms毫秒\n\t\t\t) {\n\t\t\t\trun();\n\t\t\t} else {\n\t\t\t\tif (timer) {\n\t\t\t\t\ttimer.cancel();\n\t\t\t\t}\n\t\t\t\ttimer = $.later(run, ms, null, arguments);\n\t\t\t}\n\t\t}, {\n\t\t\tstop: function() {\n\t\t\t\tif (timer) {\n\t\t\t\t\ttimer.cancel();\n\t\t\t\t\ttimer = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\t/**\n\t * each\n\t * @param {type} elements\n\t * @param {type} callback\n\t * @returns {_L8.$}\n\t */\n\t$.each = function(elements, callback, hasOwnProperty) {\n\t\tif (!elements) {\n\t\t\treturn this;\n\t\t}\n\t\tif (typeof elements.length === 'number') {\n\t\t\t[].every.call(elements, function(el, idx) {\n\t\t\t\treturn callback.call(el, idx, el) !== false;\n\t\t\t});\n\t\t} else {\n\t\t\tfor (var key in elements) {\n\t\t\t\tif (hasOwnProperty) {\n\t\t\t\t\tif (elements.hasOwnProperty(key)) {\n\t\t\t\t\t\tif (callback.call(elements[key], key, elements[key]) === false) return elements;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (callback.call(elements[key], key, elements[key]) === false) return elements;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t};\n\t$.focus = function(element) {\n\t\tif ($.os.ios) {\n\t\t\tsetTimeout(function() {\n\t\t\t\telement.focus();\n\t\t\t}, 10);\n\t\t} else {\n\t\t\telement.focus();\n\t\t}\n\t};\n\t/**\n\t * trigger event\n\t * @param {type} element\n\t * @param {type} eventType\n\t * @param {type} eventData\n\t * @returns {_L8.$}\n\t */\n\t$.trigger = function(element, eventType, eventData) {\n\t\telement.dispatchEvent(new CustomEvent(eventType, {\n\t\t\tdetail: eventData,\n\t\t\tbubbles: true,\n\t\t\tcancelable: true\n\t\t}));\n\t\treturn this;\n\t};\n\t/**\n\t * getStyles\n\t * @param {type} element\n\t * @param {type} property\n\t * @returns {styles}\n\t */\n\t$.getStyles = function(element, property) {\n\t\tvar styles = element.ownerDocument.defaultView.getComputedStyle(element, null);\n\t\tif (property) {\n\t\t\treturn styles.getPropertyValue(property) || styles[property];\n\t\t}\n\t\treturn styles;\n\t};\n\t/**\n\t * parseTranslate\n\t * @param {type} translateString\n\t * @param {type} position\n\t * @returns {Object}\n\t */\n\t$.parseTranslate = function(translateString, position) {\n\t\tvar result = translateString.match(translateRE || '');\n\t\tif (!result || !result[1]) {\n\t\t\tresult = ['', '0,0,0'];\n\t\t}\n\t\tresult = result[1].split(\",\");\n\t\tresult = {\n\t\t\tx: parseFloat(result[0]),\n\t\t\ty: parseFloat(result[1]),\n\t\t\tz: parseFloat(result[2])\n\t\t};\n\t\tif (position && result.hasOwnProperty(position)) {\n\t\t\treturn result[position];\n\t\t}\n\t\treturn result;\n\t};\n\t/**\n\t * parseTranslateMatrix\n\t * @param {type} translateString\n\t * @param {type} position\n\t * @returns {Object}\n\t */\n\t$.parseTranslateMatrix = function(translateString, position) {\n\t\tvar matrix = translateString.match(translateMatrixRE);\n\t\tvar is3D = matrix && matrix[1];\n\t\tif (matrix) {\n\t\t\tmatrix = matrix[2].split(\",\");\n\t\t\tif (is3D === \"3d\")\n\t\t\t\tmatrix = matrix.slice(12, 15);\n\t\t\telse {\n\t\t\t\tmatrix.push(0);\n\t\t\t\tmatrix = matrix.slice(4, 7);\n\t\t\t}\n\t\t} else {\n\t\t\tmatrix = [0, 0, 0];\n\t\t}\n\t\tvar result = {\n\t\t\tx: parseFloat(matrix[0]),\n\t\t\ty: parseFloat(matrix[1]),\n\t\t\tz: parseFloat(matrix[2])\n\t\t};\n\t\tif (position && result.hasOwnProperty(position)) {\n\t\t\treturn result[position];\n\t\t}\n\t\treturn result;\n\t};\n\t$.hooks = {};\n\t$.addAction = function(type, hook) {\n\t\tvar hooks = $.hooks[type];\n\t\tif (!hooks) {\n\t\t\thooks = [];\n\t\t}\n\t\thook.index = hook.index || 1000;\n\t\thooks.push(hook);\n\t\thooks.sort(function(a, b) {\n\t\t\treturn a.index - b.index;\n\t\t});\n\t\t$.hooks[type] = hooks;\n\t\treturn $.hooks[type];\n\t};\n\t$.doAction = function(type, callback) {\n\t\tif ($.isFunction(callback)) { //指定了callback\n\t\t\t$.each($.hooks[type], callback);\n\t\t} else { //未指定callback，直接执行\n\t\t\t$.each($.hooks[type], function(index, hook) {\n\t\t\t\treturn !hook.handle();\n\t\t\t});\n\t\t}\n\t};\n\t/**\n\t * setTimeout封装\n\t * @param {Object} fn\n\t * @param {Object} when\n\t * @param {Object} context\n\t * @param {Object} data\n\t */\n\t$.later = function(fn, when, context, data) {\n\t\twhen = when || 0;\n\t\tvar m = fn;\n\t\tvar d = data;\n\t\tvar f;\n\t\tvar r;\n\n\t\tif (typeof fn === 'string') {\n\t\t\tm = context[fn];\n\t\t}\n\n\t\tf = function() {\n\t\t\tm.apply(context, $.isArray(d) ? d : [d]);\n\t\t};\n\n\t\tr = setTimeout(f, when);\n\n\t\treturn {\n\t\t\tid: r,\n\t\t\tcancel: function() {\n\t\t\t\tclearTimeout(r);\n\t\t\t}\n\t\t};\n\t};\n\t$.now = Date.now || function() {\n\t\treturn +new Date();\n\t};\n\tvar class2type = {};\n\t$.each(['Boolean', 'Number', 'String', 'Function', 'Array', 'Date', 'RegExp', 'Object', 'Error'], function(i, name) {\n\t\tclass2type[\"[object \" + name + \"]\"] = name.toLowerCase();\n\t});\n\tif (window.JSON) {\n\t\t$.parseJSON = JSON.parse;\n\t}\n\t/**\n\t * $.fn\n\t */\n\t$.fn = {\n\t\teach: function(callback) {\n\t\t\t[].every.call(this, function(el, idx) {\n\t\t\t\treturn callback.call(el, idx, el) !== false;\n\t\t\t});\n\t\t\treturn this;\n\t\t}\n\t};\n\n\t/**\n\t * 兼容 AMD 模块\n\t **/\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine('mui', [], function() {\n\t\t\treturn $;\n\t\t});\n\t}\n\n\treturn $;\n})(document);\n//window.mui = mui;\n//'$' in window || (window.$ = mui);\n/**\n * $.os\n * @param {type} $\n * @returns {undefined}\n */\n(function($, window) {\n\tfunction detect(ua) {\n\t\tthis.os = {};\n\t\tvar funcs = [\n\n\t\t\tfunction() { //wechat\n\t\t\t\tvar wechat = ua.match(/(MicroMessenger)\\/([\\d\\.]+)/i);\n\t\t\t\tif (wechat) { //wechat\n\t\t\t\t\tthis.os.wechat = {\n\t\t\t\t\t\tversion: wechat[2].replace(/_/g, '.')\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tfunction() { //android\n\t\t\t\tvar android = ua.match(/(Android);?[\\s\\/]+([\\d.]+)?/);\n\t\t\t\tif (android) {\n\t\t\t\t\tthis.os.android = true;\n\t\t\t\t\tthis.os.version = android[2];\n\n\t\t\t\t\tthis.os.isBadAndroid = !(/Chrome\\/\\d/.test(window.navigator.appVersion));\n\t\t\t\t}\n\t\t\t\treturn this.os.android === true;\n\t\t\t},\n\t\t\tfunction() { //ios\n\t\t\t\tvar iphone = ua.match(/(iPhone\\sOS)\\s([\\d_]+)/);\n\t\t\t\tif (iphone) { //iphone\n\t\t\t\t\tthis.os.ios = this.os.iphone = true;\n\t\t\t\t\tthis.os.version = iphone[2].replace(/_/g, '.');\n\t\t\t\t} else {\n\t\t\t\t\tvar ipad = ua.match(/(iPad).*OS\\s([\\d_]+)/);\n\t\t\t\t\tif (ipad) { //ipad\n\t\t\t\t\t\tthis.os.ios = this.os.ipad = true;\n\t\t\t\t\t\tthis.os.version = ipad[2].replace(/_/g, '.');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this.os.ios === true;\n\t\t\t}\n\t\t];\n\t\t[].every.call(funcs, function(func) {\n\t\t\treturn !func.call($);\n\t\t});\n\t}\n\tdetect.call($, navigator.userAgent);\n})(mui, window);\n/**\n * $.os.plus\n * @param {type} $\n * @returns {undefined}\n */\n(function($, document) {\n\tfunction detect(ua) {\n\t\tthis.os = this.os || {};\n\t\tvar plus = ua.match(/Html5Plus/i); //TODO 5\\+Browser?\n\t\tif (plus) {\n\t\t\tthis.os.plus = true;\n\t\t\t$(function() {\n\t\t\t\tdocument.body.classList.add('mui-plus');\n\t\t\t});\n\t\t\tif (ua.match(/StreamApp/i)) { //TODO 最好有流应用自己的标识\n\t\t\t\tthis.os.stream = true;\n\t\t\t\t$(function() {\n\t\t\t\t\tdocument.body.classList.add('mui-plus-stream');\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\tdetect.call($, navigator.userAgent);\n})(mui, document);\n/**\n * 仅提供简单的on，off(仅支持事件委托，不支持当前元素绑定，当前元素绑定请直接使用addEventListener,removeEventListener)\n * @param {Object} $\n */\n(function($) {\n\tif ('ontouchstart' in window) {\n\t\t$.isTouchable = true;\n\t\t$.EVENT_START = 'touchstart';\n\t\t$.EVENT_MOVE = 'touchmove';\n\t\t$.EVENT_END = 'touchend';\n\t} else {\n\t\t$.isTouchable = false;\n\t\t$.EVENT_START = 'mousedown';\n\t\t$.EVENT_MOVE = 'mousemove';\n\t\t$.EVENT_END = 'mouseup';\n\t}\n\t$.EVENT_CANCEL = 'touchcancel';\n\t$.EVENT_CLICK = 'click';\n\n\tvar _mid = 1;\n\tvar delegates = {};\n\t//需要wrap的函数\n\tvar eventMethods = {\n\t\tpreventDefault: 'isDefaultPrevented',\n\t\tstopImmediatePropagation: 'isImmediatePropagationStopped',\n\t\tstopPropagation: 'isPropagationStopped'\n\t};\n\t//默认true返回函数\n\tvar returnTrue = function() {\n\t\treturn true\n\t};\n\t//默认false返回函数\n\tvar returnFalse = function() {\n\t\treturn false\n\t};\n\t//wrap浏览器事件\n\tvar compatible = function(event, target) {\n\t\tif (!event.detail) {\n\t\t\tevent.detail = {\n\t\t\t\tcurrentTarget: target\n\t\t\t};\n\t\t} else {\n\t\t\tevent.detail.currentTarget = target;\n\t\t}\n\t\t$.each(eventMethods, function(name, predicate) {\n\t\t\tvar sourceMethod = event[name];\n\t\t\tevent[name] = function() {\n\t\t\t\tthis[predicate] = returnTrue;\n\t\t\t\treturn sourceMethod && sourceMethod.apply(event, arguments)\n\t\t\t}\n\t\t\tevent[predicate] = returnFalse;\n\t\t}, true);\n\t\treturn event;\n\t};\n\t//简单的wrap对象_mid\n\tvar mid = function(obj) {\n\t\treturn obj && (obj._mid || (obj._mid = _mid++));\n\t};\n\t//事件委托对象绑定的事件回调列表\n\tvar delegateFns = {};\n\t//返回事件委托的wrap事件回调\n\tvar delegateFn = function(element, event, selector, callback) {\n\t\treturn function(e) {\n\t\t\t//same event\n\t\t\tvar callbackObjs = delegates[element._mid][event];\n\t\t\tvar handlerQueue = [];\n\t\t\tvar target = e.target;\n\t\t\tvar selectorAlls = {};\n\t\t\tfor (; target && target !== document; target = target.parentNode) {\n\t\t\t\tif (target === element) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (~['click', 'tap', 'doubletap', 'longtap', 'hold'].indexOf(event) && (target.disabled || target.classList.contains('mui-disabled'))) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tvar matches = {};\n\t\t\t\t$.each(callbackObjs, function(selector, callbacks) { //same selector\n\t\t\t\t\tselectorAlls[selector] || (selectorAlls[selector] = $.qsa(selector, element));\n\t\t\t\t\tif (selectorAlls[selector] && ~(selectorAlls[selector]).indexOf(target)) {\n\t\t\t\t\t\tif (!matches[selector]) {\n\t\t\t\t\t\t\tmatches[selector] = callbacks;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, true);\n\t\t\t\tif (!$.isEmptyObject(matches)) {\n\t\t\t\t\thandlerQueue.push({\n\t\t\t\t\t\telement: target,\n\t\t\t\t\t\thandlers: matches\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tselectorAlls = null;\n\t\t\te = compatible(e); //compatible event\n\t\t\t$.each(handlerQueue, function(index, handler) {\n\t\t\t\ttarget = handler.element;\n\t\t\t\tvar tagName = target.tagName;\n\t\t\t\tif (event === 'tap' && (tagName !== 'INPUT' && tagName !== 'TEXTAREA' && tagName !== 'SELECT')) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.detail && e.detail.gesture && e.detail.gesture.preventDefault();\n\t\t\t\t}\n\t\t\t\t$.each(handler.handlers, function(index, handler) {\n\t\t\t\t\t$.each(handler, function(index, callback) {\n\t\t\t\t\t\tif (callback.call(target, e) === false) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, true);\n\t\t\t\t}, true)\n\t\t\t\tif (e.isPropagationStopped()) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}, true);\n\t\t};\n\t};\n\tvar findDelegateFn = function(element, event) {\n\t\tvar delegateCallbacks = delegateFns[mid(element)];\n\t\tvar result = [];\n\t\tif (delegateCallbacks) {\n\t\t\tresult = [];\n\t\t\tif (event) {\n\t\t\t\tvar filterFn = function(fn) {\n\t\t\t\t\treturn fn.type === event;\n\t\t\t\t}\n\t\t\t\treturn delegateCallbacks.filter(filterFn);\n\t\t\t} else {\n\t\t\t\tresult = delegateCallbacks;\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t};\n\tvar preventDefaultException = /^(INPUT|TEXTAREA|BUTTON|SELECT)$/;\n\t/**\n\t * mui delegate events\n\t * @param {type} event\n\t * @param {type} selector\n\t * @param {type} callback\n\t * @returns {undefined}\n\t */\n\t$.fn.on = function(event, selector, callback) { //仅支持简单的事件委托,主要是tap事件使用，类似mouse,focus之类暂不封装支持\n\t\treturn this.each(function() {\n\t\t\tvar element = this;\n\t\t\tmid(element);\n\t\t\tmid(callback);\n\t\t\tvar isAddEventListener = false;\n\t\t\tvar delegateEvents = delegates[element._mid] || (delegates[element._mid] = {});\n\t\t\tvar delegateCallbackObjs = delegateEvents[event] || ((delegateEvents[event] = {}));\n\t\t\tif ($.isEmptyObject(delegateCallbackObjs)) {\n\t\t\t\tisAddEventListener = true;\n\t\t\t}\n\t\t\tvar delegateCallbacks = delegateCallbackObjs[selector] || (delegateCallbackObjs[selector] = []);\n\t\t\tdelegateCallbacks.push(callback);\n\t\t\tif (isAddEventListener) {\n\t\t\t\tvar delegateFnArray = delegateFns[mid(element)];\n\t\t\t\tif (!delegateFnArray) {\n\t\t\t\t\tdelegateFnArray = [];\n\t\t\t\t}\n\t\t\t\tvar delegateCallback = delegateFn(element, event, selector, callback);\n\t\t\t\tdelegateFnArray.push(delegateCallback);\n\t\t\t\tdelegateCallback.i = delegateFnArray.length - 1;\n\t\t\t\tdelegateCallback.type = event;\n\t\t\t\tdelegateFns[mid(element)] = delegateFnArray;\n\t\t\t\telement.addEventListener(event, delegateCallback);\n\t\t\t\tif (event === 'tap') { //TODO 需要找个更好的解决方案\n\t\t\t\t\telement.addEventListener('click', function(e) {\n\t\t\t\t\t\tif (e.target) {\n\t\t\t\t\t\t\tvar tagName = e.target.tagName;\n\t\t\t\t\t\t\tif (!preventDefaultException.test(tagName)) {\n\t\t\t\t\t\t\t\tif (tagName === 'A') {\n\t\t\t\t\t\t\t\t\tvar href = e.target.href;\n\t\t\t\t\t\t\t\t\tif (!(href && ~href.indexOf('tel:'))) {\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\t$.fn.off = function(event, selector, callback) {\n\t\treturn this.each(function() {\n\t\t\tvar _mid = mid(this);\n\t\t\tif (!event) { //mui(selector).off();\n\t\t\t\tdelegates[_mid] && delete delegates[_mid];\n\t\t\t} else if (!selector) { //mui(selector).off(event);\n\t\t\t\tdelegates[_mid] && delete delegates[_mid][event];\n\t\t\t} else if (!callback) { //mui(selector).off(event,selector);\n\t\t\t\tdelegates[_mid] && delegates[_mid][event] && delete delegates[_mid][event][selector];\n\t\t\t} else { //mui(selector).off(event,selector,callback);\n\t\t\t\tvar delegateCallbacks = delegates[_mid] && delegates[_mid][event] && delegates[_mid][event][selector];\n\t\t\t\t$.each(delegateCallbacks, function(index, delegateCallback) {\n\t\t\t\t\tif (mid(delegateCallback) === mid(callback)) {\n\t\t\t\t\t\tdelegateCallbacks.splice(index, 1);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}, true);\n\t\t\t}\n\t\t\tif (delegates[_mid]) {\n\t\t\t\t//如果off掉了所有当前element的指定的event事件，则remove掉当前element的delegate回调\n\t\t\t\tif ((!delegates[_mid][event] || $.isEmptyObject(delegates[_mid][event]))) {\n\t\t\t\t\tfindDelegateFn(this, event).forEach(function(fn) {\n\t\t\t\t\t\tthis.removeEventListener(fn.type, fn);\n\t\t\t\t\t\tdelete delegateFns[_mid][fn.i];\n\t\t\t\t\t}.bind(this));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t//如果delegates[_mid]已不存在，删除所有\n\t\t\t\tfindDelegateFn(this).forEach(function(fn) {\n\t\t\t\t\tthis.removeEventListener(fn.type, fn);\n\t\t\t\t\tdelete delegateFns[_mid][fn.i];\n\t\t\t\t}.bind(this));\n\t\t\t}\n\t\t});\n\n\t};\n})(mui);\n/**\n * mui target(action>popover>modal>tab>toggle)\n */\n(function($, window, document) {\n\t/**\n\t * targets\n\t */\n\t$.targets = {};\n\t/**\n\t * target handles\n\t */\n\t$.targetHandles = [];\n\t/**\n\t * register target\n\t * @param {type} target\n\t * @returns {$.targets}\n\t */\n\t$.registerTarget = function(target) {\n\n\t\ttarget.index = target.index || 1000;\n\n\t\t$.targetHandles.push(target);\n\n\t\t$.targetHandles.sort(function(a, b) {\n\t\t\treturn a.index - b.index;\n\t\t});\n\n\t\treturn $.targetHandles;\n\t};\n\twindow.addEventListener($.EVENT_START, function(event) {\n\t\tvar target = event.target;\n\t\tvar founds = {};\n\t\tfor (; target && target !== document; target = target.parentNode) {\n\t\t\tvar isFound = false;\n\t\t\t$.each($.targetHandles, function(index, targetHandle) {\n\t\t\t\tvar name = targetHandle.name;\n\t\t\t\tif (!isFound && !founds[name] && targetHandle.hasOwnProperty('handle')) {\n\t\t\t\t\t$.targets[name] = targetHandle.handle(event, target);\n\t\t\t\t\tif ($.targets[name]) {\n\t\t\t\t\t\tfounds[name] = true;\n\t\t\t\t\t\tif (targetHandle.isContinue !== true) {\n\t\t\t\t\t\t\tisFound = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (!founds[name]) {\n\t\t\t\t\t\tif (targetHandle.isReset !== false)\n\t\t\t\t\t\t\t$.targets[name] = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (isFound) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t});\n\twindow.addEventListener('click', function(event) { //解决touch与click的target不一致的问题(比如链接边缘点击时，touch的target为html，而click的target为A)\n\t\tvar target = event.target;\n\t\tvar isFound = false;\n\t\tfor (; target && target !== document; target = target.parentNode) {\n\t\t\tif (target.tagName === 'A') {\n\t\t\t\t$.each($.targetHandles, function(index, targetHandle) {\n\t\t\t\t\tvar name = targetHandle.name;\n\t\t\t\t\tif (targetHandle.hasOwnProperty('handle')) {\n\t\t\t\t\t\tif (targetHandle.handle(event, target)) {\n\t\t\t\t\t\t\tisFound = true;\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (isFound) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n})(mui, window, document);\n/**\n * fixed trim\n * @param {type} undefined\n * @returns {undefined}\n */\n(function(undefined) {\n\tif (String.prototype.trim === undefined) { // fix for iOS 3.2\n\t\tString.prototype.trim = function() {\n\t\t\treturn this.replace(/^\\s+|\\s+$/g, '');\n\t\t};\n\t}\n\tObject.setPrototypeOf = Object.setPrototypeOf || function(obj, proto) {\n\t\tobj['__proto__'] = proto;\n\t\treturn obj;\n\t};\n\n})();\n/**\n * fixed CustomEvent\n */\n(function() {\n\tif (typeof window.CustomEvent === 'undefined') {\n\t\tfunction CustomEvent(event, params) {\n\t\t\tparams = params || {\n\t\t\t\tbubbles: false,\n\t\t\t\tcancelable: false,\n\t\t\t\tdetail: undefined\n\t\t\t};\n\t\t\tvar evt = document.createEvent('Events');\n\t\t\tvar bubbles = true;\n\t\t\tfor (var name in params) {\n\t\t\t\t(name === 'bubbles') ? (bubbles = !!params[name]) : (evt[name] = params[name]);\n\t\t\t}\n\t\t\tevt.initEvent(event, bubbles, true);\n\t\t\treturn evt;\n\t\t};\n\t\tCustomEvent.prototype = window.Event.prototype;\n\t\twindow.CustomEvent = CustomEvent;\n\t}\n})();\n/*\n\tA shim for non ES5 supporting browsers.\n\tAdds function bind to Function prototype, so that you can do partial application.\n\tWorks even with the nasty thing, where the first word is the opposite of extranet, the second one is the profession of Columbus, and the version number is 9, flipped 180 degrees.\n*/\n\nFunction.prototype.bind = Function.prototype.bind || function(to) {\n\t// Make an array of our arguments, starting from second argument\n\tvar partial = Array.prototype.splice.call(arguments, 1),\n\t\t// We'll need the original function.\n\t\tfn = this;\n\tvar bound = function() {\n\t\t\t// Join the already applied arguments to the now called ones (after converting to an array again).\n\t\t\tvar args = partial.concat(Array.prototype.splice.call(arguments, 0));\n\t\t\t// If not being called as a constructor\n\t\t\tif (!(this instanceof bound)) {\n\t\t\t\t// return the result of the function called bound to target and partially applied.\n\t\t\t\treturn fn.apply(to, args);\n\t\t\t}\n\t\t\t// If being called as a constructor, apply the function bound to self.\n\t\t\tfn.apply(this, args);\n\t\t}\n\t\t// Attach the prototype of the function to our newly created function.\n\tbound.prototype = fn.prototype;\n\treturn bound;\n};\n/**\n * mui fixed classList\n * @param {type} document\n * @returns {undefined}\n */\n(function(document) {\n    if (!(\"classList\" in document.documentElement) && Object.defineProperty && typeof HTMLElement !== 'undefined') {\n\n        Object.defineProperty(HTMLElement.prototype, 'classList', {\n            get: function() {\n                var self = this;\n                function update(fn) {\n                    return function(value) {\n                        var classes = self.className.split(/\\s+/),\n                                index = classes.indexOf(value);\n\n                        fn(classes, index, value);\n                        self.className = classes.join(\" \");\n                    };\n                }\n\n                var ret = {\n                    add: update(function(classes, index, value) {\n                        ~index || classes.push(value);\n                    }),\n                    remove: update(function(classes, index) {\n                        ~index && classes.splice(index, 1);\n                    }),\n                    toggle: update(function(classes, index, value) {\n                        ~index ? classes.splice(index, 1) : classes.push(value);\n                    }),\n                    contains: function(value) {\n                        return !!~self.className.split(/\\s+/).indexOf(value);\n                    },\n                    item: function(i) {\n                        return self.className.split(/\\s+/)[i] || null;\n                    }\n                };\n\n                Object.defineProperty(ret, 'length', {\n                    get: function() {\n                        return self.className.split(/\\s+/).length;\n                    }\n                });\n\n                return ret;\n            }\n        });\n    }\n})(document);\n\n/**\n * mui fixed requestAnimationFrame\n * @param {type} window\n * @returns {undefined}\n */\n(function(window) {\n\tif (!window.requestAnimationFrame) {\n\t\tvar lastTime = 0;\n\t\twindow.requestAnimationFrame = window.webkitRequestAnimationFrame || function(callback, element) {\n\t\t\tvar currTime = new Date().getTime();\n\t\t\tvar timeToCall = Math.max(0, 16.7 - (currTime - lastTime));\n\t\t\tvar id = window.setTimeout(function() {\n\t\t\t\tcallback(currTime + timeToCall);\n\t\t\t}, timeToCall);\n\t\t\tlastTime = currTime + timeToCall;\n\t\t\treturn id;\n\t\t};\n\t\twindow.cancelAnimationFrame = window.webkitCancelAnimationFrame || window.webkitCancelRequestAnimationFrame || function(id) {\n\t\t\tclearTimeout(id);\n\t\t};\n\t};\n}(window));\n/**\n * fastclick(only for radio,checkbox)\n */\n(function($, window, name) {\n\tif (!$.os.android && !$.os.ios) { //目前仅识别android和ios\n\t\treturn;\n\t}\n\tif (window.FastClick) {\n\t\treturn;\n\t}\n\n\tvar handle = function(event, target) {\n\t\tif (target.tagName === 'LABEL') {\n\t\t\tif (target.parentNode) {\n\t\t\t\ttarget = target.parentNode.querySelector('input');\n\t\t\t}\n\t\t}\n\t\tif (target && (target.type === 'radio' || target.type === 'checkbox')) {\n\t\t\tif (!target.disabled) { //disabled\n\t\t\t\treturn target;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t};\n\n\t$.registerTarget({\n\t\tname: name,\n\t\tindex: 40,\n\t\thandle: handle,\n\t\ttarget: false\n\t});\n\tvar dispatchEvent = function(event) {\n\t\tvar targetElement = $.targets.click;\n\t\tif (targetElement) {\n\t\t\tvar clickEvent, touch;\n\t\t\t// On some Android devices activeElement needs to be blurred otherwise the synthetic click will have no effect\n\t\t\tif (document.activeElement && document.activeElement !== targetElement) {\n\t\t\t\tdocument.activeElement.blur();\n\t\t\t}\n\t\t\ttouch = event.detail.gesture.changedTouches[0];\n\t\t\t// Synthesise a click event, with an extra attribute so it can be tracked\n\t\t\tclickEvent = document.createEvent('MouseEvents');\n\t\t\tclickEvent.initMouseEvent('click', true, true, window, 1, touch.screenX, touch.screenY, touch.clientX, touch.clientY, false, false, false, false, 0, null);\n\t\t\tclickEvent.forwardedTouchEvent = true;\n\t\t\ttargetElement.dispatchEvent(clickEvent);\n\t\t\tevent.detail && event.detail.gesture.preventDefault();\n\t\t}\n\t};\n\twindow.addEventListener('tap', dispatchEvent);\n\twindow.addEventListener('doubletap', dispatchEvent);\n\t//捕获\n\twindow.addEventListener('click', function(event) {\n\t\tif ($.targets.click) {\n\t\t\tif (!event.forwardedTouchEvent) { //stop click\n\t\t\t\tif (event.stopImmediatePropagation) {\n\t\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\t} else {\n\t\t\t\t\t// Part of the hack for browsers that don't support Event#stopImmediatePropagation\n\t\t\t\t\tevent.propagationStopped = true;\n\t\t\t\t}\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tevent.preventDefault();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}, true);\n\n})(mui, window, 'click');\n(function($, document) {\n\t$(function() {\n\t\tif (!$.os.ios) {\n\t\t\treturn;\n\t\t}\n\t\tvar CLASS_FOCUSIN = 'mui-focusin';\n\t\tvar CLASS_BAR_TAB = 'mui-bar-tab';\n\t\tvar CLASS_BAR_FOOTER = 'mui-bar-footer';\n\t\tvar CLASS_BAR_FOOTER_SECONDARY = 'mui-bar-footer-secondary';\n\t\tvar CLASS_BAR_FOOTER_SECONDARY_TAB = 'mui-bar-footer-secondary-tab';\n\t\t// var content = document.querySelector('.' + CLASS_CONTENT);\n\t\t// if (content) {\n\t\t// \tdocument.body.insertBefore(content, document.body.firstElementChild);\n\t\t// }\n\t\tdocument.addEventListener('focusin', function(e) {\n\t\t\tif ($.os.plus) { //在父webview里边不fix\n\t\t\t\tif (window.plus) {\n\t\t\t\t\tif (plus.webview.currentWebview().children().length > 0) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar target = e.target;\n\t\t\t//TODO 需考虑所有键盘弹起的情况\n\t\t\tif (target.tagName && (target.tagName === 'TEXTAREA' || (target.tagName === 'INPUT' && (target.type === 'text' || target.type === 'search' || target.type === 'number')))) {\n\t\t\t\tif (target.disabled || target.readOnly) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tdocument.body.classList.add(CLASS_FOCUSIN);\n\t\t\t\tvar isFooter = false;\n\t\t\t\tfor (; target && target !== document; target = target.parentNode) {\n\t\t\t\t\tvar classList = target.classList;\n\t\t\t\t\tif (classList && classList.contains(CLASS_BAR_TAB) || classList.contains(CLASS_BAR_FOOTER) || classList.contains(CLASS_BAR_FOOTER_SECONDARY) || classList.contains(CLASS_BAR_FOOTER_SECONDARY_TAB)) {\n\t\t\t\t\t\tisFooter = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (isFooter) {\n\t\t\t\t\tvar scrollTop = document.body.scrollHeight;\n\t\t\t\t\tvar scrollLeft = document.body.scrollLeft;\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\twindow.scrollTo(scrollLeft, scrollTop);\n\t\t\t\t\t}, 20);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tdocument.addEventListener('focusout', function(e) {\n\t\t\tvar classList = document.body.classList;\n\t\t\tif (classList.contains(CLASS_FOCUSIN)) {\n\t\t\t\tclassList.remove(CLASS_FOCUSIN);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\twindow.scrollTo(document.body.scrollLeft, document.body.scrollTop);\n\t\t\t\t}, 20);\n\t\t\t}\n\t\t});\n\t});\n})(mui, document);\n/**\n * mui namespace(optimization)\n * @param {type} $\n * @returns {undefined}\n */\n(function($) {\n\t$.namespace = 'mui';\n\t$.classNamePrefix = $.namespace + '-';\n\t$.classSelectorPrefix = '.' + $.classNamePrefix;\n\t/**\n\t * 返回正确的className\n\t * @param {type} className\n\t * @returns {String}\n\t */\n\t$.className = function(className) {\n\t\treturn $.classNamePrefix + className;\n\t};\n\t/**\n\t * 返回正确的classSelector\n\t * @param {type} classSelector\n\t * @returns {String}\n\t */\n\t$.classSelector = function(classSelector) {\n\t\treturn classSelector.replace(/\\./g, $.classSelectorPrefix);\n\t};\n\t/**\n         * 返回正确的eventName\n         * @param {type} event\n         * @param {type} module\n         * @returns {String}\n         */\n\t$.eventName = function(event, module) {\n\t\treturn event + ($.namespace ? ('.' + $.namespace) : '') + ( module ? ('.' + module) : '');\n\t};\n})(mui);\n\n/**\n * mui gestures\n * @param {type} $\n * @param {type} window\n * @returns {undefined}\n */\n(function($, window) {\n\t$.gestures = {\n\t\tsession: {}\n\t};\n\t/**\n\t * Gesture preventDefault\n\t * @param {type} e\n\t * @returns {undefined}\n\t */\n\t$.preventDefault = function(e) {\n\t\te.preventDefault();\n\t};\n\t/**\n\t * Gesture stopPropagation\n\t * @param {type} e\n\t * @returns {undefined}\n\t */\n\t$.stopPropagation = function(e) {\n\t\te.stopPropagation();\n\t};\n\n\t/**\n\t * register gesture\n\t * @param {type} gesture\n\t * @returns {$.gestures}\n\t */\n\t$.addGesture = function(gesture) {\n\t\treturn $.addAction('gestures', gesture);\n\n\t};\n\n\tvar round = Math.round;\n\tvar abs = Math.abs;\n\tvar sqrt = Math.sqrt;\n\tvar atan = Math.atan;\n\tvar atan2 = Math.atan2;\n\t/**\n\t * distance\n\t * @param {type} p1\n\t * @param {type} p2\n\t * @returns {Number}\n\t */\n\tvar getDistance = function(p1, p2, props) {\n\t\tif (!props) {\n\t\t\tprops = ['x', 'y'];\n\t\t}\n\t\tvar x = p2[props[0]] - p1[props[0]];\n\t\tvar y = p2[props[1]] - p1[props[1]];\n\t\treturn sqrt((x * x) + (y * y));\n\t};\n\t/**\n\t * scale\n\t * @param {Object} starts\n\t * @param {Object} moves\n\t */\n\tvar getScale = function(starts, moves) {\n\t\tif (starts.length >= 2 && moves.length >= 2) {\n\t\t\tvar props = ['pageX', 'pageY'];\n\t\t\treturn getDistance(moves[1], moves[0], props) / getDistance(starts[1], starts[0], props);\n\t\t}\n\t\treturn 1;\n\t};\n\t/**\n\t * angle\n\t * @param {type} p1\n\t * @param {type} p2\n\t * @returns {Number}\n\t */\n\tvar getAngle = function(p1, p2, props) {\n\t\tif (!props) {\n\t\t\tprops = ['x', 'y'];\n\t\t}\n\t\tvar x = p2[props[0]] - p1[props[0]];\n\t\tvar y = p2[props[1]] - p1[props[1]];\n\t\treturn atan2(y, x) * 180 / Math.PI;\n\t};\n\t/**\n\t * direction\n\t * @param {Object} x\n\t * @param {Object} y\n\t */\n\tvar getDirection = function(x, y) {\n\t\tif (x === y) {\n\t\t\treturn '';\n\t\t}\n\t\tif (abs(x) >= abs(y)) {\n\t\t\treturn x > 0 ? 'left' : 'right';\n\t\t}\n\t\treturn y > 0 ? 'up' : 'down';\n\t};\n\t/**\n\t * rotation\n\t * @param {Object} start\n\t * @param {Object} end\n\t */\n\tvar getRotation = function(start, end) {\n\t\tvar props = ['pageX', 'pageY'];\n\t\treturn getAngle(end[1], end[0], props) - getAngle(start[1], start[0], props);\n\t};\n\t/**\n\t * px per ms\n\t * @param {Object} deltaTime\n\t * @param {Object} x\n\t * @param {Object} y\n\t */\n\tvar getVelocity = function(deltaTime, x, y) {\n\t\treturn {\n\t\t\tx: x / deltaTime || 0,\n\t\t\ty: y / deltaTime || 0\n\t\t};\n\t};\n\t/**\n\t * detect gestures\n\t * @param {type} event\n\t * @param {type} touch\n\t * @returns {undefined}\n\t */\n\tvar detect = function(event, touch) {\n\t\tif ($.gestures.stoped) {\n\t\t\treturn;\n\t\t}\n\t\t$.doAction('gestures', function(index, gesture) {\n\t\t\tif (!$.gestures.stoped) {\n\t\t\t\tif ($.options.gestureConfig[gesture.name] !== false) {\n\t\t\t\t\tgesture.handle(event, touch);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\t/**\n\t * 暂时无用\n\t * @param {Object} node\n\t * @param {Object} parent\n\t */\n\tvar hasParent = function(node, parent) {\n\t\twhile (node) {\n\t\t\tif (node == parent) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tnode = node.parentNode;\n\t\t}\n\t\treturn false;\n\t};\n\n\tvar uniqueArray = function(src, key, sort) {\n\t\tvar results = [];\n\t\tvar values = [];\n\t\tvar i = 0;\n\n\t\twhile (i < src.length) {\n\t\t\tvar val = key ? src[i][key] : src[i];\n\t\t\tif (values.indexOf(val) < 0) {\n\t\t\t\tresults.push(src[i]);\n\t\t\t}\n\t\t\tvalues[i] = val;\n\t\t\ti++;\n\t\t}\n\n\t\tif (sort) {\n\t\t\tif (!key) {\n\t\t\t\tresults = results.sort();\n\t\t\t} else {\n\t\t\t\tresults = results.sort(function sortUniqueArray(a, b) {\n\t\t\t\t\treturn a[key] > b[key];\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn results;\n\t};\n\tvar getMultiCenter = function(touches) {\n\t\tvar touchesLength = touches.length;\n\t\tif (touchesLength === 1) {\n\t\t\treturn {\n\t\t\t\tx: round(touches[0].pageX),\n\t\t\t\ty: round(touches[0].pageY)\n\t\t\t};\n\t\t}\n\n\t\tvar x = 0;\n\t\tvar y = 0;\n\t\tvar i = 0;\n\t\twhile (i < touchesLength) {\n\t\t\tx += touches[i].pageX;\n\t\t\ty += touches[i].pageY;\n\t\t\ti++;\n\t\t}\n\n\t\treturn {\n\t\t\tx: round(x / touchesLength),\n\t\t\ty: round(y / touchesLength)\n\t\t};\n\t};\n\tvar multiTouch = function() {\n\t\treturn $.options.gestureConfig.pinch;\n\t};\n\tvar copySimpleTouchData = function(touch) {\n\t\tvar touches = [];\n\t\tvar i = 0;\n\t\twhile (i < touch.touches.length) {\n\t\t\ttouches[i] = {\n\t\t\t\tpageX: round(touch.touches[i].pageX),\n\t\t\t\tpageY: round(touch.touches[i].pageY)\n\t\t\t};\n\t\t\ti++;\n\t\t}\n\t\treturn {\n\t\t\ttimestamp: $.now(),\n\t\t\tgesture: touch.gesture,\n\t\t\ttouches: touches,\n\t\t\tcenter: getMultiCenter(touch.touches),\n\t\t\tdeltaX: touch.deltaX,\n\t\t\tdeltaY: touch.deltaY\n\t\t};\n\t};\n\n\tvar calDelta = function(touch) {\n\t\tvar session = $.gestures.session;\n\t\tvar center = touch.center;\n\t\tvar offset = session.offsetDelta || {};\n\t\tvar prevDelta = session.prevDelta || {};\n\t\tvar prevTouch = session.prevTouch || {};\n\n\t\tif (touch.gesture.type === $.EVENT_START || touch.gesture.type === $.EVENT_END) {\n\t\t\tprevDelta = session.prevDelta = {\n\t\t\t\tx: prevTouch.deltaX || 0,\n\t\t\t\ty: prevTouch.deltaY || 0\n\t\t\t};\n\n\t\t\toffset = session.offsetDelta = {\n\t\t\t\tx: center.x,\n\t\t\t\ty: center.y\n\t\t\t};\n\t\t}\n\t\ttouch.deltaX = prevDelta.x + (center.x - offset.x);\n\t\ttouch.deltaY = prevDelta.y + (center.y - offset.y);\n\t};\n\tvar calTouchData = function(touch) {\n\t\tvar session = $.gestures.session;\n\t\tvar touches = touch.touches;\n\t\tvar touchesLength = touches.length;\n\n\t\tif (!session.firstTouch) {\n\t\t\tsession.firstTouch = copySimpleTouchData(touch);\n\t\t}\n\n\t\tif (multiTouch() && touchesLength > 1 && !session.firstMultiTouch) {\n\t\t\tsession.firstMultiTouch = copySimpleTouchData(touch);\n\t\t} else if (touchesLength === 1) {\n\t\t\tsession.firstMultiTouch = false;\n\t\t}\n\n\t\tvar firstTouch = session.firstTouch;\n\t\tvar firstMultiTouch = session.firstMultiTouch;\n\t\tvar offsetCenter = firstMultiTouch ? firstMultiTouch.center : firstTouch.center;\n\n\t\tvar center = touch.center = getMultiCenter(touches);\n\t\ttouch.timestamp = $.now();\n\t\ttouch.deltaTime = touch.timestamp - firstTouch.timestamp;\n\n\t\ttouch.angle = getAngle(offsetCenter, center);\n\t\ttouch.distance = getDistance(offsetCenter, center);\n\n\t\tcalDelta(touch);\n\n\t\ttouch.offsetDirection = getDirection(touch.deltaX, touch.deltaY);\n\n\t\ttouch.scale = firstMultiTouch ? getScale(firstMultiTouch.touches, touches) : 1;\n\t\ttouch.rotation = firstMultiTouch ? getRotation(firstMultiTouch.touches, touches) : 0;\n\n\t\tcalIntervalTouchData(touch);\n\n\t};\n\tvar CAL_INTERVAL = 25;\n\tvar calIntervalTouchData = function(touch) {\n\t\tvar session = $.gestures.session;\n\t\tvar last = session.lastInterval || touch;\n\t\tvar deltaTime = touch.timestamp - last.timestamp;\n\t\tvar velocity;\n\t\tvar velocityX;\n\t\tvar velocityY;\n\t\tvar direction;\n\n\t\tif (touch.gesture.type != $.EVENT_CANCEL && (deltaTime > CAL_INTERVAL || last.velocity === undefined)) {\n\t\t\tvar deltaX = last.deltaX - touch.deltaX;\n\t\t\tvar deltaY = last.deltaY - touch.deltaY;\n\n\t\t\tvar v = getVelocity(deltaTime, deltaX, deltaY);\n\t\t\tvelocityX = v.x;\n\t\t\tvelocityY = v.y;\n\t\t\tvelocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\n\t\t\tdirection = getDirection(deltaX, deltaY) || last.direction;\n\n\t\t\tsession.lastInterval = touch;\n\t\t} else {\n\t\t\tvelocity = last.velocity;\n\t\t\tvelocityX = last.velocityX;\n\t\t\tvelocityY = last.velocityY;\n\t\t\tdirection = last.direction;\n\t\t}\n\n\t\ttouch.velocity = velocity;\n\t\ttouch.velocityX = velocityX;\n\t\ttouch.velocityY = velocityY;\n\t\ttouch.direction = direction;\n\t};\n\tvar targetIds = {};\n\tvar convertTouches = function(touches) {\n\t\tfor (var i = 0; i < touches.length; i++) {\n\t\t\t!touches['identifier'] && (touches['identifier'] = 0);\n\t\t}\n\t\treturn touches;\n\t};\n\tvar getTouches = function(event, touch) {\n\t\tvar allTouches = convertTouches($.slice.call(event.touches || [event]));\n\n\t\tvar type = event.type;\n\n\t\tvar targetTouches = [];\n\t\tvar changedTargetTouches = [];\n\n\t\t//当touchstart或touchmove且touches长度为1，直接获得all和changed\n\t\tif ((type === $.EVENT_START || type === $.EVENT_MOVE) && allTouches.length === 1) {\n\t\t\ttargetIds[allTouches[0].identifier] = true;\n\t\t\ttargetTouches = allTouches;\n\t\t\tchangedTargetTouches = allTouches;\n\t\t\ttouch.target = event.target;\n\t\t} else {\n\t\t\tvar i = 0;\n\t\t\tvar targetTouches = [];\n\t\t\tvar changedTargetTouches = [];\n\t\t\tvar changedTouches = convertTouches($.slice.call(event.changedTouches || [event]));\n\n\t\t\ttouch.target = event.target;\n\t\t\tvar sessionTarget = $.gestures.session.target || event.target;\n\t\t\ttargetTouches = allTouches.filter(function(touch) {\n\t\t\t\treturn hasParent(touch.target, sessionTarget);\n\t\t\t});\n\n\t\t\tif (type === $.EVENT_START) {\n\t\t\t\ti = 0;\n\t\t\t\twhile (i < targetTouches.length) {\n\t\t\t\t\ttargetIds[targetTouches[i].identifier] = true;\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ti = 0;\n\t\t\twhile (i < changedTouches.length) {\n\t\t\t\tif (targetIds[changedTouches[i].identifier]) {\n\t\t\t\t\tchangedTargetTouches.push(changedTouches[i]);\n\t\t\t\t}\n\t\t\t\tif (type === $.EVENT_END || type === $.EVENT_CANCEL) {\n\t\t\t\t\tdelete targetIds[changedTouches[i].identifier];\n\t\t\t\t}\n\t\t\t\ti++;\n\t\t\t}\n\n\t\t\tif (!changedTargetTouches.length) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\ttargetTouches = uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true);\n\t\tvar touchesLength = targetTouches.length;\n\t\tvar changedTouchesLength = changedTargetTouches.length;\n\t\tif (type === $.EVENT_START && touchesLength - changedTouchesLength === 0) { //first\n\t\t\ttouch.isFirst = true;\n\t\t\t$.gestures.touch = $.gestures.session = {\n\t\t\t\ttarget: event.target\n\t\t\t};\n\t\t}\n\t\ttouch.isFinal = ((type === $.EVENT_END || type === $.EVENT_CANCEL) && (touchesLength - changedTouchesLength === 0));\n\n\t\ttouch.touches = targetTouches;\n\t\ttouch.changedTouches = changedTargetTouches;\n\t\treturn true;\n\n\t};\n\tvar handleTouchEvent = function(event) {\n\t\tvar touch = {\n\t\t\tgesture: event\n\t\t};\n\t\tvar touches = getTouches(event, touch);\n\t\tif (!touches) {\n\t\t\treturn;\n\t\t}\n\t\tcalTouchData(touch);\n\t\tdetect(event, touch);\n\t\t$.gestures.session.prevTouch = touch;\n\t\tif (event.type === $.EVENT_END && !$.isTouchable) {\n\t\t\t$.gestures.touch = $.gestures.session = {};\n\t\t}\n\t};\n\twindow.addEventListener($.EVENT_START, handleTouchEvent);\n\twindow.addEventListener($.EVENT_MOVE, handleTouchEvent);\n\twindow.addEventListener($.EVENT_END, handleTouchEvent);\n\twindow.addEventListener($.EVENT_CANCEL, handleTouchEvent);\n\t//fixed hashchange(android)\n\twindow.addEventListener($.EVENT_CLICK, function(e) {\n\t\t//TODO 应该判断当前target是不是在targets.popover内部，而不是非要相等\n\t\tif (($.os.android || $.os.ios) && (($.targets.popover && e.target === $.targets.popover) || ($.targets.tab) || $.targets.offcanvas || $.targets.modal)) {\n\t\t\te.preventDefault();\n\t\t}\n\t}, true);\n\n\n\t//增加原生滚动识别\n\t$.isScrolling = false;\n\tvar scrollingTimeout = null;\n\twindow.addEventListener('scroll', function() {\n\t\t$.isScrolling = true;\n\t\tscrollingTimeout && clearTimeout(scrollingTimeout);\n\t\tscrollingTimeout = setTimeout(function() {\n\t\t\t$.isScrolling = false;\n\t\t}, 250);\n\t});\n})(mui, window);\n/**\n * mui gesture flick[left|right|up|down]\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n\tvar flickStartTime = 0;\n\tvar handle = function(event, touch) {\n\t\tvar session = $.gestures.session;\n\t\tvar options = this.options;\n\t\tvar now = $.now();\n\t\tswitch (event.type) {\n\t\t\tcase $.EVENT_MOVE:\n\t\t\t\tif (now - flickStartTime > 300) {\n\t\t\t\t\tflickStartTime = now;\n\t\t\t\t\tsession.flickStart = touch.center;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_END:\n\t\t\tcase $.EVENT_CANCEL:\n\t\t\t\ttouch.flick = false;\n\t\t\t\tif (session.flickStart && options.flickMaxTime > (now - flickStartTime) && touch.distance > options.flickMinDistince) {\n\t\t\t\t\ttouch.flick = true;\n\t\t\t\t\ttouch.flickTime = now - flickStartTime;\n\t\t\t\t\ttouch.flickDistanceX = touch.center.x - session.flickStart.x;\n\t\t\t\t\ttouch.flickDistanceY = touch.center.y - session.flickStart.y;\n\t\t\t\t\t$.trigger(session.target, name, touch);\n\t\t\t\t\t$.trigger(session.target, name + touch.direction, touch);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t};\n\t/**\n\t * mui gesture flick\n\t */\n\t$.addGesture({\n\t\tname: name,\n\t\tindex: 5,\n\t\thandle: handle,\n\t\toptions: {\n\t\t\tflickMaxTime: 200,\n\t\t\tflickMinDistince: 10\n\t\t}\n\t});\n})(mui, 'flick');\n/**\n * mui gesture swipe[left|right|up|down]\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n\tvar handle = function(event, touch) {\n\t\tvar session = $.gestures.session;\n\t\tif (event.type === $.EVENT_END || event.type === $.EVENT_CANCEL) {\n\t\t\tvar options = this.options;\n\t\t\ttouch.swipe = false;\n\t\t\t//TODO 后续根据velocity计算\n\t\t\tif (touch.direction && options.swipeMaxTime > touch.deltaTime && touch.distance > options.swipeMinDistince) {\n\t\t\t\ttouch.swipe = true;\n\t\t\t\t$.trigger(session.target, name, touch);\n\t\t\t\t$.trigger(session.target, name + touch.direction, touch);\n\t\t\t}\n\t\t}\n\t};\n\t/**\n\t * mui gesture swipe\n\t */\n\t$.addGesture({\n\t\tname: name,\n\t\tindex: 10,\n\t\thandle: handle,\n\t\toptions: {\n\t\t\tswipeMaxTime: 300,\n\t\t\tswipeMinDistince: 18\n\t\t}\n\t});\n})(mui, 'swipe');\n/**\n * mui gesture drag[start|left|right|up|down|end]\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n\tvar handle = function(event, touch) {\n\t\tvar session = $.gestures.session;\n\t\tswitch (event.type) {\n\t\t\tcase $.EVENT_START:\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_MOVE:\n\t\t\t\tif (!touch.direction || !session.target) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t//修正direction,可在session期间自行锁定拖拽方向，方便开发scroll类不同方向拖拽插件嵌套\n\t\t\t\tif (session.lockDirection && session.startDirection) {\n\t\t\t\t\tif (session.startDirection && session.startDirection !== touch.direction) {\n\t\t\t\t\t\tif (session.startDirection === 'up' || session.startDirection === 'down') {\n\t\t\t\t\t\t\ttouch.direction = touch.deltaY < 0 ? 'up' : 'down';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttouch.direction = touch.deltaX < 0 ? 'left' : 'right';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!session.drag) {\n\t\t\t\t\tsession.drag = true;\n\t\t\t\t\t$.trigger(session.target, name + 'start', touch);\n\t\t\t\t}\n\t\t\t\t$.trigger(session.target, name, touch);\n\t\t\t\t$.trigger(session.target, name + touch.direction, touch);\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_END:\n\t\t\tcase $.EVENT_CANCEL:\n\t\t\t\tif (session.drag && touch.isFinal) {\n\t\t\t\t\t$.trigger(session.target, name + 'end', touch);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t};\n\t/**\n\t * mui gesture drag\n\t */\n\t$.addGesture({\n\t\tname: name,\n\t\tindex: 20,\n\t\thandle: handle,\n\t\toptions: {\n\t\t\tfingers: 1\n\t\t}\n\t});\n})(mui, 'drag');\n/**\n * mui gesture tap and doubleTap\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n\tvar lastTarget;\n\tvar lastTapTime;\n\tvar handle = function(event, touch) {\n\t\tvar session = $.gestures.session;\n\t\tvar options = this.options;\n\t\tswitch (event.type) {\n\t\t\tcase $.EVENT_END:\n\t\t\t\tif (!touch.isFinal) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar target = session.target;\n\t\t\t\tif (!target || (target.disabled || (target.classList && target.classList.contains('mui-disabled')))) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (touch.distance < options.tapMaxDistance && touch.deltaTime < options.tapMaxTime) {\n\t\t\t\t\tif ($.options.gestureConfig.doubletap && lastTarget && (lastTarget === target)) { //same target\n\t\t\t\t\t\tif (lastTapTime && (touch.timestamp - lastTapTime) < options.tapMaxInterval) {\n\t\t\t\t\t\t\t$.trigger(target, 'doubletap', touch);\n\t\t\t\t\t\t\tlastTapTime = $.now();\n\t\t\t\t\t\t\tlastTarget = target;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t$.trigger(target, name, touch);\n\t\t\t\t\tlastTapTime = $.now();\n\t\t\t\t\tlastTarget = target;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t};\n\t/**\n\t * mui gesture tap\n\t */\n\t$.addGesture({\n\t\tname: name,\n\t\tindex: 30,\n\t\thandle: handle,\n\t\toptions: {\n\t\t\tfingers: 1,\n\t\t\ttapMaxInterval: 300,\n\t\t\ttapMaxDistance: 5,\n\t\t\ttapMaxTime: 250\n\t\t}\n\t});\n})(mui, 'tap');\n/**\n * mui gesture longtap\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n\tvar timer;\n\tvar handle = function(event, touch) {\n\t\tvar session = $.gestures.session;\n\t\tvar options = this.options;\n\t\tswitch (event.type) {\n\t\t\tcase $.EVENT_START:\n\t\t\t\tclearTimeout(timer);\n\t\t\t\ttimer = setTimeout(function() {\n\t\t\t\t\t$.trigger(session.target, name, touch);\n\t\t\t\t}, options.holdTimeout);\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_MOVE:\n\t\t\t\tif (touch.distance > options.holdThreshold) {\n\t\t\t\t\tclearTimeout(timer);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_END:\n\t\t\tcase $.EVENT_CANCEL:\n\t\t\t\tclearTimeout(timer);\n\t\t\t\tbreak;\n\t\t}\n\t};\n\t/**\n\t * mui gesture longtap\n\t */\n\t$.addGesture({\n\t\tname: name,\n\t\tindex: 10,\n\t\thandle: handle,\n\t\toptions: {\n\t\t\tfingers: 1,\n\t\t\tholdTimeout: 500,\n\t\t\tholdThreshold: 2\n\t\t}\n\t});\n})(mui, 'longtap');\n/**\n * mui gesture hold\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n\tvar timer;\n\tvar handle = function(event, touch) {\n\t\tvar session = $.gestures.session;\n\t\tvar options = this.options;\n\t\tswitch (event.type) {\n\t\t\tcase $.EVENT_START:\n\t\t\t\tif ($.options.gestureConfig.hold) {\n\t\t\t\t\ttimer && clearTimeout(timer);\n\t\t\t\t\ttimer = setTimeout(function() {\n\t\t\t\t\t\ttouch.hold = true;\n\t\t\t\t\t\t$.trigger(session.target, name, touch);\n\t\t\t\t\t}, options.holdTimeout);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_MOVE:\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_END:\n\t\t\tcase $.EVENT_CANCEL:\n\t\t\t\tif (timer) {\n\t\t\t\t\tclearTimeout(timer) && (timer = null);\n\t\t\t\t\t$.trigger(session.target, 'release', touch);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t};\n\t/**\n\t * mui gesture hold\n\t */\n\t$.addGesture({\n\t\tname: name,\n\t\tindex: 10,\n\t\thandle: handle,\n\t\toptions: {\n\t\t\tfingers: 1,\n\t\t\tholdTimeout: 0\n\t\t}\n\t});\n})(mui, 'hold');\n/**\n * mui gesture pinch\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n\tvar handle = function(event, touch) {\n\t\tvar options = this.options;\n\t\tvar session = $.gestures.session;\n\t\tswitch (event.type) {\n\t\t\tcase $.EVENT_START:\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_MOVE:\n\t\t\t\tif ($.options.gestureConfig.pinch) {\n\t\t\t\t\tif (touch.touches.length < 2) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (!session.pinch) { //start\n\t\t\t\t\t\tsession.pinch = true;\n\t\t\t\t\t\t$.trigger(session.target, name + 'start', touch);\n\t\t\t\t\t}\n\t\t\t\t\t$.trigger(session.target, name, touch);\n\t\t\t\t\tvar scale = touch.scale;\n\t\t\t\t\tvar rotation = touch.rotation;\n\t\t\t\t\tvar lastScale = typeof touch.lastScale === 'undefined' ? 1 : touch.lastScale;\n\t\t\t\t\tvar scaleDiff = 0.000000000001; //防止scale与lastScale相等，不触发事件的情况。\n\t\t\t\t\tif (scale > lastScale) { //out\n\t\t\t\t\t\tlastScale = scale - scaleDiff;\n\t\t\t\t\t\t$.trigger(session.target, name + 'out', touch);\n\t\t\t\t\t} //in\n\t\t\t\t\telse if (scale < lastScale) {\n\t\t\t\t\t\tlastScale = scale + scaleDiff;\n\t\t\t\t\t\t$.trigger(session.target, name + 'in', touch);\n\t\t\t\t\t}\n\t\t\t\t\tif (Math.abs(rotation) > options.minRotationAngle) {\n\t\t\t\t\t\t$.trigger(session.target, 'rotate', touch);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_END:\n\t\t\tcase $.EVENT_CANCEL:\n\t\t\t\tif ($.options.gestureConfig.pinch && session.pinch && touch.touches.length === 2) {\n\t\t\t\t\tsession.pinch = false;\n\t\t\t\t\t$.trigger(session.target, name + 'end', touch);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t};\n\t/**\n\t * mui gesture pinch\n\t */\n\t$.addGesture({\n\t\tname: name,\n\t\tindex: 10,\n\t\thandle: handle,\n\t\toptions: {\n\t\t\tminRotationAngle: 0\n\t\t}\n\t});\n})(mui, 'pinch');\n/**\n * mui.init\n * @param {type} $\n * @returns {undefined}\n */\n(function($) {\n\t$.global = $.options = {\n\t\tgestureConfig: {\n\t\t\ttap: true,\n\t\t\tdoubletap: false,\n\t\t\tlongtap: false,\n\t\t\thold: false,\n\t\t\tflick: true,\n\t\t\tswipe: true,\n\t\t\tdrag: true,\n\t\t\tpinch: false\n\t\t}\n\t};\n\t/**\n\t *\n\t * @param {type} options\n\t * @returns {undefined}\n\t */\n\t$.initGlobal = function(options) {\n\t\t$.options = $.extend(true, $.global, options);\n\t\treturn this;\n\t};\n\tvar inits = {};\n\n\tvar isInitialized = false;\n\t//TODO 自动调用init?因为用户自己调用init的时机可能不确定，如果晚于自动init，则会有潜在问题\n\t//\t$.ready(function() {\n\t//\t\tsetTimeout(function() {\n\t//\t\t\tif (!isInitialized) {\n\t//\t\t\t\t$.init();\n\t//\t\t\t}\n\t//\t\t}, 300);\n\t//\t});\n\t/**\n\t * 单页配置 初始化\n\t * @param {object} options\n\t */\n\t$.init = function(options) {\n\t\tisInitialized = true;\n\t\t$.options = $.extend(true, $.global, options || {});\n\t\t$.ready(function() {\n\t\t\t$.doAction('inits', function(index, init) {\n\t\t\t\tvar isInit = !!(!inits[init.name] || init.repeat);\n\t\t\t\tif (isInit) {\n\t\t\t\t\tinit.handle.call($);\n\t\t\t\t\tinits[init.name] = true;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\treturn this;\n\t};\n\n\t/**\n\t * 增加初始化执行流程\n\t * @param {function} init\n\t */\n\t$.addInit = function(init) {\n\t\treturn $.addAction('inits', init);\n\t};\n\t/**\n\t * 处理html5版本subpages \n\t */\n\t$.addInit({\n\t\tname: 'iframe',\n\t\tindex: 100,\n\t\thandle: function() {\n\t\t\tvar options = $.options;\n\t\t\tvar subpages = options.subpages || [];\n\t\t\tif (!$.os.plus && subpages.length) {\n\t\t\t\t//暂时只处理单个subpage。后续可以考虑支持多个subpage\n\t\t\t\tcreateIframe(subpages[0]);\n\t\t\t}\n\t\t}\n\t});\n\tvar createIframe = function(options) {\n\t\tvar wrapper = document.createElement('div');\n\t\twrapper.className = 'mui-iframe-wrapper';\n\t\tvar styles = options.styles || {};\n\t\tif (typeof styles.top !== 'string') {\n\t\t\tstyles.top = '0px';\n\t\t}\n\t\tif (typeof styles.bottom !== 'string') {\n\t\t\tstyles.bottom = '0px';\n\t\t}\n\t\twrapper.style.top = styles.top;\n\t\twrapper.style.bottom = styles.bottom;\n\t\tvar iframe = document.createElement('iframe');\n\t\tiframe.src = options.url;\n\t\tiframe.id = options.id || options.url;\n\t\tiframe.name = iframe.id;\n\t\twrapper.appendChild(iframe);\n\t\tdocument.body.appendChild(wrapper);\n\t\t//目前仅处理微信\n\t\t$.os.wechat && handleScroll(wrapper, iframe);\n\t};\n\n\tfunction handleScroll(wrapper, iframe) {\n\t\tvar key = 'MUI_SCROLL_POSITION_' + document.location.href + '_' + iframe.src;\n\t\tvar scrollTop = (parseFloat(localStorage.getItem(key)) || 0);\n\t\tif (scrollTop) {\n\t\t\t(function(y) {\n\t\t\t\tiframe.onload = function() {\n\t\t\t\t\twindow.scrollTo(0, y);\n\t\t\t\t};\n\t\t\t})(scrollTop);\n\t\t}\n\t\tsetInterval(function() {\n\t\t\tvar _scrollTop = window.scrollY;\n\t\t\tif (scrollTop !== _scrollTop) {\n\t\t\t\tlocalStorage.setItem(key, _scrollTop + '');\n\t\t\t\tscrollTop = _scrollTop;\n\t\t\t}\n\t\t}, 100);\n\t};\n\t$(function() {\n\t\tvar classList = document.body.classList;\n\t\tvar os = [];\n\t\tif ($.os.ios) {\n\t\t\tos.push({\n\t\t\t\tos: 'ios',\n\t\t\t\tversion: $.os.version\n\t\t\t});\n\t\t\tclassList.add('mui-ios');\n\t\t} else if ($.os.android) {\n\t\t\tos.push({\n\t\t\t\tos: 'android',\n\t\t\t\tversion: $.os.version\n\t\t\t});\n\t\t\tclassList.add('mui-android');\n\t\t}\n\t\tif ($.os.wechat) {\n\t\t\tos.push({\n\t\t\t\tos: 'wechat',\n\t\t\t\tversion: $.os.wechat.version\n\t\t\t});\n\t\t\tclassList.add('mui-wechat');\n\t\t}\n\t\tif (os.length) {\n\t\t\t$.each(os, function(index, osObj) {\n\t\t\t\tvar version = '';\n\t\t\t\tvar classArray = [];\n\t\t\t\tif (osObj.version) {\n\t\t\t\t\t$.each(osObj.version.split('.'), function(i, v) {\n\t\t\t\t\t\tversion = version + (version ? '-' : '') + v;\n\t\t\t\t\t\tclassList.add($.className(osObj.os + '-' + version));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n})(mui);\n/**\n * mui.init 5+\n * @param {type} $\n * @returns {undefined}\n */\n(function($) {\n\tvar defaultOptions = {\n\t\tswipeBack: false,\n\t\tpreloadPages: [], //5+ lazyLoad webview\n\t\tpreloadLimit: 10, //预加载窗口的数量限制(一旦超出，先进先出)\n\t\tkeyEventBind: {\n\t\t\tbackbutton: true,\n\t\t\tmenubutton: true\n\t\t}\n\t};\n\n\t//默认页面动画\n\tvar defaultShow = {\n\t\tautoShow: true,\n\t\tduration: $.os.ios ? 200 : 100,\n\t\taniShow: 'slide-in-right'\n\t};\n\t//若执行了显示动画初始化操作，则要覆盖默认配置\n\tif ($.options.show) {\n\t\tdefaultShow = $.extend(true, defaultShow, $.options.show);\n\t}\n\n\t$.currentWebview = null;\n\t$.isHomePage = false;\n\n\t$.extend(true, $.global, defaultOptions);\n\t$.extend(true, $.options, defaultOptions);\n\t/**\n\t * 等待动画配置\n\t * @param {type} options\n\t * @returns {Object}\n\t */\n\t$.waitingOptions = function(options) {\n\t\treturn $.extend(true, {}, {\n\t\t\tautoShow: true,\n\t\t\ttitle: '',\n\t\t\tmodal:false\n\t\t}, options);\n\t};\n\t/**\n\t * 窗口显示配置\n\t * @param {type} options\n\t * @returns {Object}\n\t */\n\t$.showOptions = function(options) {\n\t\treturn $.extend(true, {}, defaultShow, options);\n\t};\n\t/**\n\t * 窗口默认配置\n\t * @param {type} options\n\t * @returns {Object}\n\t */\n\t$.windowOptions = function(options) {\n\t\treturn $.extend({\n\t\t\tscalable: false,\n\t\t\tbounce: \"\" //vertical\n\t\t}, options);\n\t};\n\t/**\n\t * plusReady\n\t * @param {type} callback\n\t * @returns {_L6.$}\n\t */\n\t$.plusReady = function(callback) {\n\t\tif (window.plus) {\n\t\t\tsetTimeout(function() { //解决callback与plusready事件的执行时机问题(典型案例:showWaiting,closeWaiting)\n\t\t\t\tcallback();\n\t\t\t}, 0);\n\t\t} else {\n\t\t\tdocument.addEventListener(\"plusready\", function() {\n\t\t\t\tcallback();\n\t\t\t}, false);\n\t\t}\n\t\treturn this;\n\t};\n\t/**\n\t * 5+ event(5+没提供之前我自己实现)\n\t * @param {type} webview\n\t * @param {type} eventType\n\t * @param {type} data\n\t * @returns {undefined}\n\t */\n\t$.fire = function(webview, eventType, data) {\n\t\tif (webview) {\n\t\t\tif (data !== '') {\n\t\t\t\tdata = data || {};\n\t\t\t\tif ($.isPlainObject(data)) {\n\t\t\t\t\tdata = JSON.stringify(data || {}).replace(/\\'/g, \"\\\\u0027\").replace(/\\\\/g, \"\\\\u005c\");\n\t\t\t\t}\n\t\t\t}\n\t\t\twebview.evalJS(\"typeof mui!=='undefined'&&mui.receive('\" + eventType + \"','\" + data + \"')\");\n\t\t}\n\t};\n\t/**\n\t * 5+ event(5+没提供之前我自己实现)\n\t * @param {type} eventType\n\t * @param {type} data\n\t * @returns {undefined}\n\t */\n\t$.receive = function(eventType, data) {\n\t\tif (eventType) {\n\t\t\ttry {\n\t\t\t\tif (data) {\n\t\t\t\t\tdata = JSON.parse(data);\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\t\t\t$.trigger(document, eventType, data);\n\t\t}\n\t};\n\tvar triggerPreload = function(webview) {\n\t\tif (!webview.preloaded) {\n\t\t\t$.fire(webview, 'preload');\n\t\t\tvar list = webview.children();\n\t\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\t\t$.fire(list[i], 'preload');\n\t\t\t}\n\t\t\twebview.preloaded = true;\n\t\t}\n\t};\n\tvar trigger = function(webview, eventType, timeChecked) {\n\t\tif (timeChecked) {\n\t\t\tif (!webview[eventType + 'ed']) {\n\t\t\t\t$.fire(webview, eventType);\n\t\t\t\tvar list = webview.children();\n\t\t\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\t\t\t$.fire(list[i], eventType);\n\t\t\t\t}\n\t\t\t\twebview[eventType + 'ed'] = true;\n\t\t\t}\n\t\t} else {\n\t\t\t$.fire(webview, eventType);\n\t\t\tvar list = webview.children();\n\t\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\t\t$.fire(list[i], eventType);\n\t\t\t}\n\t\t}\n\n\t};\n\t/**\n\t * 打开新窗口\n\t * @param {string} url 要打开的页面地址\n\t * @param {string} id 指定页面ID\n\t * @param {object} options 可选:参数,等待,窗口,显示配置{params:{},waiting:{},styles:{},show:{}}\n\t */\n\t$.openWindow = function(url, id, options) {\n\t\tif (typeof url === 'object') {\n\t\t\toptions = url;\n\t\t\turl = options.url;\n\t\t\tid = options.id || url;\n\t\t} else {\n\t\t\tif (typeof id === 'object') {\n\t\t\t\toptions = id;\n\t\t\t\tid = url;\n\t\t\t} else {\n\t\t\t\tid = id || url;\n\t\t\t}\n\t\t}\n\t\tif (!$.os.plus) {\n\t\t\t//TODO 先临时这么处理：手机上顶层跳，PC上parent跳\n\t\t\tif ($.os.ios || $.os.android) {\n\t\t\t\twindow.top.location.href = url;\n\t\t\t} else {\n\t\t\t\twindow.parent.location.href = url;\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tif (!window.plus) {\n\t\t\treturn;\n\t\t}\n\n\t\toptions = options || {};\n\t\tvar params = options.params || {};\n\t\tvar webview = null,\n\t\t\twebviewCache = null,\n\t\t\tnShow, nWaiting;\n\n\t\tif ($.webviews[id]) {\n\t\t\twebviewCache = $.webviews[id];\n\t\t\t//webview真实存在，才能获取\n\t\t\tif (plus.webview.getWebviewById(id)) {\n\t\t\t\twebview = webviewCache.webview;\n\t\t\t}\n\t\t}\n\n\t\tif (webviewCache && webview) { //已缓存\n\t\t\t//每次show都需要传递动画参数；\n\t\t\t//预加载的动画参数优先级：openWindow配置>preloadPages配置>mui默认配置；\n\t\t\tnShow = webviewCache.show;\n\t\t\tnShow = options.show ? $.extend(nShow, options.show) : nShow;\n\t\t\twebview.show(nShow.aniShow, nShow.duration, function() {\n\t\t\t\ttriggerPreload(webview);\n\t\t\t\ttrigger(webview, 'pagebeforeshow', false);\n\t\t\t});\n\n\t\t\twebviewCache.afterShowMethodName && webview.evalJS(webviewCache.afterShowMethodName + '(\\'' + JSON.stringify(params) + '\\')');\n\t\t\treturn webview;\n\t\t} else { //新窗口\n\t\t\tif (options.createNew !== true) {\n\t\t\t\twebview = plus.webview.getWebviewById(id);\n\t\t\t\tif (webview) { //如果已存在\n\t\t\t\t\tnShow = $.showOptions(options.show);\n\t\t\t\t\tnShow.autoShow && webview.show(nShow.aniShow, nShow.duration, function() {\n\t\t\t\t\t\ttriggerPreload(webview);\n\t\t\t\t\t\ttrigger(webview, 'pagebeforeshow', false);\n\t\t\t\t\t});\n\t\t\t\t\treturn webview;\n\t\t\t\t} else {\n\t\t\t\t\tif (!url) {\n\t\t\t\t\t\tthrow new Error('webview[' + id + '] does not exist');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t//显示waiting\n\t\t\tvar waitingConfig = $.waitingOptions(options.waiting);\n\t\t\tif (waitingConfig.autoShow) {\n\t\t\t\tnWaiting = plus.nativeUI.showWaiting(waitingConfig.title, waitingConfig.options);\n\t\t\t}\n\t\t\t//创建页面\n\t\t\toptions = $.extend(options, {\n\t\t\t\tid: id,\n\t\t\t\turl: url\n\t\t\t});\n\n\t\t\twebview = $.createWindow(options);\n\t\t\t//显示\n\t\t\tnShow = $.showOptions(options.show);\n\t\t\tif (nShow.autoShow) {\n\t\t\t\tvar showWebview = function() {\n\t\t\t\t\t//关闭等待框\n\t\t\t\t\tif (nWaiting) {\n\t\t\t\t\t\tnWaiting.close();\n\t\t\t\t\t}\n\t\t\t\t\t//显示页面\n\t\t\t\t\twebview.show(nShow.aniShow, nShow.duration, function() {\n\t\t\t\t\t\ttriggerPreload(webview);\n\t\t\t\t\t\ttrigger(webview, 'pagebeforeshow', false);\n\t\t\t\t\t});\n\t\t\t\t\twebview.showed = true;\n\t\t\t\t\toptions.afterShowMethodName && webview.evalJS(options.afterShowMethodName + '(\\'' + JSON.stringify(params) + '\\')');\n\t\t\t\t};\n\t\t\t\tif (!url) {\n\t\t\t\t\tshowWebview();\n\t\t\t\t} else {\n\t\t\t\t\t// webview.addEventListener(\"loaded\", showWebview, false);\n\t\t\t\t\t//titleUpdate触发时机早于loaded，更换为titleUpdate后，可以更早的显示webview\n\t\t\t\t\twebview.addEventListener(\"titleUpdate\", showWebview, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn webview;\n\t};\n\t/**\n\t * 根据配置信息创建一个webview\n\t * @param {type} options\n\t * @param {type} isCreate\n\t * @returns {webview}\n\t */\n\t$.createWindow = function(options, isCreate) {\n\t\tif (!window.plus) {\n\t\t\treturn;\n\t\t}\n\t\tvar id = options.id || options.url;\n\t\tvar webview;\n\t\tif (options.preload) {\n\t\t\tif ($.webviews[id] && $.webviews[id].webview.getURL()) { //已经cache\n\t\t\t\twebview = $.webviews[id].webview;\n\t\t\t} else { //新增预加载窗口\n\t\t\t\t//preload\n\t\t\t\t//判断是否携带createNew参数，默认为false\n\t\t\t\tif (options.createNew !== true) {\n\t\t\t\t\twebview = plus.webview.getWebviewById(id);\n\t\t\t\t}\n\n\t\t\t\t//之前没有，那就新创建\t\n\t\t\t\tif (!webview) {\n\t\t\t\t\twebview = plus.webview.create(options.url, id, $.windowOptions(options.styles), $.extend({\n\t\t\t\t\t\tpreload: true\n\t\t\t\t\t}, options.extras));\n\t\t\t\t\tif (options.subpages) {\n\t\t\t\t\t\t$.each(options.subpages, function(index, subpage) {\n\t\t\t\t\t\t\tvar subpageId = subpage.id || subpage.url;\n\t\t\t\t\t\t\tif (subpageId) { //过滤空对象\n\t\t\t\t\t\t\t\tvar subWebview = plus.webview.getWebviewById(subpageId);\n\t\t\t\t\t\t\t\tif (!subWebview) { //如果该webview不存在，则创建\n\t\t\t\t\t\t\t\t\tsubWebview = plus.webview.create(subpage.url, subpageId, $.windowOptions(subpage.styles), $.extend({\n\t\t\t\t\t\t\t\t\t\tpreload: true\n\t\t\t\t\t\t\t\t\t}, subpage.extras));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\twebview.append(subWebview);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//TODO 理论上，子webview也应该计算到预加载队列中，但这样就麻烦了，要退必须退整体，否则可能出现问题；\n\t\t\t$.webviews[id] = {\n\t\t\t\twebview: webview, //目前仅preload的缓存webview\n\t\t\t\tpreload: true,\n\t\t\t\tshow: $.showOptions(options.show),\n\t\t\t\tafterShowMethodName: options.afterShowMethodName //就不应该用evalJS。应该是通过事件消息通讯\n\t\t\t};\n\t\t\t//索引该预加载窗口\n\t\t\tvar preloads = $.data.preloads;\n\t\t\tvar index = preloads.indexOf(id);\n\t\t\tif (~index) { //删除已存在的(变相调整插入位置)\n\t\t\t\tpreloads.splice(index, 1);\n\t\t\t}\n\t\t\tpreloads.push(id);\n\t\t\tif (preloads.length > $.options.preloadLimit) {\n\t\t\t\t//先进先出\n\t\t\t\tvar first = $.data.preloads.shift();\n\t\t\t\tvar webviewCache = $.webviews[first];\n\t\t\t\tif (webviewCache && webviewCache.webview) {\n\t\t\t\t\t//需要将自己打开的所有页面，全部close；\n\t\t\t\t\t//关闭该预加载webview\t\n\t\t\t\t\t$.closeAll(webviewCache.webview);\n\t\t\t\t}\n\t\t\t\t//删除缓存\n\t\t\t\tdelete $.webviews[first];\n\t\t\t}\n\t\t} else {\n\t\t\tif (isCreate !== false) { //直接创建非预加载窗口\n\t\t\t\twebview = plus.webview.create(options.url, id, $.windowOptions(options.styles), options.extras);\n\t\t\t\tif (options.subpages) {\n\t\t\t\t\t$.each(options.subpages, function(index, subpage) {\n\t\t\t\t\t\tvar subpageId = subpage.id || subpage.url;\n\t\t\t\t\t\tvar subWebview = plus.webview.getWebviewById(subpageId);\n\t\t\t\t\t\tif (!subWebview) {\n\t\t\t\t\t\t\tsubWebview = plus.webview.create(subpage.url, subpageId, $.windowOptions(subpage.styles), subpage.extras);\n\t\t\t\t\t\t}\n\t\t\t\t\t\twebview.append(subWebview);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn webview;\n\t};\n\n\t/**\n\t * 预加载\n\t */\n\t$.preload = function(options) {\n\t\t//调用预加载函数，不管是否传递preload参数，强制变为true\n\t\tif (!options.preload) {\n\t\t\toptions.preload = true;\n\t\t}\n\t\treturn $.createWindow(options);\n\t};\n\n\t/**\n\t *关闭当前webview打开的所有webview；\n\t */\n\t$.closeOpened = function(webview) {\n\t\tvar opened = webview.opened();\n\t\tif (opened) {\n\t\t\tfor (var i = 0, len = opened.length; i < len; i++) {\n\t\t\t\tvar openedWebview = opened[i];\n\t\t\t\tvar open_open = openedWebview.opened();\n\t\t\t\tif (open_open && open_open.length > 0) {\n\t\t\t\t\t$.closeOpened(openedWebview);\n\t\t\t\t} else {\n\t\t\t\t\t//如果直接孩子节点，就不用关闭了，因为父关闭的时候，会自动关闭子；\n\t\t\t\t\tif (openedWebview.parent() !== webview) {\n\t\t\t\t\t\topenedWebview.close('none');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t$.closeAll = function(webview, aniShow) {\n\t\t$.closeOpened(webview);\n\t\tif (aniShow) {\n\t\t\twebview.close(aniShow);\n\t\t} else {\n\t\t\twebview.close();\n\t\t}\n\t};\n\n\t/**\n\t * 批量创建webview\n\t * @param {type} options\n\t * @returns {undefined}\n\t */\n\t$.createWindows = function(options) {\n\t\t$.each(options, function(index, option) {\n\t\t\t//初始化预加载窗口(创建)和非预加载窗口(仅配置，不创建)\n\t\t\t$.createWindow(option, false);\n\t\t});\n\t};\n\t/**\n\t * 创建当前页面的子webview\n\t * @param {type} options\n\t * @returns {webview}\n\t */\n\t$.appendWebview = function(options) {\n\t\tif (!window.plus) {\n\t\t\treturn;\n\t\t}\n\t\tvar id = options.id || options.url;\n\t\tvar webview;\n\t\tif (!$.webviews[id]) { //保证执行一遍\n\t\t\t//TODO 这里也有隐患，比如某个webview不是作为subpage创建的，而是作为target webview的话；\n\t\t\tif (!plus.webview.getWebviewById(id)) {\n\t\t\t\twebview = plus.webview.create(options.url, id, options.styles, options.extras);\n\t\t\t}\n\t\t\t//之前的实现方案：子窗口loaded之后再append到父窗口中；\n\t\t\t//问题：部分子窗口loaded事件发生较晚，此时执行父窗口的children方法会返回空，导致父子通讯失败；\n\t\t\t//     比如父页面执行完preload事件后，需触发子页面的preload事件，此时未append的话，就无法触发；\n\t\t\t//修改方式：不再监控loaded事件，直接append\n\t\t\t//by chb@20150521\n\t\t\t// webview.addEventListener('loaded', function() {\n\t\t\tplus.webview.currentWebview().append(webview);\n\t\t\t// });\n\t\t\t$.webviews[id] = options;\n\n\t\t}\n\t\treturn webview;\n\t};\n\n\t//全局webviews\n\t$.webviews = {};\n\t//预加载窗口索引\n\t$.data.preloads = [];\n\t//$.currentWebview\n\t$.plusReady(function() {\n\t\t$.currentWebview = plus.webview.currentWebview();\n\t});\n\t$.addInit({\n\t\tname: '5+',\n\t\tindex: 100,\n\t\thandle: function() {\n\t\t\tvar options = $.options;\n\t\t\tvar subpages = options.subpages || [];\n\t\t\tif ($.os.plus) {\n\t\t\t\t$.plusReady(function() {\n\t\t\t\t\t//TODO  这里需要判断一下，最好等子窗口加载完毕后，再调用主窗口的show方法；\n\t\t\t\t\t//或者：在openwindow方法中，监听实现；\n\t\t\t\t\t$.each(subpages, function(index, subpage) {\n\t\t\t\t\t\t$.appendWebview(subpage);\n\t\t\t\t\t});\n\t\t\t\t\t//判断是否首页\n\t\t\t\t\tif (plus.webview.currentWebview() === plus.webview.getWebviewById(plus.runtime.appid)) {\n\t\t\t\t\t\t$.isHomePage = true;\n\t\t\t\t\t\t//首页需要自己激活预加载；\n\t\t\t\t\t\t//timeout因为子页面loaded之后才append的，防止子页面尚未append、从而导致其preload未触发的问题；\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\ttriggerPreload(plus.webview.currentWebview());\n\t\t\t\t\t\t}, 300);\n\t\t\t\t\t}\n\t\t\t\t\t//设置ios顶部状态栏颜色；\n\t\t\t\t\tif ($.os.ios && $.options.statusBarBackground) {\n\t\t\t\t\t\tplus.navigator.setStatusBarBackground($.options.statusBarBackground);\n\t\t\t\t\t}\n\t\t\t\t\tif ($.os.android && parseFloat($.os.version) < 4.4) {\n\t\t\t\t\t\t//解决Android平台4.4版本以下，resume后，父窗体标题延迟渲染的问题；\n\t\t\t\t\t\tif (plus.webview.currentWebview().parent() == null) {\n\t\t\t\t\t\t\tdocument.addEventListener(\"resume\", function() {\n\t\t\t\t\t\t\t\tvar body = document.body;\n\t\t\t\t\t\t\t\tbody.style.display = 'none';\n\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\tbody.style.display = '';\n\t\t\t\t\t\t\t\t}, 10);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t//已支持iframe嵌入\n\t\t\t\t//\t\t\t\tif (subpages.length > 0) {\n\t\t\t\t//\t\t\t\t\tvar err = document.createElement('div');\n\t\t\t\t//\t\t\t\t\terr.className = 'mui-error';\n\t\t\t\t//\t\t\t\t\t//文字描述\n\t\t\t\t//\t\t\t\t\tvar span = document.createElement('span');\n\t\t\t\t//\t\t\t\t\tspan.innerHTML = '在该浏览器下，不支持创建子页面，具体参考';\n\t\t\t\t//\t\t\t\t\terr.appendChild(span);\n\t\t\t\t//\t\t\t\t\tvar a = document.createElement('a');\n\t\t\t\t//\t\t\t\t\ta.innerHTML = '\"mui框架适用场景\"';\n\t\t\t\t//\t\t\t\t\ta.href = 'http://ask.dcloud.net.cn/article/113';\n\t\t\t\t//\t\t\t\t\terr.appendChild(a);\n\t\t\t\t//\t\t\t\t\tdocument.body.appendChild(err);\n\t\t\t\t//\t\t\t\t\tconsole.log('在该浏览器下，不支持创建子页面');\n\t\t\t\t//\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\t});\n\twindow.addEventListener('preload', function() {\n\t\t//处理预加载部分\n\t\tvar webviews = $.options.preloadPages || [];\n\t\t$.plusReady(function() {\n\t\t\t$.each(webviews, function(index, webview) {\n\t\t\t\t$.createWindow($.extend(webview, {\n\t\t\t\t\tpreload: true\n\t\t\t\t}));\n\t\t\t});\n\n\t\t});\n\t});\n\t$.supportStatusbarOffset = function() {\n\t\treturn $.os.plus && $.os.ios && parseFloat($.os.version) >= 7;\n\t};\n\t$.ready(function() {\n\t\t//标识当前环境支持statusbar\n\t\tif ($.supportStatusbarOffset()) {\n\t\t\tdocument.body.classList.add('mui-statusbar');\n\t\t}\n\t});\n})(mui);\n/**\n * mui back\n * @param {type} $\n * @param {type} window\n * @returns {undefined}\n */\n(function($, window) {\n\t/**\n\t * register back\n\t * @param {type} back\n\t * @returns {$.gestures}\n\t */\n\t$.addBack = function(back) {\n\t\treturn $.addAction('backs', back);\n\t};\n\t/**\n\t * default\n\t */\n\t$.addBack({\n\t\tname: 'browser',\n\t\tindex: 100,\n\t\thandle: function() {\n\t\t\tif (window.history.length > 1) {\n\t\t\t\twindow.history.back();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t});\n\t/**\n\t * 后退\n\t */\n\t$.back = function() {\n\t\tif (typeof $.options.beforeback === 'function') {\n\t\t\tif ($.options.beforeback() === false) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t$.doAction('backs');\n\t};\n\twindow.addEventListener('tap', function(e) {\n\t\tvar action = $.targets.action;\n\t\tif (action && action.classList.contains('mui-action-back')) {\n\t\t\t$.back();\r\n\t\t\t$.targets.action = false;\n\t\t}\n\t});\n\twindow.addEventListener('swiperight', function(e) {\n\t\tvar detail = e.detail;\n\t\tif ($.options.swipeBack === true && Math.abs(detail.angle) < 3) {\n\t\t\t$.back();\n\t\t}\n\t});\n\n})(mui, window);\n/**\n * mui back 5+\n * @param {type} $\n * @param {type} window\n * @returns {undefined}\n */\n(function($, window) {\n\tif ($.os.plus && $.os.android) {\n\t\t$.addBack({\n\t\t\tname: 'mui',\n\t\t\tindex: 5,\n\t\t\thandle: function() {\n\t\t\t\t//后续重新设计此处，将back放到各个空间内部实现\n\t\t\t\t//popover\n\t\t\t\tif ($.targets._popover && $.targets._popover.classList.contains('mui-active')) {\n\t\t\t\t\t$($.targets._popover).popover('hide');\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t//offcanvas\n\t\t\t\tvar offCanvas = document.querySelector('.mui-off-canvas-wrap.mui-active');\n\t\t\t\tif (offCanvas) {\n\t\t\t\t\t$(offCanvas).offCanvas('close');\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tvar previewImage = $.isFunction($.getPreviewImage) && $.getPreviewImage();\n\t\t\t\tif (previewImage && previewImage.isShown()) {\n\t\t\t\t\tpreviewImage.close();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t//popup\n\t\t\t\treturn $.closePopup();\n\t\t\t}\n\t\t});\n\t}\n\t//首次按下back按键的时间\n\t$.__back__first = null;\n\t/**\n\t * 5+ back\n\t */\n\t$.addBack({\n\t\tname: '5+',\n\t\tindex: 10,\n\t\thandle: function() {\n\t\t\tif (!window.plus) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar wobj = plus.webview.currentWebview();\n\t\t\tvar parent = wobj.parent();\n\t\t\tif (parent) {\n\t\t\t\tparent.evalJS('mui&&mui.back();');\n\t\t\t} else {\n\t\t\t\twobj.canBack(function(e) {\n\t\t\t\t\t//by chb 暂时注释，在碰到类似popover之类的锚点的时候，需多次点击才能返回；\n\t\t\t\t\tif (e.canBack) { //webview history back\n\t\t\t\t\t\twindow.history.back();\n\t\t\t\t\t} else { //webview close or hide\n\t\t\t\t\t\t//fixed by fxy 此处不应该用opener判断，因为用户有可能自己close掉当前窗口的opener。这样的话。opener就为空了，导致不能执行close\n\t\t\t\t\t\tif (wobj.id === plus.runtime.appid) { //首页\n\t\t\t\t\t\t\t//首页不存在opener的情况下，后退实际上应该是退出应用；\n\t\t\t\t\t\t\t//首次按键，提示‘再按一次退出应用’\n\t\t\t\t\t\t\tif (!$.__back__first) {\n\t\t\t\t\t\t\t\t$.__back__first = new Date().getTime();\n\t\t\t\t\t\t\t\tmui.toast('再按一次退出应用');\n\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\t$.__back__first = null;\n\t\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (new Date().getTime() - $.__back__first < 2000) {\n\t\t\t\t\t\t\t\t\tplus.runtime.quit();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else { //其他页面，\n\t\t\t\t\t\t\tif (wobj.preload) {\n\t\t\t\t\t\t\t\twobj.hide(\"auto\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t//关闭页面时，需要将其打开的所有子页面全部关闭；\n\t\t\t\t\t\t\t\t$.closeAll(wobj);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t});\n\n\n\t$.menu = function() {\n\t\tvar menu = document.querySelector('.mui-action-menu');\n\t\tif (menu) {\n\t\t\t$.trigger(menu, $.EVENT_START); //临时处理menu无touchstart的话，找不到当前targets的问题\n\t\t\t$.trigger(menu, 'tap');\n\t\t} else { //执行父窗口的menu\n\t\t\tif (window.plus) {\n\t\t\t\tvar wobj = $.currentWebview;\n\t\t\t\tvar parent = wobj.parent();\n\t\t\t\tif (parent) { //又得evalJS\n\t\t\t\t\tparent.evalJS('mui&&mui.menu();');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tvar __back = function() {\n\t\t$.back();\n\t};\n\tvar __menu = function() {\n\t\t$.menu();\n\t};\n\t//默认监听\n\t$.plusReady(function() {\n\t\tif ($.options.keyEventBind.backbutton) {\n\t\t\tplus.key.addEventListener('backbutton', __back, false);\n\t\t}\n\t\tif ($.options.keyEventBind.menubutton) {\n\t\t\tplus.key.addEventListener('menubutton', __menu, false);\n\t\t}\n\t});\n\t//处理按键监听事件\n\t$.addInit({\n\t\tname: 'keyEventBind',\n\t\tindex: 1000,\n\t\thandle: function() {\n\t\t\t$.plusReady(function() {\n\t\t\t\t//如果不为true，则移除默认监听\n\t\t\t\tif (!$.options.keyEventBind.backbutton) {\n\t\t\t\t\tplus.key.removeEventListener('backbutton', __back);\n\t\t\t\t}\n\t\t\t\tif (!$.options.keyEventBind.menubutton) {\n\t\t\t\t\tplus.key.removeEventListener('menubutton', __menu);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n})(mui, window);\n/**\n * mui.init pulldownRefresh\n * @param {type} $\n * @returns {undefined}\n */\n(function($) {\n\t$.addInit({\n\t\tname: 'pullrefresh',\n\t\tindex: 1000,\n\t\thandle: function() {\n\t\t\tvar options = $.options;\n\t\t\tvar pullRefreshOptions = options.pullRefresh || {};\n\t\t\tvar hasPulldown = pullRefreshOptions.down && pullRefreshOptions.down.hasOwnProperty('callback');\n\t\t\tvar hasPullup = pullRefreshOptions.up && pullRefreshOptions.up.hasOwnProperty('callback');\n\t\t\tif (hasPulldown || hasPullup) {\n\t\t\t\tvar container = pullRefreshOptions.container;\n\t\t\t\tif (container) {\n\t\t\t\t\tvar $container = $(container);\n\t\t\t\t\tif ($container.length === 1) {\n\t\t\t\t\t\tif ($.os.plus && $.os.android) { //android 5+\n\t\t\t\t\t\t\t$.plusReady(function() {\n\t\t\t\t\t\t\t\tvar webview = plus.webview.currentWebview();\n\t\t\t\t\t\t\t\tif (hasPullup) {\n\t\t\t\t\t\t\t\t\t//当前页面初始化pullup\n\t\t\t\t\t\t\t\t\tvar upOptions = {};\n\t\t\t\t\t\t\t\t\tupOptions.up = pullRefreshOptions.up;\n\t\t\t\t\t\t\t\t\tupOptions.webviewId = webview.id || webview.getURL();\n\t\t\t\t\t\t\t\t\t$container.pullRefresh(upOptions);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (hasPulldown) {\n\t\t\t\t\t\t\t\t\tvar parent = webview.parent();\n\t\t\t\t\t\t\t\t\tvar id = webview.id || webview.getURL();\n\t\t\t\t\t\t\t\t\tif (parent) {\n\t\t\t\t\t\t\t\t\t\tif (!hasPullup) { //如果没有上拉加载，需要手动初始化一个默认的pullRefresh，以便当前页面容器可以调用endPulldownToRefresh等方法\n\t\t\t\t\t\t\t\t\t\t\t$container.pullRefresh({\n\t\t\t\t\t\t\t\t\t\t\t\twebviewId: id\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tvar downOptions = {\n\t\t\t\t\t\t\t\t\t\t\twebviewId: id\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\tdownOptions.down = $.extend({}, pullRefreshOptions.down);\n\t\t\t\t\t\t\t\t\t\tdownOptions.down.callback = '_CALLBACK';\n\t\t\t\t\t\t\t\t\t\t//父页面初始化pulldown\n\t\t\t\t\t\t\t\t\t\tparent.evalJS(\"mui&&mui(document.querySelector('.mui-content')).pullRefresh('\" + JSON.stringify(downOptions) + \"')\");\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$container.pullRefresh(pullRefreshOptions);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n})(mui);\n/**\n * mui ajax\n * @param {type} $\n * @returns {undefined}\n */\n(function($, window, undefined) {\n\n\tvar jsonType = 'application/json';\n\tvar htmlType = 'text/html';\n\tvar rscript = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi;\n\tvar scriptTypeRE = /^(?:text|application)\\/javascript/i;\n\tvar xmlTypeRE = /^(?:text|application)\\/xml/i;\n\tvar blankRE = /^\\s*$/;\n\n\t$.ajaxSettings = {\n\t\ttype: 'GET',\n\t\tbeforeSend: $.noop,\n\t\tsuccess: $.noop,\n\t\terror: $.noop,\n\t\tcomplete: $.noop,\n\t\tcontext: null,\n\t\txhr: function(protocol) {\n\t\t\treturn new window.XMLHttpRequest();\n\t\t},\n\t\taccepts: {\n\t\t\tscript: 'text/javascript, application/javascript, application/x-javascript',\n\t\t\tjson: jsonType,\n\t\t\txml: 'application/xml, text/xml',\n\t\t\thtml: htmlType,\n\t\t\ttext: 'text/plain'\n\t\t},\n\t\ttimeout: 0,\n\t\tprocessData: true,\n\t\tcache: true\n\t};\n\tvar ajaxBeforeSend = function(xhr, settings) {\n\t\tvar context = settings.context\n\t\tif (settings.beforeSend.call(context, xhr, settings) === false) {\n\t\t\treturn false;\n\t\t}\n\t};\n\tvar ajaxSuccess = function(data, xhr, settings) {\n\t\tsettings.success.call(settings.context, data, 'success', xhr);\n\t\tajaxComplete('success', xhr, settings);\n\t};\n\t// type: \"timeout\", \"error\", \"abort\", \"parsererror\"\n\tvar ajaxError = function(error, type, xhr, settings) {\n\t\tsettings.error.call(settings.context, xhr, type, error);\n\t\tajaxComplete(type, xhr, settings);\n\t};\n\t// status: \"success\", \"notmodified\", \"error\", \"timeout\", \"abort\", \"parsererror\"\n\tvar ajaxComplete = function(status, xhr, settings) {\n\t\tsettings.complete.call(settings.context, xhr, status);\n\t};\n\n\tvar serialize = function(params, obj, traditional, scope) {\n\t\tvar type, array = $.isArray(obj),\n\t\t\thash = $.isPlainObject(obj);\n\t\t$.each(obj, function(key, value) {\n\t\t\ttype = $.type(value);\n\t\t\tif (scope) {\n\t\t\t\tkey = traditional ? scope :\n\t\t\t\t\tscope + '[' + (hash || type === 'object' || type === 'array' ? key : '') + ']';\n\t\t\t}\n\t\t\t// handle data in serializeArray() format\n\t\t\tif (!scope && array) {\n\t\t\t\tparams.add(value.name, value.value);\n\t\t\t}\n\t\t\t// recurse into nested objects\n\t\t\telse if (type === \"array\" || (!traditional && type === \"object\")) {\n\t\t\t\tserialize(params, value, traditional, key);\n\t\t\t} else {\n\t\t\t\tparams.add(key, value);\n\t\t\t}\n\t\t});\n\t};\n\tvar serializeData = function(options) {\n\t\tif (options.processData && options.data && typeof options.data !== \"string\") {\n\t\t\toptions.data = $.param(options.data, options.traditional);\n\t\t}\n\t\tif (options.data && (!options.type || options.type.toUpperCase() === 'GET')) {\n\t\t\toptions.url = appendQuery(options.url, options.data);\n\t\t\toptions.data = undefined;\n\t\t}\n\t};\n\tvar appendQuery = function(url, query) {\n\t\tif (query === '') {\n\t\t\treturn url;\n\t\t}\n\t\treturn (url + '&' + query).replace(/[&?]{1,2}/, '?');\n\t};\n\tvar mimeToDataType = function(mime) {\n\t\tif (mime) {\n\t\t\tmime = mime.split(';', 2)[0];\n\t\t}\n\t\treturn mime && (mime === htmlType ? 'html' :\n\t\t\tmime === jsonType ? 'json' :\n\t\t\tscriptTypeRE.test(mime) ? 'script' :\n\t\t\txmlTypeRE.test(mime) && 'xml') || 'text';\n\t};\n\tvar parseArguments = function(url, data, success, dataType) {\n\t\tif ($.isFunction(data)) {\n\t\t\tdataType = success, success = data, data = undefined;\n\t\t}\n\t\tif (!$.isFunction(success)) {\n\t\t\tdataType = success, success = undefined;\n\t\t}\n\t\treturn {\n\t\t\turl: url,\n\t\t\tdata: data,\n\t\t\tsuccess: success,\n\t\t\tdataType: dataType\n\t\t};\n\t};\n\t$.ajax = function(url, options) {\n\t\tif (typeof url === \"object\") {\n\t\t\toptions = url;\n\t\t\turl = undefined;\n\t\t}\n\t\tvar settings = options || {};\n\t\tsettings.url = url || settings.url;\n\t\tfor (var key in $.ajaxSettings) {\n\t\t\tif (settings[key] === undefined) {\n\t\t\t\tsettings[key] = $.ajaxSettings[key];\n\t\t\t}\n\t\t}\n\t\tserializeData(settings);\n\t\tvar dataType = settings.dataType;\n\n\t\tif (settings.cache === false || ((!options || options.cache !== true) && ('script' === dataType))) {\n\t\t\tsettings.url = appendQuery(settings.url, '_=' + $.now());\n\t\t}\n\t\tvar mime = settings.accepts[dataType && dataType.toLowerCase()];\n\t\tvar headers = {};\n\t\tvar setHeader = function(name, value) {\n\t\t\theaders[name.toLowerCase()] = [name, value];\n\t\t};\n\t\tvar protocol = /^([\\w-]+:)\\/\\//.test(settings.url) ? RegExp.$1 : window.location.protocol;\n\t\tvar xhr = settings.xhr(settings);\n\t\tvar nativeSetHeader = xhr.setRequestHeader;\n\t\tvar abortTimeout;\n\n\t\tsetHeader('X-Requested-With', 'XMLHttpRequest');\n\t\tsetHeader('Accept', mime || '*/*');\n\t\tif (!!(mime = settings.mimeType || mime)) {\n\t\t\tif (mime.indexOf(',') > -1) {\n\t\t\t\tmime = mime.split(',', 2)[0];\n\t\t\t}\n\t\t\txhr.overrideMimeType && xhr.overrideMimeType(mime);\n\t\t}\n\t\tif (settings.contentType || (settings.contentType !== false && settings.data && settings.type.toUpperCase() !== 'GET')) {\n\t\t\tsetHeader('Content-Type', settings.contentType || 'application/x-www-form-urlencoded');\n\t\t}\n\t\tif (settings.headers) {\n\t\t\tfor (var name in settings.headers)\n\t\t\t\tsetHeader(name, settings.headers[name]);\n\t\t}\n\t\txhr.setRequestHeader = setHeader;\n\n\t\txhr.onreadystatechange = function() {\n\t\t\tif (xhr.readyState === 4) {\n\t\t\t\txhr.onreadystatechange = $.noop;\n\t\t\t\tclearTimeout(abortTimeout);\n\t\t\t\tvar result, error = false;\n\t\t\t\tvar isLocal = protocol === 'file:';\n\t\t\t\tif ((xhr.status >= 200 && xhr.status < 300) || xhr.status === 304 || (xhr.status === 0 && isLocal && xhr.responseText)) {\n\t\t\t\t\tdataType = dataType || mimeToDataType(settings.mimeType || xhr.getResponseHeader('content-type'));\n\t\t\t\t\tresult = xhr.responseText;\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// http://perfectionkills.com/global-eval-what-are-the-options/\n\t\t\t\t\t\tif (dataType === 'script') {\n\t\t\t\t\t\t\t(1, eval)(result);\n\t\t\t\t\t\t} else if (dataType === 'xml') {\n\t\t\t\t\t\t\tresult = xhr.responseXML;\n\t\t\t\t\t\t} else if (dataType === 'json') {\n\t\t\t\t\t\t\tresult = blankRE.test(result) ? null : $.parseJSON(result);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\terror = e;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\tajaxError(error, 'parsererror', xhr, settings);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tajaxSuccess(result, xhr, settings);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar status = xhr.status ? 'error' : 'abort';\n\t\t\t\t\tvar statusText = xhr.statusText || null;\n\t\t\t\t\tif (isLocal) {\n\t\t\t\t\t\tstatus = 'error';\n\t\t\t\t\t\tstatusText = '404';\n\t\t\t\t\t}\n\t\t\t\t\tajaxError(statusText, status, xhr, settings);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tif (ajaxBeforeSend(xhr, settings) === false) {\n\t\t\txhr.abort();\n\t\t\tajaxError(null, 'abort', xhr, settings);\n\t\t\treturn xhr;\n\t\t}\n\n\t\tif (settings.xhrFields) {\n\t\t\tfor (var name in settings.xhrFields) {\n\t\t\t\txhr[name] = settings.xhrFields[name];\n\t\t\t}\n\t\t}\n\n\t\tvar async = 'async' in settings ? settings.async : true;\n\n\t\txhr.open(settings.type.toUpperCase(), settings.url, async, settings.username, settings.password);\n\n\t\tfor (var name in headers) {\n\t\t\tnativeSetHeader.apply(xhr, headers[name]);\n\t\t}\n\t\tif (settings.timeout > 0) {\n\t\t\tabortTimeout = setTimeout(function() {\n\t\t\t\txhr.onreadystatechange = $.noop;\n\t\t\t\txhr.abort();\n\t\t\t\tajaxError(null, 'timeout', xhr, settings);\n\t\t\t}, settings.timeout);\n\t\t}\n\t\txhr.send(settings.data ? settings.data : null);\n\t\treturn xhr;\n\t};\n\n\n\t$.param = function(obj, traditional) {\n\t\tvar params = [];\n\t\tparams.add = function(k, v) {\n\t\t\tthis.push(encodeURIComponent(k) + '=' + encodeURIComponent(v));\n\t\t};\n\t\tserialize(params, obj, traditional);\n\t\treturn params.join('&').replace(/%20/g, '+');\n\t};\n\t$.get = function( /* url, data, success, dataType */ ) {\n\t\treturn $.ajax(parseArguments.apply(null, arguments));\n\t};\n\n\t$.post = function( /* url, data, success, dataType */ ) {\n\t\tvar options = parseArguments.apply(null, arguments);\n\t\toptions.type = 'POST';\n\t\treturn $.ajax(options);\n\t};\n\n\t$.getJSON = function( /* url, data, success */ ) {\n\t\tvar options = parseArguments.apply(null, arguments);\n\t\toptions.dataType = 'json';\n\t\treturn $.ajax(options);\n\t};\n\n\t$.fn.load = function(url, data, success) {\n\t\tif (!this.length)\n\t\t\treturn this;\n\t\tvar self = this,\n\t\t\tparts = url.split(/\\s/),\n\t\t\tselector,\n\t\t\toptions = parseArguments(url, data, success),\n\t\t\tcallback = options.success;\n\t\tif (parts.length > 1)\n\t\t\toptions.url = parts[0], selector = parts[1];\n\t\toptions.success = function(response) {\n\t\t\tif (selector) {\n\t\t\t\tvar div = document.createElement('div');\n\t\t\t\tdiv.innerHTML = response.replace(rscript, \"\");\n\t\t\t\tvar selectorDiv = document.createElement('div');\n\t\t\t\tvar childs = div.querySelectorAll(selector);\n\t\t\t\tif (childs && childs.length > 0) {\n\t\t\t\t\tfor (var i = 0, len = childs.length; i < len; i++) {\n\t\t\t\t\t\tselectorDiv.appendChild(childs[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tself[0].innerHTML = selectorDiv.innerHTML;\n\t\t\t} else {\n\t\t\t\tself[0].innerHTML = response;\n\t\t\t}\n\t\t\tcallback && callback.apply(self, arguments);\n\t\t};\n\t\t$.ajax(options);\n\t\treturn this;\n\t};\n\n})(mui, window);\n/**\n * 5+ ajax\n */\n(function($) {\n\tvar originAnchor = document.createElement('a');\n\toriginAnchor.href = window.location.href;\n\t$.plusReady(function() {\n\t\t$.ajaxSettings = $.extend($.ajaxSettings, {\n\t\t\txhr: function(settings) {\n\t\t\t\tif (settings.crossDomain) { //强制使用plus跨域\n\t\t\t\t\treturn new plus.net.XMLHttpRequest();\n\t\t\t\t}\n\t\t\t\t//仅在webview的url为远程文件，且ajax请求的资源不同源下使用plus.net.XMLHttpRequest\n\t\t\t\tif (originAnchor.protocol !== 'file:') {\n\t\t\t\t\tvar urlAnchor = document.createElement('a');\n\t\t\t\t\turlAnchor.href = settings.url;\n\t\t\t\t\turlAnchor.href = urlAnchor.href;\n\t\t\t\t\tsettings.crossDomain = (originAnchor.protocol + '//' + originAnchor.host) !== (urlAnchor.protocol + '//' + urlAnchor.host);\n\t\t\t\t\tif (settings.crossDomain) {\n\t\t\t\t\t\treturn new plus.net.XMLHttpRequest();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn new window.XMLHttpRequest();\n\t\t\t}\n\t\t});\n\t});\n})(mui);\n/**\n * mui layout(offset[,position,width,height...])\n * @param {type} $\n * @param {type} window\n * @param {type} undefined\n * @returns {undefined}\n */\n(function($, window, undefined) {\n\t$.offset = function(element) {\n\t\tvar box = {\n\t\t\ttop : 0,\n\t\t\tleft : 0\n\t\t};\n\t\tif ( typeof element.getBoundingClientRect !== undefined) {\n\t\t\tbox = element.getBoundingClientRect();\n\t\t}\n\t\treturn {\n\t\t\ttop : box.top + window.pageYOffset - element.clientTop,\n\t\t\tleft : box.left + window.pageXOffset - element.clientLeft\n\t\t};\n\t};\n})(mui, window); \n/**\n * mui animation\n */\n(function($, window) {\n\t/**\n\t * scrollTo\n\t */\n\t$.scrollTo = function(scrollTop, duration, callback) {\n\t\tduration = duration || 1000;\n\t\tvar scroll = function(duration) {\n\t\t\tif (duration <= 0) {\n\t\t\t\twindow.scrollTo(0, scrollTop);\n\t\t\t\tcallback && callback();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar distaince = scrollTop - window.scrollY;\n\t\t\tsetTimeout(function() {\n\t\t\t\twindow.scrollTo(0, window.scrollY + distaince / duration * 10);\n\t\t\t\tscroll(duration - 10);\n\t\t\t}, 16.7);\n\t\t};\n\t\tscroll(duration);\n\t};\n\t$.animationFrame = function(cb) {\n\t\tvar args, isQueued, context;\n\t\treturn function() {\n\t\t\targs = arguments;\n\t\t\tcontext = this;\n\t\t\tif (!isQueued) {\n\t\t\t\tisQueued = true;\n\t\t\t\trequestAnimationFrame(function() {\n\t\t\t\t\tcb.apply(context, args);\n\t\t\t\t\tisQueued = false;\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t};\n\n})(mui, window);\n(function($) {\n\tvar initializing = false,\n\t\tfnTest = /xyz/.test(function() {\n\t\t\txyz;\n\t\t}) ? /\\b_super\\b/ : /.*/;\n\n\tvar Class = function() {};\n\tClass.extend = function(prop) {\n\t\tvar _super = this.prototype;\n\t\tinitializing = true;\n\t\tvar prototype = new this();\n\t\tinitializing = false;\n\t\tfor (var name in prop) {\n\t\t\tprototype[name] = typeof prop[name] == \"function\" &&\n\t\t\t\ttypeof _super[name] == \"function\" && fnTest.test(prop[name]) ?\n\t\t\t\t(function(name, fn) {\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\tvar tmp = this._super;\n\n\t\t\t\t\t\tthis._super = _super[name];\n\n\t\t\t\t\t\tvar ret = fn.apply(this, arguments);\n\t\t\t\t\t\tthis._super = tmp;\n\n\t\t\t\t\t\treturn ret;\n\t\t\t\t\t};\n\t\t\t\t})(name, prop[name]) :\n\t\t\t\tprop[name];\n\t\t}\n\t\tfunction Class() {\n\t\t\tif (!initializing && this.init)\n\t\t\t\tthis.init.apply(this, arguments);\n\t\t}\n\t\tClass.prototype = prototype;\n\t\tClass.prototype.constructor = Class;\n\t\tClass.extend = arguments.callee;\n\t\treturn Class;\n\t};\n\t$.Class = Class;\n})(mui);\n(function($, document, undefined) {\n\tvar CLASS_PULL_TOP_POCKET = 'mui-pull-top-pocket';\n\tvar CLASS_PULL_BOTTOM_POCKET = 'mui-pull-bottom-pocket';\n\tvar CLASS_PULL = 'mui-pull';\n\tvar CLASS_PULL_LOADING = 'mui-pull-loading';\n\tvar CLASS_PULL_CAPTION = 'mui-pull-caption';\n\tvar CLASS_PULL_CAPTION_DOWN = 'mui-pull-caption-down';\n\tvar CLASS_PULL_CAPTION_REFRESH = 'mui-pull-caption-refresh';\n\tvar CLASS_PULL_CAPTION_NOMORE = 'mui-pull-caption-nomore';\n\n\tvar CLASS_ICON = 'mui-icon';\n\tvar CLASS_SPINNER = 'mui-spinner';\n\tvar CLASS_ICON_PULLDOWN = 'mui-icon-pulldown';\n\n\tvar CLASS_BLOCK = 'mui-block';\n\tvar CLASS_HIDDEN = 'mui-hidden';\n\tvar CLASS_VISIBILITY = 'mui-visibility';\n\n\tvar CLASS_LOADING_UP = CLASS_PULL_LOADING + ' ' + CLASS_ICON + ' ' + CLASS_ICON_PULLDOWN;\n\tvar CLASS_LOADING_DOWN = CLASS_PULL_LOADING + ' ' + CLASS_ICON + ' ' + CLASS_ICON_PULLDOWN;\n\tvar CLASS_LOADING = CLASS_PULL_LOADING + ' ' + CLASS_ICON + ' ' + CLASS_SPINNER;\n\n\tvar pocketHtml = ['<div class=\"' + CLASS_PULL + '\">', '<div class=\"{icon}\"></div>', '<div class=\"' + CLASS_PULL_CAPTION + '\">{contentrefresh}</div>', '</div>'].join('');\n\n\tvar PullRefresh = {\n\t\tinit: function(element, options) {\n\t\t\tthis._super(element, $.extend(true, {\n\t\t\t\tscrollY: true,\n\t\t\t\tscrollX: false,\n\t\t\t\tindicators: true,\n\t\t\t\tdeceleration: 0.003,\n\t\t\t\tdown: {\n\t\t\t\t\theight: 50,\n\t\t\t\t\tcontentinit: '下拉可以刷新',\n\t\t\t\t\tcontentdown: '下拉可以刷新',\n\t\t\t\t\tcontentover: '释放立即刷新',\n\t\t\t\t\tcontentrefresh: '正在刷新...'\n\t\t\t\t},\n\t\t\t\tup: {\n\t\t\t\t\theight: 50,\n\t\t\t\t\tauto: false,\n\t\t\t\t\tcontentinit: '上拉显示更多',\n\t\t\t\t\tcontentdown: '上拉显示更多',\n\t\t\t\t\tcontentrefresh: '正在加载...',\n\t\t\t\t\tcontentnomore: '没有更多数据了',\n\t\t\t\t\tduration: 300\n\t\t\t\t}\n\t\t\t}, options));\n\t\t},\n\t\t_init: function() {\n\t\t\tthis._super();\n\t\t\tthis._initPocket();\n\t\t},\n\t\t_initPulldownRefresh: function() {\n\t\t\tthis.pulldown = true;\n\t\t\tthis.pullPocket = this.topPocket;\n\t\t\tthis.pullPocket.classList.add(CLASS_BLOCK);\n\t\t\tthis.pullPocket.classList.add(CLASS_VISIBILITY);\n\t\t\tthis.pullCaption = this.topCaption;\n\t\t\tthis.pullLoading = this.topLoading;\n\t\t},\n\t\t_initPullupRefresh: function() {\n\t\t\tthis.pulldown = false;\n\t\t\tthis.pullPocket = this.bottomPocket;\n\t\t\tthis.pullPocket.classList.add(CLASS_BLOCK);\n\t\t\tthis.pullPocket.classList.add(CLASS_VISIBILITY);\n\t\t\tthis.pullCaption = this.bottomCaption;\n\t\t\tthis.pullLoading = this.bottomLoading;\n\t\t},\n\t\t_initPocket: function() {\n\t\t\tvar options = this.options;\n\t\t\tif (options.down && options.down.hasOwnProperty('callback')) {\n\t\t\t\tthis.topPocket = this.scroller.querySelector('.' + CLASS_PULL_TOP_POCKET);\n\t\t\t\tif (!this.topPocket) {\n\t\t\t\t\tthis.topPocket = this._createPocket(CLASS_PULL_TOP_POCKET, options.down, CLASS_LOADING_DOWN);\n\t\t\t\t\tthis.wrapper.insertBefore(this.topPocket, this.wrapper.firstChild);\n\t\t\t\t}\n\t\t\t\tthis.topLoading = this.topPocket.querySelector('.' + CLASS_PULL_LOADING);\n\t\t\t\tthis.topCaption = this.topPocket.querySelector('.' + CLASS_PULL_CAPTION);\n\t\t\t}\n\t\t\tif (options.up && options.up.hasOwnProperty('callback')) {\n\t\t\t\tthis.bottomPocket = this.scroller.querySelector('.' + CLASS_PULL_BOTTOM_POCKET);\n\t\t\t\tif (!this.bottomPocket) {\n\t\t\t\t\tthis.bottomPocket = this._createPocket(CLASS_PULL_BOTTOM_POCKET, options.up, CLASS_LOADING);\n\t\t\t\t\tthis.scroller.appendChild(this.bottomPocket);\n\t\t\t\t}\n\t\t\t\tthis.bottomLoading = this.bottomPocket.querySelector('.' + CLASS_PULL_LOADING);\n\t\t\t\tthis.bottomCaption = this.bottomPocket.querySelector('.' + CLASS_PULL_CAPTION);\n\t\t\t\t//TODO only for h5\n\t\t\t\tthis.wrapper.addEventListener('scrollbottom', this);\n\t\t\t}\n\t\t},\n\t\t_createPocket: function(clazz, options, iconClass) {\n\t\t\tvar pocket = document.createElement('div');\n\t\t\tpocket.className = clazz;\n\t\t\tpocket.innerHTML = pocketHtml.replace('{contentrefresh}', options.contentinit).replace('{icon}', iconClass);\n\t\t\treturn pocket;\n\t\t},\n\t\t_resetPullDownLoading: function() {\n\t\t\tvar loading = this.pullLoading;\n\t\t\tif (loading) {\n\t\t\t\tthis.pullCaption.innerHTML = this.options.down.contentdown;\n\t\t\t\tloading.style.webkitTransition = \"\";\n\t\t\t\tloading.style.webkitTransform = \"\";\n\t\t\t\tloading.style.webkitAnimation = \"\";\n\t\t\t\tloading.className = CLASS_LOADING_DOWN;\n\t\t\t}\n\t\t},\n\t\t_setCaptionClass: function(isPulldown, caption, title) {\n\t\t\tif (!isPulldown) {\n\t\t\t\tswitch (title) {\n\t\t\t\t\tcase this.options.up.contentdown:\n\t\t\t\t\t\tcaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_DOWN;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase this.options.up.contentrefresh:\n\t\t\t\t\t\tcaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_REFRESH\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase this.options.up.contentnomore:\n\t\t\t\t\t\tcaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_NOMORE;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_setCaption: function(title, reset) {\n\t\t\tif (this.loading) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar options = this.options;\n\t\t\tvar pocket = this.pullPocket;\n\t\t\tvar caption = this.pullCaption;\n\t\t\tvar loading = this.pullLoading;\n\t\t\tvar isPulldown = this.pulldown;\n\t\t\tvar self = this;\n\t\t\tif (pocket) {\n\t\t\t\tif (reset) {\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tcaption.innerHTML = self.lastTitle = title;\n\t\t\t\t\t\tif (isPulldown) {\n\t\t\t\t\t\t\tloading.className = CLASS_LOADING_DOWN;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tself._setCaptionClass(false, caption, title);\n\t\t\t\t\t\t\tloading.className = CLASS_LOADING;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tloading.style.webkitAnimation = \"\";\n\t\t\t\t\t\tloading.style.webkitTransition = \"\";\n\t\t\t\t\t\tloading.style.webkitTransform = \"\";\n\t\t\t\t\t}, 100);\n\t\t\t\t} else {\n\t\t\t\t\tif (title !== this.lastTitle) {\n\t\t\t\t\t\tcaption.innerHTML = title;\n\t\t\t\t\t\tif (isPulldown) {\n\t\t\t\t\t\t\tif (title === options.down.contentrefresh) {\n\t\t\t\t\t\t\t\tloading.className = CLASS_LOADING;\n\t\t\t\t\t\t\t\tloading.style.webkitAnimation = \"spinner-spin 1s step-end infinite\";\n\t\t\t\t\t\t\t} else if (title === options.down.contentover) {\n\t\t\t\t\t\t\t\tloading.className = CLASS_LOADING_UP;\n\t\t\t\t\t\t\t\tloading.style.webkitTransition = \"-webkit-transform 0.3s ease-in\";\n\t\t\t\t\t\t\t\tloading.style.webkitTransform = \"rotate(180deg)\";\n\t\t\t\t\t\t\t} else if (title === options.down.contentdown) {\n\t\t\t\t\t\t\t\tloading.className = CLASS_LOADING_DOWN;\n\t\t\t\t\t\t\t\tloading.style.webkitTransition = \"-webkit-transform 0.3s ease-in\";\n\t\t\t\t\t\t\t\tloading.style.webkitTransform = \"rotate(0deg)\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (title === options.up.contentrefresh) {\n\t\t\t\t\t\t\t\tloading.className = CLASS_LOADING + ' ' + CLASS_VISIBILITY;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tloading.className = CLASS_LOADING + ' ' + CLASS_HIDDEN;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tself._setCaptionClass(false, caption, title);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.lastTitle = title;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t};\n\t$.PullRefresh = PullRefresh;\n})(mui, document);\n(function($, window, document, undefined) {\n\tvar CLASS_SCROLL = 'mui-scroll';\n\tvar CLASS_SCROLLBAR = 'mui-scrollbar';\n\tvar CLASS_INDICATOR = 'mui-scrollbar-indicator';\n\tvar CLASS_SCROLLBAR_VERTICAL = CLASS_SCROLLBAR + '-vertical';\n\tvar CLASS_SCROLLBAR_HORIZONTAL = CLASS_SCROLLBAR + '-horizontal';\n\n\tvar CLASS_ACTIVE = 'mui-active';\n\n\tvar ease = {\n\t\tquadratic: {\n\t\t\tstyle: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n\t\t\tfn: function(k) {\n\t\t\t\treturn k * (2 - k);\n\t\t\t}\n\t\t},\n\t\tcircular: {\n\t\t\tstyle: 'cubic-bezier(0.1, 0.57, 0.1, 1)',\n\t\t\tfn: function(k) {\n\t\t\t\treturn Math.sqrt(1 - (--k * k));\n\t\t\t}\n\t\t},\n\t\toutCirc: {\n\t\t\tstyle: 'cubic-bezier(0.075, 0.82, 0.165, 1)'\n\t\t},\n\t\toutCubic: {\n\t\t\tstyle: 'cubic-bezier(0.165, 0.84, 0.44, 1)'\n\t\t}\n\t}\n\tvar Scroll = $.Class.extend({\n\t\tinit: function(element, options) {\n\t\t\tthis.wrapper = this.element = element;\n\t\t\tthis.scroller = this.wrapper.children[0];\n\t\t\tthis.scrollerStyle = this.scroller && this.scroller.style;\n\t\t\tthis.stopped = false;\n\n\t\t\tthis.options = $.extend(true, {\n\t\t\t\tscrollY: true, //是否竖向滚动\n\t\t\t\tscrollX: false, //是否横向滚动\n\t\t\t\tstartX: 0, //初始化时滚动至x\n\t\t\t\tstartY: 0, //初始化时滚动至y\n\n\t\t\t\tindicators: true, //是否显示滚动条\n\t\t\t\tstopPropagation: false,\n\t\t\t\thardwareAccelerated: true,\n\t\t\t\tfixedBadAndorid: false,\n\t\t\t\tpreventDefaultException: {\n\t\t\t\t\ttagName: /^(INPUT|TEXTAREA|BUTTON|SELECT|VIDEO)$/\n\t\t\t\t},\n\t\t\t\tmomentum: true,\n\n\t\t\t\tsnapX: 0.5, //横向切换距离(以当前容器宽度为基准)\n\t\t\t\tsnap: false, //图片轮播，拖拽式选项卡\n\n\t\t\t\tbounce: true, //是否启用回弹\n\t\t\t\tbounceTime: 500, //回弹动画时间\n\t\t\t\tbounceEasing: ease.outCirc, //回弹动画曲线\n\n\t\t\t\tscrollTime: 500,\n\t\t\t\tscrollEasing: ease.outCubic, //轮播动画曲线\n\n\t\t\t\tdirectionLockThreshold: 5,\n\n\t\t\t\tparallaxElement: false, //视差元素\n\t\t\t\tparallaxRatio: 0.5\n\t\t\t}, options);\n\n\t\t\tthis.x = 0;\n\t\t\tthis.y = 0;\n\t\t\tthis.translateZ = this.options.hardwareAccelerated ? ' translateZ(0)' : '';\n\n\t\t\tthis._init();\n\t\t\tif (this.scroller) {\n\t\t\t\tthis.refresh();\n\t\t\t\t//\t\t\t\tif (this.options.startX !== 0 || this.options.startY !== 0) { //需要判断吗？后续根据实际情况再看看\n\t\t\t\tthis.scrollTo(this.options.startX, this.options.startY);\n\t\t\t\t//\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_init: function() {\n\t\t\tthis._initParallax();\n\t\t\tthis._initIndicators();\n\t\t\tthis._initEvent();\n\t\t},\n\t\t_initParallax: function() {\n\t\t\tif (this.options.parallaxElement) {\n\t\t\t\tthis.parallaxElement = document.querySelector(this.options.parallaxElement);\n\t\t\t\tthis.parallaxStyle = this.parallaxElement.style;\n\t\t\t\tthis.parallaxHeight = this.parallaxElement.offsetHeight;\n\t\t\t\tthis.parallaxImgStyle = this.parallaxElement.querySelector('img').style;\n\t\t\t}\n\t\t},\n\t\t_initIndicators: function() {\n\t\t\tvar self = this;\n\t\t\tself.indicators = [];\n\t\t\tif (!this.options.indicators) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar indicators = [],\n\t\t\t\tindicator;\n\n\t\t\t// Vertical scrollbar\n\t\t\tif (self.options.scrollY) {\n\t\t\t\tindicator = {\n\t\t\t\t\tel: this._createScrollBar(CLASS_SCROLLBAR_VERTICAL),\n\t\t\t\t\tlistenX: false\n\t\t\t\t};\n\n\t\t\t\tthis.wrapper.appendChild(indicator.el);\n\t\t\t\tindicators.push(indicator);\n\t\t\t}\n\n\t\t\t// Horizontal scrollbar\n\t\t\tif (this.options.scrollX) {\n\t\t\t\tindicator = {\n\t\t\t\t\tel: this._createScrollBar(CLASS_SCROLLBAR_HORIZONTAL),\n\t\t\t\t\tlistenY: false\n\t\t\t\t};\n\n\t\t\t\tthis.wrapper.appendChild(indicator.el);\n\t\t\t\tindicators.push(indicator);\n\t\t\t}\n\n\t\t\tfor (var i = indicators.length; i--;) {\n\t\t\t\tthis.indicators.push(new Indicator(this, indicators[i]));\n\t\t\t}\n\n\t\t},\n\t\t_initSnap: function() {\n\t\t\tthis.currentPage = {};\n\t\t\tthis.pages = [];\n\t\t\tvar snaps = this.snaps;\n\t\t\tvar length = snaps.length;\n\t\t\tvar m = 0;\n\t\t\tvar n = -1;\n\t\t\tvar x = 0;\n\t\t\tvar leftX = 0;\n\t\t\tvar rightX = 0;\n\t\t\tvar snapX = 0;\n\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\tvar snap = snaps[i];\n\t\t\t\tvar offsetLeft = snap.offsetLeft;\n\t\t\t\tvar offsetWidth = snap.offsetWidth;\n\t\t\t\tif (i === 0 || offsetLeft <= snaps[i - 1].offsetLeft) {\n\t\t\t\t\tm = 0;\n\t\t\t\t\tn++;\n\t\t\t\t}\n\t\t\t\tif (!this.pages[m]) {\n\t\t\t\t\tthis.pages[m] = [];\n\t\t\t\t}\n\t\t\t\tx = this._getSnapX(offsetLeft);\n\t\t\t\tsnapX = Math.round((offsetWidth) * this.options.snapX);\n\t\t\t\tleftX = x - snapX;\n\t\t\t\trightX = x - offsetWidth + snapX;\n\t\t\t\tthis.pages[m][n] = {\n\t\t\t\t\tx: x,\n\t\t\t\t\tleftX: leftX,\n\t\t\t\t\trightX: rightX,\n\t\t\t\t\tpageX: m,\n\t\t\t\t\telement: snap\n\t\t\t\t}\n\t\t\t\tif (snap.classList.contains(CLASS_ACTIVE)) {\n\t\t\t\t\tthis.currentPage = this.pages[m][0];\n\t\t\t\t}\n\t\t\t\tif (x >= this.maxScrollX) {\n\t\t\t\t\tm++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.options.startX = this.currentPage.x || 0;\n\t\t},\n\t\t_getSnapX: function(offsetLeft) {\n\t\t\treturn Math.max(Math.min(0, -offsetLeft + (this.wrapperWidth / 2)), this.maxScrollX);\n\t\t},\n\t\t_gotoPage: function(index) {\n\t\t\tthis.currentPage = this.pages[Math.min(index, this.pages.length - 1)][0];\n\t\t\tfor (var i = 0, len = this.snaps.length; i < len; i++) {\n\t\t\t\tif (i === index) {\n\t\t\t\t\tthis.snaps[i].classList.add(CLASS_ACTIVE);\n\t\t\t\t} else {\n\t\t\t\t\tthis.snaps[i].classList.remove(CLASS_ACTIVE);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.scrollTo(this.currentPage.x, 0, this.options.scrollTime);\n\t\t},\n\t\t_nearestSnap: function(x) {\n\t\t\tif (!this.pages.length) {\n\t\t\t\treturn {\n\t\t\t\t\tx: 0,\n\t\t\t\t\tpageX: 0\n\t\t\t\t};\n\t\t\t}\n\t\t\tvar i = 0;\n\t\t\tvar length = this.pages.length;\n\t\t\tif (x > 0) {\n\t\t\t\tx = 0;\n\t\t\t} else if (x < this.maxScrollX) {\n\t\t\t\tx = this.maxScrollX;\n\t\t\t}\n\t\t\tfor (; i < length; i++) {\n\t\t\t\tvar nearestX = this.direction === 'left' ? this.pages[i][0].leftX : this.pages[i][0].rightX;\n\t\t\t\tif (x >= nearestX) {\n\t\t\t\t\treturn this.pages[i][0];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tx: 0,\n\t\t\t\tpageX: 0\n\t\t\t};\n\t\t},\n\t\t_initEvent: function(detach) {\n\t\t\tvar action = detach ? 'removeEventListener' : 'addEventListener';\n\t\t\twindow[action]('orientationchange', this);\n\t\t\twindow[action]('resize', this);\n\n\t\t\tthis.scroller[action]('webkitTransitionEnd', this);\n\n\t\t\tthis.wrapper[action]($.EVENT_START, this);\n\t\t\tthis.wrapper[action]($.EVENT_CANCEL, this);\n\t\t\tthis.wrapper[action]($.EVENT_END, this);\n\t\t\tthis.wrapper[action]('drag', this);\n\t\t\tthis.wrapper[action]('dragend', this);\n\t\t\tthis.wrapper[action]('flick', this);\n\t\t\tthis.wrapper[action]('scrollend', this);\n\t\t\tif (this.options.scrollX) {\n\t\t\t\tthis.wrapper[action]('swiperight', this);\n\t\t\t}\n\t\t\tvar segmentedControl = this.wrapper.querySelector('.mui-segmented-control');\n\t\t\tif (segmentedControl) { //靠，这个bug排查了一下午，阻止hash跳转，一旦hash跳转会导致可拖拽选项卡的tab不见\n\t\t\t\tmui(segmentedControl)[detach ? 'off' : 'on']('click', 'a', $.preventDefault);\n\t\t\t}\n\n\t\t\tthis.wrapper[action]('scrollstart', this);\n\t\t\tthis.wrapper[action]('refresh', this);\n\t\t},\n\t\t_handleIndicatorScrollend: function() {\n\t\t\tthis.indicators.map(function(indicator) {\n\t\t\t\tindicator.fade();\n\t\t\t});\n\t\t},\n\t\t_handleIndicatorScrollstart: function() {\n\t\t\tthis.indicators.map(function(indicator) {\n\t\t\t\tindicator.fade(1);\n\t\t\t});\n\t\t},\n\t\t_handleIndicatorRefresh: function() {\n\t\t\tthis.indicators.map(function(indicator) {\n\t\t\t\tindicator.refresh();\n\t\t\t});\n\t\t},\n\t\thandleEvent: function(e) {\n\t\t\tif (this.stopped) {\n\t\t\t\tthis.resetPosition();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tswitch (e.type) {\n\t\t\t\tcase $.EVENT_START:\n\t\t\t\t\tthis._start(e);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'drag':\n\t\t\t\t\tthis.options.stopPropagation && e.stopPropagation();\n\t\t\t\t\tthis._drag(e);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'dragend':\n\t\t\t\tcase 'flick':\n\t\t\t\t\tthis.options.stopPropagation && e.stopPropagation();\n\t\t\t\t\tthis._flick(e);\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.EVENT_CANCEL:\n\t\t\t\tcase $.EVENT_END:\n\t\t\t\t\tthis._end(e);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'webkitTransitionEnd':\n\t\t\t\t\tthis.transitionTimer && this.transitionTimer.cancel();\n\t\t\t\t\tthis._transitionEnd(e);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'scrollstart':\n\t\t\t\t\tthis._handleIndicatorScrollstart(e);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'scrollend':\n\t\t\t\t\tthis._handleIndicatorScrollend(e);\n\t\t\t\t\tthis._scrollend(e);\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'orientationchange':\n\t\t\t\tcase 'resize':\n\t\t\t\t\tthis._resize();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'swiperight':\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'refresh':\n\t\t\t\t\tthis._handleIndicatorRefresh(e);\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t},\n\t\t_start: function(e) {\n\t\t\tthis.moved = this.needReset = false;\n\t\t\tthis._transitionTime();\n\t\t\tif (this.isInTransition) {\n\t\t\t\tthis.needReset = true;\n\t\t\t\tthis.isInTransition = false;\n\t\t\t\tvar pos = $.parseTranslateMatrix($.getStyles(this.scroller, 'webkitTransform'));\n\t\t\t\tthis.setTranslate(Math.round(pos.x), Math.round(pos.y));\n\t\t\t\t//\t\t\t\tthis.resetPosition(); //reset\n\t\t\t\t$.trigger(this.scroller, 'scrollend', this);\n\t\t\t\t//\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\tthis.reLayout();\n\t\t\t$.trigger(this.scroller, 'beforescrollstart', this);\n\t\t},\n\t\t_getDirectionByAngle: function(angle) {\n\t\t\tif (angle < -80 && angle > -100) {\n\t\t\t\treturn 'up';\n\t\t\t} else if (angle >= 80 && angle < 100) {\n\t\t\t\treturn 'down';\n\t\t\t} else if (angle >= 170 || angle <= -170) {\n\t\t\t\treturn 'left';\n\t\t\t} else if (angle >= -35 && angle <= 10) {\n\t\t\t\treturn 'right';\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\t_drag: function(e) {\n\t\t\t//\t\t\tif (this.needReset) {\n\t\t\t//\t\t\t\te.stopPropagation(); //disable parent drag(nested scroller)\n\t\t\t//\t\t\t\treturn;\n\t\t\t//\t\t\t}\n\t\t\tvar detail = e.detail;\n\t\t\tif (this.options.scrollY || detail.direction === 'up' || detail.direction === 'down') { //如果是竖向滚动或手势方向是上或下\n\t\t\t\t//ios8 hack\n\t\t\t\tif ($.os.ios && parseFloat($.os.version) >= 8) { //多webview时，离开当前webview会导致后续touch事件不触发\n\t\t\t\t\tvar clientY = detail.gesture.touches[0].clientY;\n\t\t\t\t\t//下拉刷新 or 上拉加载\n\t\t\t\t\tif ((clientY + 10) > window.innerHeight || clientY < 10) {\n\t\t\t\t\t\tthis.resetPosition(this.options.bounceTime);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar isPreventDefault = isReturn = false;\n\t\t\tvar direction = this._getDirectionByAngle(detail.angle);\n\t\t\tif (detail.direction === 'left' || detail.direction === 'right') {\n\t\t\t\tif (this.options.scrollX) {\n\t\t\t\t\tisPreventDefault = true;\n\t\t\t\t\tif (!this.moved) { //识别角度(该角度导致轮播不灵敏)\n\t\t\t\t\t\t//\t\t\t\t\t\tif (direction !== 'left' && direction !== 'right') {\n\t\t\t\t\t\t//\t\t\t\t\t\t\tisReturn = true;\n\t\t\t\t\t\t//\t\t\t\t\t\t} else {\n\t\t\t\t\t\t$.gestures.session.lockDirection = true; //锁定方向\n\t\t\t\t\t\t$.gestures.session.startDirection = detail.direction;\n\t\t\t\t\t\t//\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (this.options.scrollY && !this.moved) {\n\t\t\t\t\tisReturn = true;\n\t\t\t\t}\n\t\t\t} else if (detail.direction === 'up' || detail.direction === 'down') {\n\t\t\t\tif (this.options.scrollY) {\n\t\t\t\t\tisPreventDefault = true;\n\t\t\t\t\t//\t\t\t\t\tif (!this.moved) { //识别角度,竖向滚动似乎没必要进行小角度验证\n\t\t\t\t\t//\t\t\t\t\t\tif (direction !== 'up' && direction !== 'down') {\n\t\t\t\t\t//\t\t\t\t\t\t\tisReturn = true;\n\t\t\t\t\t//\t\t\t\t\t\t}\n\t\t\t\t\t//\t\t\t\t\t}\n\t\t\t\t\tif (!this.moved) {\n\t\t\t\t\t\t$.gestures.session.lockDirection = true; //锁定方向\n\t\t\t\t\t\t$.gestures.session.startDirection = detail.direction;\n\t\t\t\t\t}\n\t\t\t\t} else if (this.options.scrollX && !this.moved) {\n\t\t\t\t\tisReturn = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tisReturn = true;\n\t\t\t}\n\t\t\tif (this.moved || isPreventDefault) {\n\t\t\t\te.stopPropagation(); //阻止冒泡(scroll类嵌套)\n\t\t\t\tdetail.gesture && detail.gesture.preventDefault();\n\t\t\t}\n\t\t\tif (isReturn) { //禁止非法方向滚动\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!this.moved) {\n\t\t\t\t$.trigger(this.scroller, 'scrollstart', this);\n\t\t\t} else {\n\t\t\t\te.stopPropagation(); //move期间阻止冒泡(scroll嵌套)\n\t\t\t}\n\t\t\tvar deltaX = 0;\n\t\t\tvar deltaY = 0;\n\t\t\tif (!this.moved) { //start\n\t\t\t\tdeltaX = detail.deltaX;\n\t\t\t\tdeltaY = detail.deltaY;\n\t\t\t} else { //move\n\t\t\t\tdeltaX = detail.deltaX - $.gestures.session.prevTouch.deltaX;\n\t\t\t\tdeltaY = detail.deltaY - $.gestures.session.prevTouch.deltaY;\n\t\t\t}\n\t\t\tvar absDeltaX = Math.abs(detail.deltaX);\n\t\t\tvar absDeltaY = Math.abs(detail.deltaY);\n\t\t\tif (absDeltaX > absDeltaY + this.options.directionLockThreshold) {\n\t\t\t\tdeltaY = 0;\n\t\t\t} else if (absDeltaY >= absDeltaX + this.options.directionLockThreshold) {\n\t\t\t\tdeltaX = 0;\n\t\t\t}\n\n\t\t\tdeltaX = this.hasHorizontalScroll ? deltaX : 0;\n\t\t\tdeltaY = this.hasVerticalScroll ? deltaY : 0;\n\t\t\tvar newX = this.x + deltaX;\n\t\t\tvar newY = this.y + deltaY;\n\t\t\t// Slow down if outside of the boundaries\n\t\t\tif (newX > 0 || newX < this.maxScrollX) {\n\t\t\t\tnewX = this.options.bounce ? this.x + deltaX / 3 : newX > 0 ? 0 : this.maxScrollX;\n\t\t\t}\n\t\t\tif (newY > 0 || newY < this.maxScrollY) {\n\t\t\t\tnewY = this.options.bounce ? this.y + deltaY / 3 : newY > 0 ? 0 : this.maxScrollY;\n\t\t\t}\n\n\t\t\tif (!this.requestAnimationFrame) {\n\t\t\t\tthis._updateTranslate();\n\t\t\t}\n\t\t\tthis.direction = detail.deltaX > 0 ? 'right' : 'left';\n\t\t\tthis.moved = true;\n\t\t\tthis.x = newX;\n\t\t\tthis.y = newY;\n\t\t\t$.trigger(this.scroller, 'scroll', this);\n\t\t},\n\t\t_flick: function(e) {\n\t\t\t//\t\t\tif (!this.moved || this.needReset) {\n\t\t\t//\t\t\t\treturn;\n\t\t\t//\t\t\t}\n\t\t\tif (!this.moved) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\te.stopPropagation();\n\t\t\tvar detail = e.detail;\n\t\t\tthis._clearRequestAnimationFrame();\n\t\t\tif (e.type === 'dragend' && detail.flick) { //dragend\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar newX = Math.round(this.x);\n\t\t\tvar newY = Math.round(this.y);\n\n\t\t\tthis.isInTransition = false;\n\t\t\t// reset if we are outside of the boundaries\n\t\t\tif (this.resetPosition(this.options.bounceTime)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.scrollTo(newX, newY); // ensures that the last position is rounded\n\n\t\t\tif (e.type === 'dragend') { //dragend\n\t\t\t\t$.trigger(this.scroller, 'scrollend', this);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar time = 0;\n\t\t\tvar easing = '';\n\t\t\t// start momentum animation if needed\n\t\t\tif (this.options.momentum && detail.flickTime < 300) {\n\t\t\t\tmomentumX = this.hasHorizontalScroll ? this._momentum(this.x, detail.flickDistanceX, detail.flickTime, this.maxScrollX, this.options.bounce ? this.wrapperWidth : 0, this.options.deceleration) : {\n\t\t\t\t\tdestination: newX,\n\t\t\t\t\tduration: 0\n\t\t\t\t};\n\t\t\t\tmomentumY = this.hasVerticalScroll ? this._momentum(this.y, detail.flickDistanceY, detail.flickTime, this.maxScrollY, this.options.bounce ? this.wrapperHeight : 0, this.options.deceleration) : {\n\t\t\t\t\tdestination: newY,\n\t\t\t\t\tduration: 0\n\t\t\t\t};\n\t\t\t\tnewX = momentumX.destination;\n\t\t\t\tnewY = momentumY.destination;\n\t\t\t\ttime = Math.max(momentumX.duration, momentumY.duration);\n\t\t\t\tthis.isInTransition = true;\n\t\t\t}\n\n\t\t\tif (newX != this.x || newY != this.y) {\n\t\t\t\tif (newX > 0 || newX < this.maxScrollX || newY > 0 || newY < this.maxScrollY) {\n\t\t\t\t\teasing = ease.quadratic;\n\t\t\t\t}\n\t\t\t\tthis.scrollTo(newX, newY, time, easing);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$.trigger(this.scroller, 'scrollend', this);\n\t\t\t//\t\t\te.stopPropagation();\n\t\t},\n\t\t_end: function(e) {\n\t\t\tthis.needReset = false;\n\t\t\tif ((!this.moved && this.needReset) || e.type === $.EVENT_CANCEL) {\n\t\t\t\tthis.resetPosition();\n\t\t\t}\n\t\t},\n\t\t_transitionEnd: function(e) {\n\t\t\tif (e.target != this.scroller || !this.isInTransition) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._transitionTime();\n\t\t\tif (!this.resetPosition(this.options.bounceTime)) {\n\t\t\t\tthis.isInTransition = false;\n\t\t\t\t$.trigger(this.scroller, 'scrollend', this);\n\t\t\t}\n\t\t},\n\t\t_scrollend: function(e) {\n\t\t\tif ((this.y === 0 && this.maxScrollY === 0) || (Math.abs(this.y) > 0 && this.y <= this.maxScrollY)) {\n\t\t\t\t$.trigger(this.scroller, 'scrollbottom', this);\n\t\t\t}\n\t\t},\n\t\t_resize: function() {\n\t\t\tvar that = this;\n\t\t\tclearTimeout(that.resizeTimeout);\n\t\t\tthat.resizeTimeout = setTimeout(function() {\n\t\t\t\tthat.refresh();\n\t\t\t}, that.options.resizePolling);\n\t\t},\n\t\t_transitionTime: function(time) {\n\t\t\ttime = time || 0;\n\t\t\tthis.scrollerStyle['webkitTransitionDuration'] = time + 'ms';\n\t\t\tif (this.parallaxElement && this.options.scrollY) { //目前仅支持竖向视差效果\n\t\t\t\tthis.parallaxStyle['webkitTransitionDuration'] = time + 'ms';\n\t\t\t}\n\t\t\tif (this.options.fixedBadAndorid && !time && $.os.isBadAndroid) {\n\t\t\t\tthis.scrollerStyle['webkitTransitionDuration'] = '0.001s';\n\t\t\t\tif (this.parallaxElement && this.options.scrollY) { //目前仅支持竖向视差效果\n\t\t\t\t\tthis.parallaxStyle['webkitTransitionDuration'] = '0.001s';\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.indicators) {\n\t\t\t\tfor (var i = this.indicators.length; i--;) {\n\t\t\t\t\tthis.indicators[i].transitionTime(time);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (time) { //自定义timer，保证webkitTransitionEnd始终触发\n\t\t\t\tthis.transitionTimer && this.transitionTimer.cancel();\n\t\t\t\tthis.transitionTimer = $.later(function() {\n\t\t\t\t\t$.trigger(this.scroller, 'webkitTransitionEnd');\n\t\t\t\t}, time + 100, this);\n\t\t\t}\n\t\t},\n\t\t_transitionTimingFunction: function(easing) {\n\t\t\tthis.scrollerStyle['webkitTransitionTimingFunction'] = easing;\n\t\t\tif (this.parallaxElement && this.options.scrollY) { //目前仅支持竖向视差效果\n\t\t\t\tthis.parallaxStyle['webkitTransitionDuration'] = easing;\n\t\t\t}\n\t\t\tif (this.indicators) {\n\t\t\t\tfor (var i = this.indicators.length; i--;) {\n\t\t\t\t\tthis.indicators[i].transitionTimingFunction(easing);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_translate: function(x, y) {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t},\n\t\t_clearRequestAnimationFrame: function() {\n\t\t\tif (this.requestAnimationFrame) {\n\t\t\t\tcancelAnimationFrame(this.requestAnimationFrame);\n\t\t\t\tthis.requestAnimationFrame = null;\n\t\t\t}\n\t\t},\n\t\t_updateTranslate: function() {\n\t\t\tvar self = this;\n\t\t\tif (self.x !== self.lastX || self.y !== self.lastY) {\n\t\t\t\tself.setTranslate(self.x, self.y);\n\t\t\t}\n\t\t\tself.requestAnimationFrame = requestAnimationFrame(function() {\n\t\t\t\tself._updateTranslate();\n\t\t\t});\n\t\t},\n\t\t_createScrollBar: function(clazz) {\n\t\t\tvar scrollbar = document.createElement('div');\n\t\t\tvar indicator = document.createElement('div');\n\t\t\tscrollbar.className = CLASS_SCROLLBAR + ' ' + clazz;\n\t\t\tindicator.className = CLASS_INDICATOR;\n\t\t\tscrollbar.appendChild(indicator);\n\t\t\tif (clazz === CLASS_SCROLLBAR_VERTICAL) {\n\t\t\t\tthis.scrollbarY = scrollbar;\n\t\t\t\tthis.scrollbarIndicatorY = indicator;\n\t\t\t} else if (clazz === CLASS_SCROLLBAR_HORIZONTAL) {\n\t\t\t\tthis.scrollbarX = scrollbar;\n\t\t\t\tthis.scrollbarIndicatorX = indicator;\n\t\t\t}\n\t\t\tthis.wrapper.appendChild(scrollbar);\n\t\t\treturn scrollbar;\n\t\t},\n\t\t_preventDefaultException: function(el, exceptions) {\n\t\t\tfor (var i in exceptions) {\n\t\t\t\tif (exceptions[i].test(el[i])) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t_reLayout: function() {\n\t\t\tif (!this.hasHorizontalScroll) {\n\t\t\t\tthis.maxScrollX = 0;\n\t\t\t\tthis.scrollerWidth = this.wrapperWidth;\n\t\t\t}\n\n\t\t\tif (!this.hasVerticalScroll) {\n\t\t\t\tthis.maxScrollY = 0;\n\t\t\t\tthis.scrollerHeight = this.wrapperHeight;\n\t\t\t}\n\n\t\t\tthis.indicators.map(function(indicator) {\n\t\t\t\tindicator.refresh();\n\t\t\t});\n\n\t\t\t//以防slider类嵌套使用\n\t\t\tif (this.options.snap && typeof this.options.snap === 'string') {\n\t\t\t\tvar items = this.scroller.querySelectorAll(this.options.snap);\n\t\t\t\tthis.itemLength = 0;\n\t\t\t\tthis.snaps = [];\n\t\t\t\tfor (var i = 0, len = items.length; i < len; i++) {\n\t\t\t\t\tvar item = items[i];\n\t\t\t\t\tif (item.parentNode === this.scroller) {\n\t\t\t\t\t\tthis.itemLength++;\n\t\t\t\t\t\tthis.snaps.push(item);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis._initSnap(); //需要每次都_initSnap么。其实init的时候执行一次，后续resize的时候执行一次就行了吧.先这么做吧，如果影响性能，再调整\n\t\t\t}\n\t\t},\n\t\t_momentum: function(current, distance, time, lowerMargin, wrapperSize, deceleration) {\n\t\t\tvar speed = parseFloat(Math.abs(distance) / time),\n\t\t\t\tdestination,\n\t\t\t\tduration;\n\n\t\t\tdeceleration = deceleration === undefined ? 0.0006 : deceleration;\n\t\t\tdestination = current + (speed * speed) / (2 * deceleration) * (distance < 0 ? -1 : 1);\n\t\t\tduration = speed / deceleration;\n\t\t\tif (destination < lowerMargin) {\n\t\t\t\tdestination = wrapperSize ? lowerMargin - (wrapperSize / 2.5 * (speed / 8)) : lowerMargin;\n\t\t\t\tdistance = Math.abs(destination - current);\n\t\t\t\tduration = distance / speed;\n\t\t\t} else if (destination > 0) {\n\t\t\t\tdestination = wrapperSize ? wrapperSize / 2.5 * (speed / 8) : 0;\n\t\t\t\tdistance = Math.abs(current) + destination;\n\t\t\t\tduration = distance / speed;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdestination: Math.round(destination),\n\t\t\t\tduration: duration\n\t\t\t};\n\t\t},\n\t\t_getTranslateStr: function(x, y) {\n\t\t\tif (this.options.hardwareAccelerated) {\n\t\t\t\treturn 'translate3d(' + x + 'px,' + y + 'px,0px) ' + this.translateZ;\n\t\t\t}\n\t\t\treturn 'translate(' + x + 'px,' + y + 'px) ';\n\t\t},\n\t\t//API\n\t\tsetStopped: function(stopped) {\n\t\t\tthis.stopped = !!stopped;\n\t\t},\n\t\tsetTranslate: function(x, y) {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t\tthis.scrollerStyle['webkitTransform'] = this._getTranslateStr(x, y);\n\t\t\tif (this.parallaxElement && this.options.scrollY) { //目前仅支持竖向视差效果\n\t\t\t\tvar parallaxY = y * this.options.parallaxRatio;\n\t\t\t\tvar scale = 1 + parallaxY / ((this.parallaxHeight - parallaxY) / 2);\n\t\t\t\tif (scale > 1) {\n\t\t\t\t\tthis.parallaxImgStyle['opacity'] = 1 - parallaxY / 100 * this.options.parallaxRatio;\n\t\t\t\t\tthis.parallaxStyle['webkitTransform'] = this._getTranslateStr(0, -parallaxY) + ' scale(' + scale + ',' + scale + ')';\n\t\t\t\t} else {\n\t\t\t\t\tthis.parallaxImgStyle['opacity'] = 1;\n\t\t\t\t\tthis.parallaxStyle['webkitTransform'] = this._getTranslateStr(0, -1) + ' scale(1,1)';\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.indicators) {\n\t\t\t\tfor (var i = this.indicators.length; i--;) {\n\t\t\t\t\tthis.indicators[i].updatePosition();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.lastX = this.x;\n\t\t\tthis.lastY = this.y;\n\t\t\t$.trigger(this.scroller, 'scroll', this);\n\t\t},\n\t\treLayout: function() {\n\t\t\tthis.wrapper.offsetHeight;\n\n\t\t\tvar paddingLeft = parseFloat($.getStyles(this.wrapper, 'padding-left')) || 0;\n\t\t\tvar paddingRight = parseFloat($.getStyles(this.wrapper, 'padding-right')) || 0;\n\t\t\tvar paddingTop = parseFloat($.getStyles(this.wrapper, 'padding-top')) || 0;\n\t\t\tvar paddingBottom = parseFloat($.getStyles(this.wrapper, 'padding-bottom')) || 0;\n\n\t\t\tvar clientWidth = this.wrapper.clientWidth;\n\t\t\tvar clientHeight = this.wrapper.clientHeight;\n\n\t\t\tthis.scrollerWidth = this.scroller.offsetWidth;\n\t\t\tthis.scrollerHeight = this.scroller.offsetHeight;\n\n\t\t\tthis.wrapperWidth = clientWidth - paddingLeft - paddingRight;\n\t\t\tthis.wrapperHeight = clientHeight - paddingTop - paddingBottom;\n\n\t\t\tthis.maxScrollX = Math.min(this.wrapperWidth - this.scrollerWidth, 0);\n\t\t\tthis.maxScrollY = Math.min(this.wrapperHeight - this.scrollerHeight, 0);\n\t\t\tthis.hasHorizontalScroll = this.options.scrollX && this.maxScrollX < 0;\n\t\t\tthis.hasVerticalScroll = this.options.scrollY && this.maxScrollY < 0;\n\t\t\tthis._reLayout();\n\t\t},\n\t\tresetPosition: function(time) {\n\t\t\tvar x = this.x,\n\t\t\t\ty = this.y;\n\n\t\t\ttime = time || 0;\n\t\t\tif (!this.hasHorizontalScroll || this.x > 0) {\n\t\t\t\tx = 0;\n\t\t\t} else if (this.x < this.maxScrollX) {\n\t\t\t\tx = this.maxScrollX;\n\t\t\t}\n\n\t\t\tif (!this.hasVerticalScroll || this.y > 0) {\n\t\t\t\ty = 0;\n\t\t\t} else if (this.y < this.maxScrollY) {\n\t\t\t\ty = this.maxScrollY;\n\t\t\t}\n\n\t\t\tif (x == this.x && y == this.y) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.scrollTo(x, y, time, this.options.scrollEasing);\n\n\t\t\treturn true;\n\t\t},\n\t\t_reInit: function() {\n\t\t\tvar groups = this.wrapper.querySelectorAll('.' + CLASS_SCROLL);\n\t\t\tfor (var i = 0, len = groups.length; i < len; i++) {\n\t\t\t\tif (groups[i].parentNode === this.wrapper) {\n\t\t\t\t\tthis.scroller = groups[i];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.scrollerStyle = this.scroller && this.scroller.style;\n\t\t},\n\t\trefresh: function() {\n\t\t\tthis._reInit();\n\t\t\tthis.reLayout();\n\t\t\t$.trigger(this.scroller, 'refresh', this);\n\t\t\tthis.resetPosition();\n\t\t},\n\t\tscrollTo: function(x, y, time, easing) {\n\t\t\tvar easing = easing || ease.circular;\n\t\t\t//\t\t\tthis.isInTransition = time > 0 && (this.lastX != x || this.lastY != y);\n\t\t\t//暂不严格判断x,y，否则会导致部分版本上不正常触发轮播\n\t\t\tthis.isInTransition = time > 0;\n\t\t\tif (this.isInTransition) {\n\t\t\t\tthis._clearRequestAnimationFrame();\n\t\t\t\tthis._transitionTimingFunction(easing.style);\n\t\t\t\tthis._transitionTime(time);\n\t\t\t\tthis.setTranslate(x, y);\n\t\t\t} else {\n\t\t\t\tthis.setTranslate(x, y);\n\t\t\t}\n\n\t\t},\n\t\tscrollToBottom: function(time, easing) {\n\t\t\ttime = time || this.options.scrollTime;\n\t\t\tthis.scrollTo(0, this.maxScrollY, time, easing);\n\t\t},\n\t\tgotoPage: function(index) {\n\t\t\tthis._gotoPage(index);\n\t\t},\n\t\tdestroy: function() {\n\t\t\tthis._initEvent(true); //detach\n\t\t\tdelete $.data[this.wrapper.getAttribute('data-scroll')];\n\t\t\tthis.wrapper.setAttribute('data-scroll', '');\n\t\t}\n\t});\n\t//Indicator\n\tvar Indicator = function(scroller, options) {\n\t\tthis.wrapper = typeof options.el == 'string' ? document.querySelector(options.el) : options.el;\n\t\tthis.wrapperStyle = this.wrapper.style;\n\t\tthis.indicator = this.wrapper.children[0];\n\t\tthis.indicatorStyle = this.indicator.style;\n\t\tthis.scroller = scroller;\n\n\t\tthis.options = $.extend({\n\t\t\tlistenX: true,\n\t\t\tlistenY: true,\n\t\t\tfade: false,\n\t\t\tspeedRatioX: 0,\n\t\t\tspeedRatioY: 0\n\t\t}, options);\n\n\t\tthis.sizeRatioX = 1;\n\t\tthis.sizeRatioY = 1;\n\t\tthis.maxPosX = 0;\n\t\tthis.maxPosY = 0;\n\n\t\tif (this.options.fade) {\n\t\t\tthis.wrapperStyle['webkitTransform'] = this.scroller.translateZ;\n\t\t\tthis.wrapperStyle['webkitTransitionDuration'] = this.options.fixedBadAndorid && $.os.isBadAndroid ? '0.001s' : '0ms';\n\t\t\tthis.wrapperStyle.opacity = '0';\n\t\t}\n\t}\n\tIndicator.prototype = {\n\t\thandleEvent: function(e) {\n\n\t\t},\n\t\ttransitionTime: function(time) {\n\t\t\ttime = time || 0;\n\t\t\tthis.indicatorStyle['webkitTransitionDuration'] = time + 'ms';\n\t\t\tif (this.scroller.options.fixedBadAndorid && !time && $.os.isBadAndroid) {\n\t\t\t\tthis.indicatorStyle['webkitTransitionDuration'] = '0.001s';\n\t\t\t}\n\t\t},\n\t\ttransitionTimingFunction: function(easing) {\n\t\t\tthis.indicatorStyle['webkitTransitionTimingFunction'] = easing;\n\t\t},\n\t\trefresh: function() {\n\t\t\tthis.transitionTime();\n\n\t\t\tif (this.options.listenX && !this.options.listenY) {\n\t\t\t\tthis.indicatorStyle.display = this.scroller.hasHorizontalScroll ? 'block' : 'none';\n\t\t\t} else if (this.options.listenY && !this.options.listenX) {\n\t\t\t\tthis.indicatorStyle.display = this.scroller.hasVerticalScroll ? 'block' : 'none';\n\t\t\t} else {\n\t\t\t\tthis.indicatorStyle.display = this.scroller.hasHorizontalScroll || this.scroller.hasVerticalScroll ? 'block' : 'none';\n\t\t\t}\n\n\t\t\tthis.wrapper.offsetHeight; // force refresh\n\n\t\t\tif (this.options.listenX) {\n\t\t\t\tthis.wrapperWidth = this.wrapper.clientWidth;\n\t\t\t\tthis.indicatorWidth = Math.max(Math.round(this.wrapperWidth * this.wrapperWidth / (this.scroller.scrollerWidth || this.wrapperWidth || 1)), 8);\n\t\t\t\tthis.indicatorStyle.width = this.indicatorWidth + 'px';\n\n\t\t\t\tthis.maxPosX = this.wrapperWidth - this.indicatorWidth;\n\n\t\t\t\tthis.minBoundaryX = 0;\n\t\t\t\tthis.maxBoundaryX = this.maxPosX;\n\n\t\t\t\tthis.sizeRatioX = this.options.speedRatioX || (this.scroller.maxScrollX && (this.maxPosX / this.scroller.maxScrollX));\n\t\t\t}\n\n\t\t\tif (this.options.listenY) {\n\t\t\t\tthis.wrapperHeight = this.wrapper.clientHeight;\n\t\t\t\tthis.indicatorHeight = Math.max(Math.round(this.wrapperHeight * this.wrapperHeight / (this.scroller.scrollerHeight || this.wrapperHeight || 1)), 8);\n\t\t\t\tthis.indicatorStyle.height = this.indicatorHeight + 'px';\n\n\t\t\t\tthis.maxPosY = this.wrapperHeight - this.indicatorHeight;\n\n\t\t\t\tthis.minBoundaryY = 0;\n\t\t\t\tthis.maxBoundaryY = this.maxPosY;\n\n\t\t\t\tthis.sizeRatioY = this.options.speedRatioY || (this.scroller.maxScrollY && (this.maxPosY / this.scroller.maxScrollY));\n\t\t\t}\n\n\t\t\tthis.updatePosition();\n\t\t},\n\n\t\tupdatePosition: function() {\n\t\t\tvar x = this.options.listenX && Math.round(this.sizeRatioX * this.scroller.x) || 0,\n\t\t\t\ty = this.options.listenY && Math.round(this.sizeRatioY * this.scroller.y) || 0;\n\n\t\t\tif (x < this.minBoundaryX) {\n\t\t\t\tthis.width = Math.max(this.indicatorWidth + x, 8);\n\t\t\t\tthis.indicatorStyle.width = this.width + 'px';\n\t\t\t\tx = this.minBoundaryX;\n\t\t\t} else if (x > this.maxBoundaryX) {\n\t\t\t\tthis.width = Math.max(this.indicatorWidth - (x - this.maxPosX), 8);\n\t\t\t\tthis.indicatorStyle.width = this.width + 'px';\n\t\t\t\tx = this.maxPosX + this.indicatorWidth - this.width;\n\t\t\t} else if (this.width != this.indicatorWidth) {\n\t\t\t\tthis.width = this.indicatorWidth;\n\t\t\t\tthis.indicatorStyle.width = this.width + 'px';\n\t\t\t}\n\n\t\t\tif (y < this.minBoundaryY) {\n\t\t\t\tthis.height = Math.max(this.indicatorHeight + y * 3, 8);\n\t\t\t\tthis.indicatorStyle.height = this.height + 'px';\n\t\t\t\ty = this.minBoundaryY;\n\t\t\t} else if (y > this.maxBoundaryY) {\n\t\t\t\tthis.height = Math.max(this.indicatorHeight - (y - this.maxPosY) * 3, 8);\n\t\t\t\tthis.indicatorStyle.height = this.height + 'px';\n\t\t\t\ty = this.maxPosY + this.indicatorHeight - this.height;\n\t\t\t} else if (this.height != this.indicatorHeight) {\n\t\t\t\tthis.height = this.indicatorHeight;\n\t\t\t\tthis.indicatorStyle.height = this.height + 'px';\n\t\t\t}\n\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\n\t\t\tthis.indicatorStyle['webkitTransform'] = this.scroller._getTranslateStr(x, y);\n\n\t\t},\n\t\tfade: function(val, hold) {\n\t\t\tif (hold && !this.visible) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(this.fadeTimeout);\n\t\t\tthis.fadeTimeout = null;\n\n\t\t\tvar time = val ? 250 : 500,\n\t\t\t\tdelay = val ? 0 : 300;\n\n\t\t\tval = val ? '1' : '0';\n\n\t\t\tthis.wrapperStyle['webkitTransitionDuration'] = time + 'ms';\n\n\t\t\tthis.fadeTimeout = setTimeout((function(val) {\n\t\t\t\tthis.wrapperStyle.opacity = val;\n\t\t\t\tthis.visible = +val;\n\t\t\t}).bind(this, val), delay);\n\t\t}\n\t};\n\n\t$.Scroll = Scroll;\n\n\t$.fn.scroll = function(options) {\n\t\tvar scrollApis = [];\n\t\tthis.each(function() {\n\t\t\tvar scrollApi = null;\n\t\t\tvar self = this;\n\t\t\tvar id = self.getAttribute('data-scroll');\n\t\t\tif (!id) {\n\t\t\t\tid = ++$.uuid;\n\t\t\t\tvar _options = $.extend({}, options);\n\t\t\t\tif (self.classList.contains('mui-segmented-control')) {\n\t\t\t\t\t_options = $.extend(_options, {\n\t\t\t\t\t\tscrollY: false,\n\t\t\t\t\t\tscrollX: true,\n\t\t\t\t\t\tindicators: false,\n\t\t\t\t\t\tsnap: '.mui-control-item'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t$.data[id] = scrollApi = new Scroll(self, _options);\n\t\t\t\tself.setAttribute('data-scroll', id);\n\t\t\t} else {\n\t\t\t\tscrollApi = $.data[id];\n\t\t\t}\n\t\t\tscrollApis.push(scrollApi);\n\t\t});\n\t\treturn scrollApis.length === 1 ? scrollApis[0] : scrollApis;\n\t};\n})(mui, window, document);\n(function($, window, document, undefined) {\n\n\tvar CLASS_VISIBILITY = 'mui-visibility';\n\tvar CLASS_HIDDEN = 'mui-hidden';\n\n\tvar PullRefresh = $.Scroll.extend($.extend({\n\t\thandleEvent: function(e) {\n\t\t\tthis._super(e);\n\t\t\tif (e.type === 'scrollbottom') {\n\t\t\t\tif (e.target === this.scroller) {\n\t\t\t\t\tthis._scrollbottom();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_scrollbottom: function() {\n\t\t\tif (!this.pulldown && !this.loading) {\n\t\t\t\tthis.pulldown = false;\n\t\t\t\tthis._initPullupRefresh();\n\t\t\t\tthis.pullupLoading();\n\t\t\t}\n\t\t},\n\t\t_start: function(e) {\n\t\t\t//仅下拉刷新在start阻止默认事件\n\t\t\tif (e.touches && e.touches.length && e.touches[0].clientX > 30) {\n\t\t\t\te.target && !this._preventDefaultException(e.target, this.options.preventDefaultException) && e.preventDefault();\n\t\t\t}\n\t\t\tif (!this.loading) {\n\t\t\t\tthis.pulldown = this.pullPocket = this.pullCaption = this.pullLoading = false\n\t\t\t}\n\t\t\tthis._super(e);\n\t\t},\n\t\t_drag: function(e) {\n\t\t\tthis._super(e);\n\t\t\tif (!this.pulldown && !this.loading && this.topPocket && e.detail.direction === 'down' && this.y >= 0) {\n\t\t\t\tthis._initPulldownRefresh();\n\t\t\t}\n\t\t\tif (this.pulldown) {\n\t\t\t\tthis._setCaption(this.y > this.options.down.height ? this.options.down.contentover : this.options.down.contentdown);\n\t\t\t}\n\t\t},\n\n\t\t_reLayout: function() {\n\t\t\tthis.hasVerticalScroll = true;\n\t\t\tthis._super();\n\t\t},\n\t\t//API\n\t\tresetPosition: function(time) {\n\t\t\tif (this.pulldown) {\n\t\t\t\tif (this.y >= this.options.down.height) {\n\t\t\t\t\tthis.pulldownLoading(undefined, time || 0);\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\t!this.loading && this.topPocket.classList.remove(CLASS_VISIBILITY);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this._super(time);\n\t\t},\n\t\tpulldownLoading: function(y, time) {\n\t\t\ttypeof y === 'undefined' && (y = this.options.down.height); //默认高度\n\t\t\tthis.scrollTo(0, y, time, this.options.bounceEasing);\n\t\t\tif (this.loading) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t//\t\t\tif (!this.pulldown) {\n\t\t\tthis._initPulldownRefresh();\n\t\t\t//\t\t\t}\n\t\t\tthis._setCaption(this.options.down.contentrefresh);\n\t\t\tthis.loading = true;\n\t\t\tthis.indicators.map(function(indicator) {\n\t\t\t\tindicator.fade(0);\n\t\t\t});\n\t\t\tvar callback = this.options.down.callback;\n\t\t\tcallback && callback.call(this);\n\t\t},\n\t\tendPulldownToRefresh: function() {\n\t\t\tvar self = this;\n\t\t\tif (self.topPocket && self.loading && this.pulldown) {\n\t\t\t\tself.scrollTo(0, 0, self.options.bounceTime, self.options.bounceEasing);\n\t\t\t\tself.loading = false;\n\t\t\t\tself._setCaption(self.options.down.contentdown, true);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tself.loading || self.topPocket.classList.remove(CLASS_VISIBILITY);\n\t\t\t\t}, 350);\n\t\t\t}\n\t\t},\n\t\tpullupLoading: function(callback, x, time) {\n\t\t\tx = x || 0;\n\t\t\tthis.scrollTo(x, this.maxScrollY, time, this.options.bounceEasing);\n\t\t\tif (this.loading) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._initPullupRefresh();\n\t\t\tthis._setCaption(this.options.up.contentrefresh);\n\t\t\tthis.indicators.map(function(indicator) {\n\t\t\t\tindicator.fade(0);\n\t\t\t});\n\t\t\tthis.loading = true;\n\t\t\tcallback = callback || this.options.up.callback;\n\t\t\tcallback && callback.call(this);\n\t\t},\n\t\tendPullupToRefresh: function(finished) {\n\t\t\tvar self = this;\n\t\t\tif (self.bottomPocket) { // && self.loading && !this.pulldown\n\t\t\t\tself.loading = false;\n\t\t\t\tif (finished) {\n\t\t\t\t\tthis.finished = true;\n\t\t\t\t\tself._setCaption(self.options.up.contentnomore);\n\t\t\t\t\t//\t\t\t\t\tself.bottomPocket.classList.remove(CLASS_VISIBILITY);\n\t\t\t\t\t//\t\t\t\t\tself.bottomPocket.classList.add(CLASS_HIDDEN);\n\t\t\t\t\tself.wrapper.removeEventListener('scrollbottom', self);\n\t\t\t\t} else {\n\t\t\t\t\tself._setCaption(self.options.up.contentdown);\n\t\t\t\t\t//\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tself.loading || self.bottomPocket.classList.remove(CLASS_VISIBILITY);\n\t\t\t\t\t//\t\t\t\t\t}, 300);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdisablePullupToRefresh: function() {\n\t\t\tthis._initPullupRefresh();\n\t\t\tthis.bottomPocket.className = 'mui-pull-bottom-pocket' + ' ' + CLASS_HIDDEN;\n\t\t\tthis.wrapper.removeEventListener('scrollbottom', this);\n\t\t},\n\t\tenablePullupToRefresh: function() {\n\t\t\tthis._initPullupRefresh();\n\t\t\tthis.bottomPocket.classList.remove(CLASS_HIDDEN);\n\t\t\tthis._setCaption(this.options.up.contentdown);\n\t\t\tthis.wrapper.addEventListener('scrollbottom', this);\n\t\t},\n\t\trefresh: function(isReset) {\n\t\t\tif (isReset && this.finished) {\n\t\t\t\tthis.enablePullupToRefresh();\n\t\t\t\tthis.finished = false;\n\t\t\t}\n\t\t\tthis._super();\n\t\t},\n\t}, $.PullRefresh));\n\t$.fn.pullRefresh = function(options) {\n\t\tif (this.length === 1) {\n\t\t\tvar self = this[0];\n\t\t\tvar pullRefreshApi = null;\n\t\t\toptions = options || {};\n\t\t\tvar id = self.getAttribute('data-pullrefresh');\n\t\t\tif (!id) {\n\t\t\t\tid = ++$.uuid;\n\t\t\t\t$.data[id] = pullRefreshApi = new PullRefresh(self, options);\n\t\t\t\tself.setAttribute('data-pullrefresh', id);\n\t\t\t} else {\n\t\t\t\tpullRefreshApi = $.data[id];\n\t\t\t}\n\t\t\tif (options.down && options.down.auto) { //如果设置了auto，则自动下拉一次\n\t\t\t\tpullRefreshApi.pulldownLoading(options.down.autoY);\n\t\t\t} else if (options.up && options.up.auto) { //如果设置了auto，则自动上拉一次\n\t\t\t\tpullRefreshApi.pullupLoading();\n\t\t\t}\n\t\t\t//暂不提供这种调用方式吧\t\t\t\n\t\t\t//\t\t\tif (typeof options === 'string') {\n\t\t\t//\t\t\t\tvar methodValue = pullRefreshApi[options].apply(pullRefreshApi, $.slice.call(arguments, 1));\n\t\t\t//\t\t\t\tif (methodValue !== undefined) {\n\t\t\t//\t\t\t\t\treturn methodValue;\n\t\t\t//\t\t\t\t}\n\t\t\t//\t\t\t}\n\t\t\treturn pullRefreshApi;\n\t\t}\n\t};\n})(mui, window, document);\n/**\n * snap 重构\n * @param {Object} $\n * @param {Object} window\n */\n(function($, window) {\n\tvar CLASS_SLIDER = 'mui-slider';\n\tvar CLASS_SLIDER_GROUP = 'mui-slider-group';\n\tvar CLASS_SLIDER_LOOP = 'mui-slider-loop';\n\tvar CLASS_SLIDER_INDICATOR = 'mui-slider-indicator';\n\tvar CLASS_ACTION_PREVIOUS = 'mui-action-previous';\n\tvar CLASS_ACTION_NEXT = 'mui-action-next';\n\tvar CLASS_SLIDER_ITEM = 'mui-slider-item';\n\n\tvar CLASS_ACTIVE = 'mui-active';\n\n\tvar SELECTOR_SLIDER_ITEM = '.' + CLASS_SLIDER_ITEM;\n\tvar SELECTOR_SLIDER_INDICATOR = '.' + CLASS_SLIDER_INDICATOR;\n\tvar SELECTOR_SLIDER_PROGRESS_BAR = '.mui-slider-progress-bar';\n\n\tvar Slider = $.Slider = $.Scroll.extend({\n\t\tinit: function(element, options) {\n\t\t\tthis._super(element, $.extend(true, {\n\t\t\t\tfingers: 1,\n\t\t\t\tinterval: 0, //设置为0，则不定时轮播\n\t\t\t\tscrollY: false,\n\t\t\t\tscrollX: true,\n\t\t\t\tindicators: false,\n\t\t\t\tscrollTime: 1000,\n\t\t\t\tstartX: false,\n\t\t\t\tslideTime: 0, //滑动动画时间\n\t\t\t\tsnap: SELECTOR_SLIDER_ITEM\n\t\t\t}, options));\n\t\t\tif (this.options.startX) {\n\t\t\t\t//\t\t\t\t$.trigger(this.wrapper, 'scrollend', this);\n\t\t\t}\n\t\t},\n\t\t_init: function() {\n\t\t\tthis._reInit();\n\t\t\tif (this.scroller) {\n\t\t\t\tthis.scrollerStyle = this.scroller.style;\n\t\t\t\tthis.progressBar = this.wrapper.querySelector(SELECTOR_SLIDER_PROGRESS_BAR);\n\t\t\t\tif (this.progressBar) {\n\t\t\t\t\tthis.progressBarWidth = this.progressBar.offsetWidth;\n\t\t\t\t\tthis.progressBarStyle = this.progressBar.style;\n\t\t\t\t}\n\t\t\t\t//忘记这个代码是干什么的了？\n\t\t\t\t//\t\t\t\tthis.x = this._getScroll();\n\t\t\t\t//\t\t\t\tif (this.options.startX === false) {\n\t\t\t\t//\t\t\t\t\tthis.options.startX = this.x;\n\t\t\t\t//\t\t\t\t}\n\t\t\t\t//根据active修正startX\n\n\t\t\t\tthis._super();\n\t\t\t\tthis._initTimer();\n\t\t\t}\n\t\t},\n\t\t_triggerSlide: function() {\n\t\t\tvar self = this;\n\t\t\tself.isInTransition = false;\n\t\t\tvar page = self.currentPage;\n\t\t\tself.slideNumber = self._fixedSlideNumber();\n\t\t\tif (self.loop) {\n\t\t\t\tif (self.slideNumber === 0) {\n\t\t\t\t\tself.setTranslate(self.pages[1][0].x, 0);\n\t\t\t\t} else if (self.slideNumber === self.itemLength - 3) {\n\t\t\t\t\tself.setTranslate(self.pages[self.itemLength - 2][0].x, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (self.lastSlideNumber != self.slideNumber) {\n\t\t\t\tself.lastSlideNumber = self.slideNumber;\n\t\t\t\tself.lastPage = self.currentPage;\n\t\t\t\t$.trigger(self.wrapper, 'slide', {\n\t\t\t\t\tslideNumber: self.slideNumber\n\t\t\t\t});\n\t\t\t}\n\t\t\tself._initTimer();\n\t\t},\n\t\t_handleSlide: function(e) {\n\t\t\tvar self = this;\n\t\t\tif (e.target !== self.wrapper) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar detail = e.detail;\n\t\t\tdetail.slideNumber = detail.slideNumber || 0;\n\t\t\tvar temps = self.scroller.querySelectorAll(SELECTOR_SLIDER_ITEM);\n\t\t\tvar items = [];\n\t\t\tfor (var i = 0, len = temps.length; i < len; i++) {\n\t\t\t\tvar item = temps[i];\n\t\t\t\tif (item.parentNode === self.scroller) {\n\t\t\t\t\titems.push(item);\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar _slideNumber = detail.slideNumber;\n\t\t\tif (self.loop) {\n\t\t\t\t_slideNumber += 1;\n\t\t\t}\n\t\t\tif (!self.wrapper.classList.contains('mui-segmented-control')) {\n\t\t\t\tfor (var i = 0, len = items.length; i < len; i++) {\n\t\t\t\t\tvar item = items[i];\n\t\t\t\t\tif (item.parentNode === self.scroller) {\n\t\t\t\t\t\tif (i === _slideNumber) {\n\t\t\t\t\t\t\titem.classList.add(CLASS_ACTIVE);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\titem.classList.remove(CLASS_ACTIVE);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar indicatorWrap = self.wrapper.querySelector('.mui-slider-indicator');\n\t\t\tif (indicatorWrap) {\n\t\t\t\tif (indicatorWrap.getAttribute('data-scroll')) { //scroll\n\t\t\t\t\t$(indicatorWrap).scroll().gotoPage(detail.slideNumber);\n\t\t\t\t}\n\t\t\t\tvar indicators = indicatorWrap.querySelectorAll('.mui-indicator');\n\t\t\t\tif (indicators.length > 0) { //图片轮播\n\t\t\t\t\tfor (var i = 0, len = indicators.length; i < len; i++) {\n\t\t\t\t\t\tindicators[i].classList[i === detail.slideNumber ? 'add' : 'remove'](CLASS_ACTIVE);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar number = indicatorWrap.querySelector('.mui-number span');\n\t\t\t\t\tif (number) { //图文表格\n\t\t\t\t\t\tnumber.innerText = (detail.slideNumber + 1);\n\t\t\t\t\t} else { //segmented controls\n\t\t\t\t\t\tvar controlItems = indicatorWrap.querySelectorAll('.mui-control-item');\n\t\t\t\t\t\tfor (var i = 0, len = controlItems.length; i < len; i++) {\n\t\t\t\t\t\t\tcontrolItems[i].classList[i === detail.slideNumber ? 'add' : 'remove'](CLASS_ACTIVE);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\te.stopPropagation();\n\t\t},\n\t\t_handleTabShow: function(e) {\n\t\t\tvar self = this;\n\t\t\tself.gotoItem((e.detail.tabNumber || 0), self.options.slideTime);\n\t\t},\n\t\t_handleIndicatorTap: function(event) {\n\t\t\tvar self = this;\n\t\t\tvar target = event.target;\n\t\t\tif (target.classList.contains(CLASS_ACTION_PREVIOUS) || target.classList.contains(CLASS_ACTION_NEXT)) {\n\t\t\t\tself[target.classList.contains(CLASS_ACTION_PREVIOUS) ? 'prevItem' : 'nextItem']();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t},\n\t\t_initEvent: function(detach) {\n\t\t\tvar self = this;\n\t\t\tself._super(detach);\n\t\t\tvar action = detach ? 'removeEventListener' : 'addEventListener';\n\t\t\tself.wrapper[action]('slide', this);\n\t\t\tself.wrapper[action]($.eventName('shown', 'tab'), this);\n\t\t},\n\t\thandleEvent: function(e) {\n\t\t\tthis._super(e);\n\t\t\tswitch (e.type) {\n\t\t\t\tcase 'slide':\n\t\t\t\t\tthis._handleSlide(e);\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.eventName('shown', 'tab'):\n\t\t\t\t\tif (~this.snaps.indexOf(e.target)) { //避免嵌套监听错误的tab show\n\t\t\t\t\t\tthis._handleTabShow(e);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t_scrollend: function(e) {\n\t\t\tthis._super(e);\n\t\t\tthis._triggerSlide(e);\n\t\t},\n\t\t_drag: function(e) {\n\t\t\tthis._super(e);\n\t\t\tvar direction = e.detail.direction;\n\t\t\tif (direction === 'left' || direction === 'right') {\n\t\t\t\t//拖拽期间取消定时\n\t\t\t\tvar slidershowTimer = this.wrapper.getAttribute('data-slidershowTimer');\n\t\t\t\tslidershowTimer && window.clearTimeout(slidershowTimer);\n\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t},\n\t\t_initTimer: function() {\n\t\t\tvar self = this;\n\t\t\tvar slider = self.wrapper;\n\t\t\tvar interval = self.options.interval;\n\t\t\tvar slidershowTimer = slider.getAttribute('data-slidershowTimer');\n\t\t\tslidershowTimer && window.clearTimeout(slidershowTimer);\n\t\t\tif (interval) {\n\t\t\t\tslidershowTimer = window.setTimeout(function() {\n\t\t\t\t\tif (!slider) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t//仅slider显示状态进行自动轮播\n\t\t\t\t\tif (!!(slider.offsetWidth || slider.offsetHeight)) {\n\t\t\t\t\t\tself.nextItem(true);\n\t\t\t\t\t\t//下一个\n\t\t\t\t\t}\n\t\t\t\t\tself._initTimer();\n\t\t\t\t}, interval);\n\t\t\t\tslider.setAttribute('data-slidershowTimer', slidershowTimer);\n\t\t\t}\n\t\t},\n\n\t\t_fixedSlideNumber: function(page) {\n\t\t\tpage = page || this.currentPage;\n\t\t\tvar slideNumber = page.pageX;\n\t\t\tif (this.loop) {\n\t\t\t\tif (page.pageX === 0) {\n\t\t\t\t\tslideNumber = this.itemLength - 3;\n\t\t\t\t} else if (page.pageX === (this.itemLength - 1)) {\n\t\t\t\t\tslideNumber = 0;\n\t\t\t\t} else {\n\t\t\t\t\tslideNumber = page.pageX - 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn slideNumber;\n\t\t},\n\t\t_reLayout: function() {\n\t\t\tthis.hasHorizontalScroll = true;\n\t\t\tthis.loop = this.scroller.classList.contains(CLASS_SLIDER_LOOP);\n\t\t\tthis._super();\n\t\t},\n\t\t_getScroll: function() {\n\t\t\tvar result = $.parseTranslateMatrix($.getStyles(this.scroller, 'webkitTransform'));\n\t\t\treturn result ? result.x : 0;\n\t\t},\n\t\t_transitionEnd: function(e) {\n\t\t\tif (e.target !== this.scroller || !this.isInTransition) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._transitionTime();\n\t\t\tthis.isInTransition = false;\n\t\t\t$.trigger(this.wrapper, 'scrollend', this);\n\t\t},\n\t\t_flick: function(e) {\n\t\t\tif (!this.moved) { //无moved\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar detail = e.detail;\n\t\t\tvar direction = detail.direction;\n\t\t\tthis._clearRequestAnimationFrame();\n\t\t\tthis.isInTransition = true;\n\t\t\t//\t\t\tif (direction === 'up' || direction === 'down') {\n\t\t\t//\t\t\t\tthis.resetPosition(this.options.bounceTime);\n\t\t\t//\t\t\t\treturn;\n\t\t\t//\t\t\t}\n\t\t\tif (e.type === 'flick') {\n\t\t\t\tif (detail.deltaTime < 200) { //flick，太容易触发，额外校验一下deltaTime\n\t\t\t\t\tthis.x = this._getPage((this.slideNumber + (direction === 'right' ? -1 : 1)), true).x;\n\t\t\t\t}\n\t\t\t\tthis.resetPosition(this.options.bounceTime);\n\t\t\t} else if (e.type === 'dragend' && !detail.flick) {\n\t\t\t\tthis.resetPosition(this.options.bounceTime);\n\t\t\t}\n\t\t\te.stopPropagation();\n\t\t},\n\t\t_initSnap: function() {\n\t\t\tthis.scrollerWidth = this.itemLength * this.scrollerWidth;\n\t\t\tthis.maxScrollX = Math.min(this.wrapperWidth - this.scrollerWidth, 0);\n\t\t\tthis._super();\n\t\t\tif (!this.currentPage.x) {\n\t\t\t\t//当slider处于隐藏状态时，导致snap计算是错误的，临时先这么判断一下，后续要考虑解决所有scroll在隐藏状态下初始化属性不正确的问题\n\t\t\t\tvar currentPage = this.pages[this.loop ? 1 : 0];\n\t\t\t\tcurrentPage = currentPage || this.pages[0];\n\t\t\t\tif (!currentPage) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.currentPage = currentPage[0];\n\t\t\t\tthis.slideNumber = 0;\n\t\t\t\tthis.lastSlideNumber = typeof this.lastSlideNumber === 'undefined' ? 0 : this.lastSlideNumber;\n\t\t\t} else {\n\t\t\t\tthis.slideNumber = this._fixedSlideNumber();\n\t\t\t\tthis.lastSlideNumber = typeof this.lastSlideNumber === 'undefined' ? this.slideNumber : this.lastSlideNumber;\n\t\t\t}\n\t\t\tthis.options.startX = this.currentPage.x || 0;\n\t\t},\n\t\t_getSnapX: function(offsetLeft) {\n\t\t\treturn Math.max(-offsetLeft, this.maxScrollX);\n\t\t},\n\t\t_getPage: function(slideNumber, isFlick) {\n\t\t\tif (this.loop) {\n\t\t\t\tif (slideNumber > (this.itemLength - (isFlick ? 2 : 3))) {\n\t\t\t\t\tslideNumber = 1;\n\t\t\t\t\ttime = 0;\n\t\t\t\t} else if (slideNumber < (isFlick ? -1 : 0)) {\n\t\t\t\t\tslideNumber = this.itemLength - 2;\n\t\t\t\t\ttime = 0;\n\t\t\t\t} else {\n\t\t\t\t\tslideNumber += 1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!isFlick) {\n\t\t\t\t\tif (slideNumber > (this.itemLength - 1)) {\n\t\t\t\t\t\tslideNumber = 0;\n\t\t\t\t\t\ttime = 0;\n\t\t\t\t\t} else if (slideNumber < 0) {\n\t\t\t\t\t\tslideNumber = this.itemLength - 1;\n\t\t\t\t\t\ttime = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tslideNumber = Math.min(Math.max(0, slideNumber), this.itemLength - 1);\n\t\t\t}\n\t\t\treturn this.pages[slideNumber][0];\n\t\t},\n\t\t_gotoItem: function(slideNumber, time) {\n\t\t\tthis.currentPage = this._getPage(slideNumber, true); //此处传true。可保证程序切换时，动画与人手操作一致(第一张，最后一张的切换动画)\n\t\t\tthis.scrollTo(this.currentPage.x, 0, time, this.options.scrollEasing);\n\t\t\tif (time === 0) {\n\t\t\t\t$.trigger(this.wrapper, 'scrollend', this);\n\t\t\t}\n\t\t},\n\t\t//API\n\t\tsetTranslate: function(x, y) {\n\t\t\tthis._super(x, y);\n\t\t\tvar progressBar = this.progressBar;\n\t\t\tif (progressBar) {\n\t\t\t\tthis.progressBarStyle.webkitTransform = this._getTranslateStr((-x * (this.progressBarWidth / this.wrapperWidth)), 0);\n\t\t\t}\n\t\t},\n\t\tresetPosition: function(time) {\n\t\t\ttime = time || 0;\n\t\t\tif (this.x > 0) {\n\t\t\t\tthis.x = 0;\n\t\t\t} else if (this.x < this.maxScrollX) {\n\t\t\t\tthis.x = this.maxScrollX;\n\t\t\t}\n\t\t\tthis.currentPage = this._nearestSnap(this.x);\n\t\t\tthis.scrollTo(this.currentPage.x, 0, time, this.options.scrollEasing);\n\t\t\treturn true;\n\t\t},\n\t\tgotoItem: function(slideNumber, time) {\n\t\t\tthis._gotoItem(slideNumber, typeof time === 'undefined' ? this.options.scrollTime : time);\n\t\t},\n\t\tnextItem: function() {\n\t\t\tthis._gotoItem(this.slideNumber + 1, this.options.scrollTime);\n\t\t},\n\t\tprevItem: function() {\n\t\t\tthis._gotoItem(this.slideNumber - 1, this.options.scrollTime);\n\t\t},\n\t\tgetSlideNumber: function() {\n\t\t\treturn this.slideNumber || 0;\n\t\t},\n\t\t_reInit: function() {\n\t\t\tvar groups = this.wrapper.querySelectorAll('.' + CLASS_SLIDER_GROUP);\n\t\t\tfor (var i = 0, len = groups.length; i < len; i++) {\n\t\t\t\tif (groups[i].parentNode === this.wrapper) {\n\t\t\t\t\tthis.scroller = groups[i];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.scrollerStyle = this.scroller && this.scroller.style;\n\t\t\tif (this.progressBar) {\n\t\t\t\tthis.progressBarWidth = this.progressBar.offsetWidth;\n\t\t\t\tthis.progressBarStyle = this.progressBar.style;\n\t\t\t}\n\t\t},\n\t\trefresh: function(options) {\n\t\t\tif (options) {\n\t\t\t\t$.extend(this.options, options);\n\t\t\t\tthis._super();\n\t\t\t\tthis._initTimer();\n\t\t\t} else {\n\t\t\t\tthis._super();\n\t\t\t}\n\t\t},\n\t\tdestroy: function() {\n\t\t\tthis._initEvent(true); //detach\n\t\t\tdelete $.data[this.wrapper.getAttribute('data-slider')];\n\t\t\tthis.wrapper.setAttribute('data-slider', '');\n\t\t}\n\t});\n\t$.fn.slider = function(options) {\n\t\tvar slider = null;\n\t\tthis.each(function() {\n\t\t\tvar sliderElement = this;\n\t\t\tif (!this.classList.contains(CLASS_SLIDER)) {\n\t\t\t\tsliderElement = this.querySelector('.' + CLASS_SLIDER);\n\t\t\t}\n\t\t\tif (sliderElement && sliderElement.querySelector(SELECTOR_SLIDER_ITEM)) {\n\t\t\t\tvar id = sliderElement.getAttribute('data-slider');\n\t\t\t\tif (!id) {\n\t\t\t\t\tid = ++$.uuid;\n\t\t\t\t\t$.data[id] = slider = new Slider(sliderElement, options);\n\t\t\t\t\tsliderElement.setAttribute('data-slider', id);\n\t\t\t\t} else {\n\t\t\t\t\tslider = $.data[id];\n\t\t\t\t\tif (slider && options) {\n\t\t\t\t\t\tslider.refresh(options);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn slider;\n\t};\n\t$.ready(function() {\n\t\t//\t\tsetTimeout(function() {\n\t\t$('.mui-slider').slider();\n\t\t$('.mui-scroll-wrapper.mui-slider-indicator.mui-segmented-control').scroll({\n\t\t\tscrollY: false,\n\t\t\tscrollX: true,\n\t\t\tindicators: false,\n\t\t\tsnap: '.mui-control-item'\n\t\t});\n\t\t//\t\t}, 500); //临时处理slider宽度计算不正确的问题(初步确认是scrollbar导致的)\n\n\t});\n})(mui, window);\n/**\n * pullRefresh 5+\n * @param {type} $\n * @returns {undefined}\n */\n(function($, document) {\n\tif (!($.os.plus && $.os.android)) { //仅在android的5+版本使用\n\t\treturn;\n\t}\n\tvar CLASS_PLUS_PULLREFRESH = 'mui-plus-pullrefresh';\n\tvar CLASS_VISIBILITY = 'mui-visibility';\n\tvar CLASS_HIDDEN = 'mui-hidden';\n\tvar CLASS_BLOCK = 'mui-block';\n\n\tvar CLASS_PULL_CAPTION = 'mui-pull-caption';\n\tvar CLASS_PULL_CAPTION_DOWN = 'mui-pull-caption-down';\n\tvar CLASS_PULL_CAPTION_REFRESH = 'mui-pull-caption-refresh';\n\tvar CLASS_PULL_CAPTION_NOMORE = 'mui-pull-caption-nomore';\n\n\tvar PlusPullRefresh = $.Class.extend({\n\t\tinit: function(element, options) {\n\t\t\tthis.element = element;\n\t\t\tthis.options = options;\n\t\t\tthis.wrapper = this.scroller = element;\n\t\t\tthis._init();\n\t\t\tthis._initPulldownRefreshEvent();\n\t\t},\n\t\t_init: function() {\n\t\t\tvar self = this;\n\t\t\t//\t\t\tdocument.addEventListener('plusscrollbottom', this);\n\t\t\twindow.addEventListener('dragup', self);\n\t\t\tdocument.addEventListener(\"plusscrollbottom\", self);\n\t\t\tself.scrollInterval = window.setInterval(function() {\n\t\t\t\tif (self.isScroll && !self.loading) {\n\t\t\t\t\tif (window.pageYOffset + window.innerHeight + 10 >= document.documentElement.scrollHeight) {\n\t\t\t\t\t\tself.isScroll = false; //放在这里是因为快速滚动的话，有可能检测时，还没到底，所以只要有滚动，没到底之前一直检测高度变化\n\t\t\t\t\t\tif (self.bottomPocket) {\n\t\t\t\t\t\t\tself.pullupLoading();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t},\n\t\t_initPulldownRefreshEvent: function() {\n\t\t\tvar self = this;\n\t\t\tif (self.topPocket && self.options.webviewId) {\n\t\t\t\t$.plusReady(function() {\n\t\t\t\t\tvar webview = plus.webview.getWebviewById(self.options.webviewId);\n\t\t\t\t\tif (!webview) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tself.options.webview = webview;\n\t\t\t\t\tvar downOptions = self.options.down;\n\t\t\t\t\tvar height = downOptions.height;\n\t\t\t\t\twebview.addEventListener(\"dragBounce\", function(e) {\n\t\t\t\t\t\tif (!self.pulldown) {\n\t\t\t\t\t\t\tself._initPulldownRefresh();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tself.pullPocket.classList.add(CLASS_BLOCK);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tswitch (e.status) {\n\t\t\t\t\t\t\tcase \"beforeChangeOffset\": //下拉可刷新状态\n\t\t\t\t\t\t\t\tself._setCaption(downOptions.contentdown);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"afterChangeOffset\": //松开可刷新状态\n\t\t\t\t\t\t\t\tself._setCaption(downOptions.contentover);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"dragEndAfterChangeOffset\": //正在刷新状态\n\t\t\t\t\t\t\t\t//执行下拉刷新所在webview的回调函数\n\t\t\t\t\t\t\t\twebview.evalJS(\"mui&&mui.options.pullRefresh.down.callback()\");\n\t\t\t\t\t\t\t\tself._setCaption(downOptions.contentrefresh);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}, false);\n\t\t\t\t\twebview.setBounce({\n\t\t\t\t\t\tposition: {\n\t\t\t\t\t\t\ttop: height * 2 + 'px'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tchangeoffset: {\n\t\t\t\t\t\t\ttop: height + 'px'\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\thandleEvent: function(e) {\n\t\t\tvar self = this;\n\t\t\tif (self.stopped) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t//5+的plusscrollbottom当页面内容较少时，不触发\n\t\t\t//\t\t\tif (e.type === 'plusscrollbottom') {\n\t\t\t//\t\t\t\tif (this.bottomPocket) {\n\t\t\t//\t\t\t\t\tthis.pullupLoading();\n\t\t\t//\t\t\t\t}\n\t\t\t//\t\t\t}\n\t\t\tself.isScroll = false;\n\t\t\tif (e.type === 'dragup' || e.type === 'plusscrollbottom') {\n\t\t\t\tself.isScroll = true;\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tself.isScroll = false;\n\t\t\t\t}, 1000);\n\t\t\t}\n\t\t}\n\t}).extend($.extend({\n\t\tsetStopped: function(stopped) { //该方法是子页面调用的\n\t\t\tthis.stopped = !!stopped;\n\t\t\t//TODO 此处需要设置当前webview的bounce为none,目前5+有BUG\n\t\t\tvar webview = plus.webview.currentWebview();\n\t\t\tif (this.stopped) {\n\t\t\t\twebview.setStyle({\n\t\t\t\t\tbounce: 'none'\n\t\t\t\t});\n\t\t\t\twebview.setBounce({\n\t\t\t\t\tposition: {\n\t\t\t\t\t\ttop: 'none'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tvar height = this.options.down.height;\n\t\t\t\twebview.setStyle({\n\t\t\t\t\tbounce: 'vertical'\n\t\t\t\t});\n\t\t\t\twebview.setBounce({\n\t\t\t\t\tposition: {\n\t\t\t\t\t\ttop: height * 2 + 'px'\n\t\t\t\t\t},\n\t\t\t\t\tchangeoffset: {\n\t\t\t\t\t\ttop: height + 'px'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tpulldownLoading: function() { //该方法是子页面调用的\n\t\t\t$.plusReady(function() {\n\t\t\t\tplus.webview.currentWebview().setBounce({\n\t\t\t\t\toffset: {\n\t\t\t\t\t\ttop: this.options.down.height + \"px\"\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}.bind(this));\n\t\t},\n\t\t//\t\t_pulldownLoading: function() { //该方法是子页面调用的\n\t\t//\t\t\tvar self = this;\n\t\t//\t\t\t$.plusReady(function() {\n\t\t//\t\t\t\tplus.webview.getWebviewById(self.options.webviewId).evalJS(\"mui&&mui.options.pullRefresh.down&&mui.options.pullRefresh.down.callback()\");\n\t\t//\t\t\t});\n\t\t//\t\t},\n\t\tendPulldownToRefresh: function() { //该方法是子页面调用的\n\t\t\tvar webview = plus.webview.currentWebview();\n\t\t\twebview.parent().evalJS(\"mui&&mui(document.querySelector('.mui-content')).pullRefresh('\" + JSON.stringify({\n\t\t\t\twebviewId: webview.id\n\t\t\t}) + \"')._endPulldownToRefresh()\");\n\t\t},\n\t\t_endPulldownToRefresh: function() { //该方法是父页面调用的\n\t\t\tvar self = this;\n\t\t\tif (self.topPocket && self.options.webview) {\n\t\t\t\tself.options.webview.endPullToRefresh(); //下拉刷新所在webview回弹\n\t\t\t\tself.loading = false;\n\t\t\t\tself._setCaption(self.options.down.contentdown, true);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tself.loading || self.topPocket.classList.remove(CLASS_BLOCK);\n\t\t\t\t}, 350);\n\t\t\t}\n\t\t},\n\t\tpullupLoading: function(callback) {\n\t\t\tvar self = this;\n\t\t\tif (self.isLoading) return;\n\t\t\tself.isLoading = true;\n\t\t\tif (self.pulldown !== false) {\n\t\t\t\tself._initPullupRefresh();\n\t\t\t} else {\n\t\t\t\tthis.pullPocket.classList.add(CLASS_BLOCK);\n\t\t\t}\n\t\t\tsetTimeout(function() {\n\t\t\t\tself.pullLoading.classList.add(CLASS_VISIBILITY);\n\t\t\t\tself.pullLoading.classList.remove(CLASS_HIDDEN);\n\t\t\t\tself.pullCaption.innerHTML = ''; //修正5+里边第一次加载时，文字显示的bug(还会显示出来个“多”,猜测应该是渲染问题导致的)\n\t\t\t\tself.pullCaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_REFRESH;\n\t\t\t\tself.pullCaption.innerHTML = self.options.up.contentrefresh;\n\t\t\t\tcallback = callback || self.options.up.callback;\n\t\t\t\tcallback && callback.call(self);\n\t\t\t}, 300);\n\t\t},\n\t\tendPullupToRefresh: function(finished) {\n\t\t\tvar self = this;\n\t\t\tif (self.pullLoading) {\n\t\t\t\tself.pullLoading.classList.remove(CLASS_VISIBILITY);\n\t\t\t\tself.pullLoading.classList.add(CLASS_HIDDEN);\n\t\t\t\tself.isLoading = false;\n\t\t\t\tif (finished) {\n\t\t\t\t\tself.finished = true;\n\t\t\t\t\tself.pullCaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_NOMORE;\n\t\t\t\t\tself.pullCaption.innerHTML = self.options.up.contentnomore;\n\t\t\t\t\t//\t\t\t\t\tself.bottomPocket.classList.remove(CLASS_BLOCK);\n\t\t\t\t\t//\t\t\t\t\tself.bottomPocket.classList.add(CLASS_HIDDEN);\n\t\t\t\t\t//取消5+的plusscrollbottom事件\n\t\t\t\t\tdocument.removeEventListener('plusscrollbottom', self);\n\t\t\t\t\twindow.removeEventListener('dragup', self);\n\t\t\t\t} else { //初始化时隐藏，后续不再隐藏\n\t\t\t\t\tself.pullCaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_DOWN;\n\t\t\t\t\tself.pullCaption.innerHTML = self.options.up.contentdown;\n\t\t\t\t\t//\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t//\t\t\t\t\t\tself.loading || self.bottomPocket.classList.remove(CLASS_BLOCK);\n\t\t\t\t\t//\t\t\t\t\t}, 350);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdisablePullupToRefresh: function() {\n\t\t\tthis._initPullupRefresh();\n\t\t\tthis.bottomPocket.className = 'mui-pull-bottom-pocket' + ' ' + CLASS_HIDDEN;\n\t\t\twindow.removeEventListener('dragup', this);\n\t\t},\n\t\tenablePullupToRefresh: function() {\n\t\t\tthis._initPullupRefresh();\n\t\t\tthis.bottomPocket.classList.remove(CLASS_HIDDEN);\n\t\t\tthis.pullCaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_DOWN;\n\t\t\tthis.pullCaption.innerHTML = this.options.up.contentdown;\n\t\t\tdocument.addEventListener(\"plusscrollbottom\", this);\n\t\t\twindow.addEventListener('dragup', this);\n\t\t},\n\t\tscrollTo: function(x, y, time) {\n\t\t\t$.scrollTo(y, time);\n\t\t},\n\t\trefresh: function(isReset) {\n\t\t\tif (isReset && this.finished) {\n\t\t\t\tthis.enablePullupToRefresh();\n\t\t\t\tthis.finished = false;\n\t\t\t}\n\t\t}\n\t}, $.PullRefresh));\n\n\t//override h5 pullRefresh\n\t$.fn.pullRefresh = function(options) {\n\t\tvar self;\n\t\tif (this.length === 0) {\n\t\t\tself = document.createElement('div');\n\t\t\tself.className = 'mui-content';\n\t\t\tdocument.body.appendChild(self);\n\t\t} else {\n\t\t\tself = this[0];\n\t\t}\n\t\t//一个父需要支持多个子下拉刷新\n\t\toptions = options || {}\n\t\tif (typeof options === 'string') {\n\t\t\toptions = $.parseJSON(options);\n\t\t};\n\t\t!options.webviewId && (options.webviewId = (plus.webview.currentWebview().id || plus.webview.currentWebview().getURL()));\n\t\tvar pullRefreshApi = null;\n\t\tvar attrWebviewId = options.webviewId && options.webviewId.replace(/\\//g, \"_\"); //替换所有\"/\"\n\t\tvar id = self.getAttribute('data-pullrefresh-plus-' + attrWebviewId);\n\t\tif (!id) { //避免重复初始化5+ pullrefresh\n\t\t\tid = ++$.uuid;\n\t\t\tself.setAttribute('data-pullrefresh-plus-' + attrWebviewId, id);\n\t\t\tdocument.body.classList.add(CLASS_PLUS_PULLREFRESH);\n\t\t\t$.data[id] = pullRefreshApi = new PlusPullRefresh(self, options);\n\t\t} else {\n\t\t\tpullRefreshApi = $.data[id];\n\t\t}\n\t\tif (options.down && options.down.auto) { //如果设置了auto，则自动下拉一次\n\t\t\tpullRefreshApi.pulldownLoading(); //parent webview\n\t\t} else if (options.up && options.up.auto) { //如果设置了auto，则自动上拉一次\n\t\t\tpullRefreshApi.pullupLoading();\n\t\t}\n\t\treturn pullRefreshApi;\n\t};\n})(mui, document);\n/**\n * off-canvas\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @param {type} action\n * @returns {undefined}\n */\n(function($, window, document, name) {\n\tvar CLASS_OFF_CANVAS_LEFT = 'mui-off-canvas-left';\n\tvar CLASS_OFF_CANVAS_RIGHT = 'mui-off-canvas-right';\n\tvar CLASS_ACTION_BACKDROP = 'mui-off-canvas-backdrop';\n\tvar CLASS_OFF_CANVAS_WRAP = 'mui-off-canvas-wrap';\n\n\tvar CLASS_SLIDE_IN = 'mui-slide-in';\n\tvar CLASS_ACTIVE = 'mui-active';\n\n\n\tvar CLASS_TRANSITIONING = 'mui-transitioning';\n\n\tvar SELECTOR_INNER_WRAP = '.mui-inner-wrap';\n\n\n\tvar OffCanvas = $.Class.extend({\n\t\tinit: function(element, options) {\n\t\t\tthis.wrapper = this.element = element;\n\t\t\tthis.scroller = this.wrapper.querySelector(SELECTOR_INNER_WRAP);\n\t\t\tthis.classList = this.wrapper.classList;\n\t\t\tif (this.scroller) {\n\t\t\t\tthis.options = $.extend(true, {\n\t\t\t\t\tdragThresholdX: 10,\n\t\t\t\t\tscale: 0.8,\n\t\t\t\t\topacity: 0.1,\n\t\t\t\t\tpreventDefaultException: {\n\t\t\t\t\t\ttagName: /^(INPUT|TEXTAREA|BUTTON|SELECT|VIDEO)$/\n\t\t\t\t\t},\n\t\t\t\t}, options);\n\t\t\t\tdocument.body.classList.add('mui-fullscreen'); //fullscreen\n\t\t\t\tthis.refresh();\n\t\t\t\tthis.initEvent();\n\t\t\t}\n\t\t},\n\t\t_preventDefaultException: function(el, exceptions) {\n\t\t\tfor (var i in exceptions) {\n\t\t\t\tif (exceptions[i].test(el[i])) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\trefresh: function(offCanvas) {\n\t\t\t//\t\t\toffCanvas && !offCanvas.classList.contains(CLASS_ACTIVE) && this.classList.remove(CLASS_ACTIVE);\n\t\t\tthis.slideIn = this.classList.contains(CLASS_SLIDE_IN);\n\t\t\tthis.scalable = this.classList.contains('mui-scalable') && !this.slideIn;\n\t\t\tthis.scroller = this.wrapper.querySelector(SELECTOR_INNER_WRAP);\n\t\t\t//\t\t\t!offCanvas && this.scroller.classList.remove(CLASS_TRANSITIONING);\n\t\t\t//\t\t\t!offCanvas && this.scroller.setAttribute('style', '');\n\t\t\tthis.offCanvasLefts = this.wrapper.querySelectorAll('.' + CLASS_OFF_CANVAS_LEFT);\n\t\t\tthis.offCanvasRights = this.wrapper.querySelectorAll('.' + CLASS_OFF_CANVAS_RIGHT);\n\t\t\tif (offCanvas) {\n\t\t\t\tif (offCanvas.classList.contains(CLASS_OFF_CANVAS_LEFT)) {\n\t\t\t\t\tthis.offCanvasLeft = offCanvas;\n\t\t\t\t} else if (offCanvas.classList.contains(CLASS_OFF_CANVAS_RIGHT)) {\n\t\t\t\t\tthis.offCanvasRight = offCanvas;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.offCanvasRight = this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT);\n\t\t\t\tthis.offCanvasLeft = this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_LEFT);\n\t\t\t}\n\t\t\tthis.offCanvasRightWidth = this.offCanvasLeftWidth = 0;\n\t\t\tthis.offCanvasLeftSlideIn = this.offCanvasRightSlideIn = false;\n\t\t\tif (this.offCanvasRight) {\n\t\t\t\tthis.offCanvasRightWidth = this.offCanvasRight.offsetWidth;\n\t\t\t\tthis.offCanvasRightSlideIn = this.slideIn && (this.offCanvasRight.parentNode === this.wrapper);\n\t\t\t\t//\t\t\t\tthis.offCanvasRight.classList.remove(CLASS_TRANSITIONING);\n\t\t\t\t//\t\t\t\tthis.offCanvasRight.classList.remove(CLASS_ACTIVE);\n\t\t\t\t//\t\t\t\tthis.offCanvasRight.setAttribute('style', '');\n\t\t\t}\n\t\t\tif (this.offCanvasLeft) {\n\t\t\t\tthis.offCanvasLeftWidth = this.offCanvasLeft.offsetWidth;\n\t\t\t\tthis.offCanvasLeftSlideIn = this.slideIn && (this.offCanvasLeft.parentNode === this.wrapper);\n\t\t\t\t//\t\t\t\tthis.offCanvasLeft.classList.remove(CLASS_TRANSITIONING);\n\t\t\t\t//\t\t\t\tthis.offCanvasLeft.classList.remove(CLASS_ACTIVE);\n\t\t\t\t//\t\t\t\tthis.offCanvasLeft.setAttribute('style', '');\n\t\t\t}\n\t\t\tthis.backdrop = this.scroller.querySelector('.' + CLASS_ACTION_BACKDROP);\n\n\t\t\tthis.options.dragThresholdX = this.options.dragThresholdX || 10;\n\n\t\t\tthis.visible = false;\n\t\t\tthis.startX = null;\n\t\t\tthis.lastX = null;\n\t\t\tthis.offsetX = null;\n\t\t\tthis.lastTranslateX = null;\n\t\t},\n\t\thandleEvent: function(e) {\n\t\t\tswitch (e.type) {\n\t\t\t\tcase $.EVENT_START:\n\t\t\t\t\te.target && !this._preventDefaultException(e.target, this.options.preventDefaultException) && e.preventDefault();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'webkitTransitionEnd': //有个bug需要处理，需要考虑假设没有触发webkitTransitionEnd的情况\n\t\t\t\t\tif (e.target === this.scroller) {\n\t\t\t\t\t\tthis._dispatchEvent();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'drag':\n\t\t\t\t\tvar detail = e.detail;\n\t\t\t\t\tif (!this.startX) {\n\t\t\t\t\t\tthis.startX = detail.center.x;\n\t\t\t\t\t\tthis.lastX = this.startX;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.lastX = detail.center.x;\n\t\t\t\t\t}\n\t\t\t\t\tif (!this.isDragging && Math.abs(this.lastX - this.startX) > this.options.dragThresholdX && (detail.direction === 'left' || (detail.direction === 'right'))) {\n\t\t\t\t\t\tif (this.slideIn) {\n\t\t\t\t\t\t\tthis.scroller = this.wrapper.querySelector(SELECTOR_INNER_WRAP);\n\t\t\t\t\t\t\tif (this.classList.contains(CLASS_ACTIVE)) {\n\t\t\t\t\t\t\t\tif (this.offCanvasRight && this.offCanvasRight.classList.contains(CLASS_ACTIVE)) {\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasRight;\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasRightWidth;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasLeft;\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasLeftWidth;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (detail.direction === 'left' && this.offCanvasRight) {\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasRight;\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasRightWidth;\n\t\t\t\t\t\t\t\t} else if (detail.direction === 'right' && this.offCanvasLeft) {\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasLeft;\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasLeftWidth;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.scroller = null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (this.classList.contains(CLASS_ACTIVE)) {\n\t\t\t\t\t\t\t\tif (detail.direction === 'left') {\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasLeft;\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasLeftWidth;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasRight;\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasRightWidth;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (detail.direction === 'right') {\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasLeft;\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasLeftWidth;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasRight;\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasRightWidth;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.offCanvas && this.scroller) {\n\t\t\t\t\t\t\tthis.startX = this.lastX;\n\t\t\t\t\t\t\tthis.isDragging = true;\n\n\t\t\t\t\t\t\t$.gestures.session.lockDirection = true; //锁定方向\n\t\t\t\t\t\t\t$.gestures.session.startDirection = detail.direction;\n\n\t\t\t\t\t\t\tthis.offCanvas.classList.remove(CLASS_TRANSITIONING);\n\t\t\t\t\t\t\tthis.scroller.classList.remove(CLASS_TRANSITIONING);\n\t\t\t\t\t\t\tthis.offsetX = this.getTranslateX();\n\t\t\t\t\t\t\tthis._initOffCanvasVisible();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (this.isDragging) {\n\t\t\t\t\t\tthis.updateTranslate(this.offsetX + (this.lastX - this.startX));\n\t\t\t\t\t\tdetail.gesture.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'dragend':\n\t\t\t\t\tif (this.isDragging) {\n\t\t\t\t\t\tvar detail = e.detail;\n\t\t\t\t\t\tvar direction = detail.direction;\n\t\t\t\t\t\tthis.isDragging = false;\n\t\t\t\t\t\tthis.offCanvas.classList.add(CLASS_TRANSITIONING);\n\t\t\t\t\t\tthis.scroller.classList.add(CLASS_TRANSITIONING);\n\t\t\t\t\t\tvar ratio = 0;\n\t\t\t\t\t\tvar x = this.getTranslateX();\n\t\t\t\t\t\tif (!this.slideIn) {\n\t\t\t\t\t\t\tif (x >= 0) {\n\t\t\t\t\t\t\t\tratio = (this.offCanvasLeftWidth && (x / this.offCanvasLeftWidth)) || 0;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tratio = (this.offCanvasRightWidth && (x / this.offCanvasRightWidth)) || 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (ratio === 0) {\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t\tthis._dispatchEvent(); //此处不触发webkitTransitionEnd,所以手动dispatch\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (direction === 'right' && ratio >= 0 && (ratio >= 0.5 || detail.swipe)) { //右滑打开\n\t\t\t\t\t\t\t\tthis.openPercentage(100);\n\t\t\t\t\t\t\t} else if (direction === 'right' && ratio < 0 && (ratio > -0.5 || detail.swipe)) { //右滑关闭\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t} else if (direction === 'right' && ratio > 0 && ratio < 0.5) { //右滑还原关闭\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t} else if (direction === 'right' && ratio < 0.5) { //右滑还原打开\n\t\t\t\t\t\t\t\tthis.openPercentage(-100);\n\t\t\t\t\t\t\t} else if (direction === 'left' && ratio <= 0 && (ratio <= -0.5 || detail.swipe)) { //左滑打开\n\t\t\t\t\t\t\t\tthis.openPercentage(-100);\n\t\t\t\t\t\t\t} else if (direction === 'left' && ratio > 0 && (ratio <= 0.5 || detail.swipe)) { //左滑关闭\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t} else if (direction === 'left' && ratio < 0 && ratio >= -0.5) { //左滑还原关闭\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t} else if (direction === 'left' && ratio > 0.5) { //左滑还原打开\n\t\t\t\t\t\t\t\tthis.openPercentage(100);\n\t\t\t\t\t\t\t} else { //默认关闭\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (ratio === 1 || ratio === -1) { //此处不触发webkitTransitionEnd,所以手动dispatch\n\t\t\t\t\t\t\t\tthis._dispatchEvent();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (x >= 0) {\n\t\t\t\t\t\t\t\tratio = (this.offCanvasRightWidth && (x / this.offCanvasRightWidth)) || 0;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tratio = (this.offCanvasLeftWidth && (x / this.offCanvasLeftWidth)) || 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (direction === 'right' && ratio <= 0 && (ratio >= -0.5 || detail.swipe)) { //右滑打开\n\t\t\t\t\t\t\t\tthis.openPercentage(100);\n\t\t\t\t\t\t\t} else if (direction === 'right' && ratio > 0 && (ratio >= 0.5 || detail.swipe)) { //右滑关闭\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t} else if (direction === 'right' && ratio <= -0.5) { //右滑还原关闭\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t} else if (direction === 'right' && ratio > 0 && ratio <= 0.5) { //右滑还原打开\n\t\t\t\t\t\t\t\tthis.openPercentage(-100);\n\t\t\t\t\t\t\t} else if (direction === 'left' && ratio >= 0 && (ratio <= 0.5 || detail.swipe)) { //左滑打开\n\t\t\t\t\t\t\t\tthis.openPercentage(-100);\n\t\t\t\t\t\t\t} else if (direction === 'left' && ratio < 0 && (ratio <= -0.5 || detail.swipe)) { //左滑关闭\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t} else if (direction === 'left' && ratio >= 0.5) { //左滑还原关闭\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t} else if (direction === 'left' && ratio >= -0.5 && ratio < 0) { //左滑还原打开\n\t\t\t\t\t\t\t\tthis.openPercentage(100);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (ratio === 1 || ratio === -1 || ratio === 0) {\n\t\t\t\t\t\t\t\tthis._dispatchEvent();\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t_dispatchEvent: function() {\n\t\t\tif (this.classList.contains(CLASS_ACTIVE)) {\n\t\t\t\t$.trigger(this.wrapper, 'shown', this);\n\t\t\t} else {\n\t\t\t\t$.trigger(this.wrapper, 'hidden', this);\n\t\t\t}\n\t\t},\n\t\t_initOffCanvasVisible: function() {\n\t\t\tif (!this.visible) {\n\t\t\t\tthis.visible = true;\n\t\t\t\tif (this.offCanvasLeft) {\n\t\t\t\t\tthis.offCanvasLeft.style.visibility = 'visible';\n\t\t\t\t}\n\t\t\t\tif (this.offCanvasRight) {\n\t\t\t\t\tthis.offCanvasRight.style.visibility = 'visible';\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tinitEvent: function() {\n\t\t\tvar self = this;\n\t\t\tif (self.backdrop) {\n\t\t\t\tself.backdrop.addEventListener('tap', function(e) {\n\t\t\t\t\tself.close();\n\t\t\t\t\te.detail.gesture.preventDefault();\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (this.classList.contains('mui-draggable')) {\n\t\t\t\tthis.wrapper.addEventListener($.EVENT_START, this); //临时处理\n\t\t\t\tthis.wrapper.addEventListener('drag', this);\n\t\t\t\tthis.wrapper.addEventListener('dragend', this);\n\t\t\t}\n\t\t\tthis.wrapper.addEventListener('webkitTransitionEnd', this);\n\t\t},\n\t\topenPercentage: function(percentage) {\n\t\t\tvar p = percentage / 100;\n\t\t\tif (!this.slideIn) {\n\t\t\t\tif (this.offCanvasLeft && percentage >= 0) {\n\t\t\t\t\tthis.updateTranslate(this.offCanvasLeftWidth * p);\n\t\t\t\t\tthis.offCanvasLeft.classList[p !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n\t\t\t\t} else if (this.offCanvasRight && percentage <= 0) {\n\t\t\t\t\tthis.updateTranslate(this.offCanvasRightWidth * p);\n\t\t\t\t\tthis.offCanvasRight.classList[p !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n\t\t\t\t}\n\t\t\t\tthis.classList[p !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n\t\t\t} else {\n\t\t\t\tif (this.offCanvasLeft && percentage >= 0) {\n\t\t\t\t\tp = p === 0 ? -1 : 0;\n\t\t\t\t\tthis.updateTranslate(this.offCanvasLeftWidth * p);\n\t\t\t\t\tthis.offCanvasLeft.classList[percentage !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n\t\t\t\t} else if (this.offCanvasRight && percentage <= 0) {\n\t\t\t\t\tp = p === 0 ? 1 : 0;\n\t\t\t\t\tthis.updateTranslate(this.offCanvasRightWidth * p);\n\t\t\t\t\tthis.offCanvasRight.classList[percentage !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n\t\t\t\t}\n\t\t\t\tthis.classList[percentage !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n\t\t\t}\n\t\t},\n\t\tupdateTranslate: function(x) {\n\t\t\tif (x !== this.lastTranslateX) {\n\t\t\t\tif (!this.slideIn) {\n\t\t\t\t\tif ((!this.offCanvasLeft && x > 0) || (!this.offCanvasRight && x < 0)) {\n\t\t\t\t\t\tthis.setTranslateX(0);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.leftShowing && x > this.offCanvasLeftWidth) {\n\t\t\t\t\t\tthis.setTranslateX(this.offCanvasLeftWidth);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.rightShowing && x < -this.offCanvasRightWidth) {\n\t\t\t\t\t\tthis.setTranslateX(-this.offCanvasRightWidth);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.setTranslateX(x);\n\t\t\t\t\tif (x >= 0) {\n\t\t\t\t\t\tthis.leftShowing = true;\n\t\t\t\t\t\tthis.rightShowing = false;\n\t\t\t\t\t\tif (x > 0) {\n\t\t\t\t\t\t\tif (this.offCanvasLeft) {\n\t\t\t\t\t\t\t\t$.each(this.offCanvasLefts, function(index, offCanvas) {\n\t\t\t\t\t\t\t\t\tif (offCanvas === this.offCanvasLeft) {\n\t\t\t\t\t\t\t\t\t\tthis.offCanvasLeft.style.zIndex = 0;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\toffCanvas.style.zIndex = -1;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}.bind(this));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (this.offCanvasRight) {\n\t\t\t\t\t\t\t\tthis.offCanvasRight.style.zIndex = -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.rightShowing = true;\n\t\t\t\t\t\tthis.leftShowing = false;\n\t\t\t\t\t\tif (this.offCanvasRight) {\n\t\t\t\t\t\t\t$.each(this.offCanvasRights, function(index, offCanvas) {\n\t\t\t\t\t\t\t\tif (offCanvas === this.offCanvasRight) {\n\t\t\t\t\t\t\t\t\toffCanvas.style.zIndex = 0;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\toffCanvas.style.zIndex = -1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}.bind(this));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.offCanvasLeft) {\n\t\t\t\t\t\t\tthis.offCanvasLeft.style.zIndex = -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (this.offCanvas.classList.contains(CLASS_OFF_CANVAS_RIGHT)) {\n\t\t\t\t\t\tif (x < 0) {\n\t\t\t\t\t\t\tthis.setTranslateX(0);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (x > this.offCanvasRightWidth) {\n\t\t\t\t\t\t\tthis.setTranslateX(this.offCanvasRightWidth);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (x > 0) {\n\t\t\t\t\t\t\tthis.setTranslateX(0);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (x < -this.offCanvasLeftWidth) {\n\t\t\t\t\t\t\tthis.setTranslateX(-this.offCanvasLeftWidth);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.setTranslateX(x);\n\t\t\t\t}\n\t\t\t\tthis.lastTranslateX = x;\n\t\t\t}\n\t\t},\n\t\tsetTranslateX: $.animationFrame(function(x) {\n\t\t\tif (this.scroller) {\n\t\t\t\tif (this.scalable && this.offCanvas.parentNode === this.wrapper) {\n\t\t\t\t\tvar percent = Math.abs(x) / this.offCanvasWidth;\n\t\t\t\t\tvar zoomOutScale = 1 - (1 - this.options.scale) * percent;\n\t\t\t\t\tvar zoomInScale = this.options.scale + (1 - this.options.scale) * percent;\n\t\t\t\t\tvar zoomOutOpacity = 1 - (1 - this.options.opacity) * percent;\n\t\t\t\t\tvar zoomInOpacity = this.options.opacity + (1 - this.options.opacity) * percent;\n\t\t\t\t\tif (this.offCanvas.classList.contains(CLASS_OFF_CANVAS_LEFT)) {\n\t\t\t\t\t\tthis.offCanvas.style.webkitTransformOrigin = '-100%';\n\t\t\t\t\t\tthis.scroller.style.webkitTransformOrigin = 'left';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.offCanvas.style.webkitTransformOrigin = '200%';\n\t\t\t\t\t\tthis.scroller.style.webkitTransformOrigin = 'right';\n\t\t\t\t\t}\n\t\t\t\t\tthis.offCanvas.style.opacity = zoomInOpacity;\n\t\t\t\t\tthis.offCanvas.style.webkitTransform = 'translate3d(0,0,0) scale(' + zoomInScale + ')';\n\t\t\t\t\tthis.scroller.style.webkitTransform = 'translate3d(' + x + 'px,0,0) scale(' + zoomOutScale + ')';\n\t\t\t\t} else {\n\t\t\t\t\tif (this.slideIn) {\n\t\t\t\t\t\tthis.offCanvas.style.webkitTransform = 'translate3d(' + x + 'px,0,0)';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.scroller.style.webkitTransform = 'translate3d(' + x + 'px,0,0)';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}),\n\t\tgetTranslateX: function() {\n\t\t\tif (this.offCanvas) {\n\t\t\t\tvar scroller = this.slideIn ? this.offCanvas : this.scroller;\n\t\t\t\tvar result = $.parseTranslateMatrix($.getStyles(scroller, 'webkitTransform'));\n\t\t\t\treturn (result && result.x) || 0;\n\t\t\t}\n\t\t\treturn 0;\n\t\t},\n\t\tisShown: function(direction) {\n\t\t\tvar shown = false;\n\t\t\tif (!this.slideIn) {\n\t\t\t\tvar x = this.getTranslateX();\n\t\t\t\tif (direction === 'right') {\n\t\t\t\t\tshown = this.classList.contains(CLASS_ACTIVE) && x < 0;\n\t\t\t\t} else if (direction === 'left') {\n\t\t\t\t\tshown = this.classList.contains(CLASS_ACTIVE) && x > 0;\n\t\t\t\t} else {\n\t\t\t\t\tshown = this.classList.contains(CLASS_ACTIVE) && x !== 0;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (direction === 'left') {\n\t\t\t\t\tshown = this.classList.contains(CLASS_ACTIVE) && this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_LEFT + '.' + CLASS_ACTIVE);\n\t\t\t\t} else if (direction === 'right') {\n\t\t\t\t\tshown = this.classList.contains(CLASS_ACTIVE) && this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT + '.' + CLASS_ACTIVE);\n\t\t\t\t} else {\n\t\t\t\t\tshown = this.classList.contains(CLASS_ACTIVE) && (this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_LEFT + '.' + CLASS_ACTIVE) || this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT + '.' + CLASS_ACTIVE));\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn shown;\n\t\t},\n\t\tclose: function() {\n\t\t\tthis._initOffCanvasVisible();\n\t\t\tthis.offCanvas = this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT + '.' + CLASS_ACTIVE) || this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_LEFT + '.' + CLASS_ACTIVE);\n\t\t\tthis.offCanvasWidth = this.offCanvas.offsetWidth;\n\t\t\tif (this.scroller) {\n\t\t\t\tthis.offCanvas.offsetHeight;\n\t\t\t\tthis.offCanvas.classList.add(CLASS_TRANSITIONING);\n\t\t\t\tthis.scroller.classList.add(CLASS_TRANSITIONING);\n\t\t\t\tthis.openPercentage(0);\n\t\t\t}\n\t\t},\n\t\tshow: function(direction) {\n\t\t\tthis._initOffCanvasVisible();\n\t\t\tif (this.isShown(direction)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (!direction) {\n\t\t\t\tdirection = this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT) ? 'right' : 'left';\n\t\t\t}\n\t\t\tif (direction === 'right') {\n\t\t\t\tthis.offCanvas = this.offCanvasRight;\n\t\t\t\tthis.offCanvasWidth = this.offCanvasRightWidth;\n\t\t\t} else {\n\t\t\t\tthis.offCanvas = this.offCanvasLeft;\n\t\t\t\tthis.offCanvasWidth = this.offCanvasLeftWidth;\n\t\t\t}\n\t\t\tif (this.scroller) {\n\t\t\t\tthis.offCanvas.offsetHeight;\n\t\t\t\tthis.offCanvas.classList.add(CLASS_TRANSITIONING);\n\t\t\t\tthis.scroller.classList.add(CLASS_TRANSITIONING);\n\t\t\t\tthis.openPercentage(direction === 'left' ? 100 : -100);\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\ttoggle: function(directionOrOffCanvas) {\n\t\t\tvar direction = directionOrOffCanvas;\n\t\t\tif (directionOrOffCanvas && directionOrOffCanvas.classList) {\n\t\t\t\tdirection = directionOrOffCanvas.classList.contains(CLASS_OFF_CANVAS_LEFT) ? 'left' : 'right';\n\t\t\t\tthis.refresh(directionOrOffCanvas);\n\t\t\t}\n\t\t\tif (!this.show(direction)) {\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t}\n\t});\n\n\t//hash to offcanvas\n\tvar findOffCanvasContainer = function(target) {\n\t\tparentNode = target.parentNode;\n\t\tif (parentNode) {\n\t\t\tif (parentNode.classList.contains(CLASS_OFF_CANVAS_WRAP)) {\n\t\t\t\treturn parentNode;\n\t\t\t} else {\n\t\t\t\tparentNode = parentNode.parentNode;\n\t\t\t\tif (parentNode.classList.contains(CLASS_OFF_CANVAS_WRAP)) {\n\t\t\t\t\treturn parentNode;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tvar handle = function(event, target) {\n\t\tif (target.tagName === 'A' && target.hash) {\n\t\t\tvar offcanvas = document.getElementById(target.hash.replace('#', ''));\n\t\t\tif (offcanvas) {\n\t\t\t\tvar container = findOffCanvasContainer(offcanvas);\n\t\t\t\tif (container) {\n\t\t\t\t\t$.targets._container = container;\n\t\t\t\t\treturn offcanvas;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t};\n\n\t$.registerTarget({\n\t\tname: name,\n\t\tindex: 60,\n\t\thandle: handle,\n\t\ttarget: false,\n\t\tisReset: false,\n\t\tisContinue: true\n\t});\n\n\twindow.addEventListener('tap', function(e) {\n\t\tif (!$.targets.offcanvas) {\n\t\t\treturn;\n\t\t}\n\t\t//TODO 此处类型的代码后续考虑统一优化(target机制)，现在的实现费力不讨好\n\t\tvar target = e.target;\n\t\tfor (; target && target !== document; target = target.parentNode) {\n\t\t\tif (target.tagName === 'A' && target.hash && target.hash === ('#' + $.targets.offcanvas.id)) {\n\t\t\t\te.detail && e.detail.gesture && e.detail.gesture.preventDefault(); //fixed hashchange\n\t\t\t\t$($.targets._container).offCanvas().toggle($.targets.offcanvas);\n\t\t\t\t$.targets.offcanvas = $.targets._container = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t});\n\n\t$.fn.offCanvas = function(options) {\n\t\tvar offCanvasApis = [];\n\t\tthis.each(function() {\n\t\t\tvar offCanvasApi = null;\n\t\t\tvar self = this;\n\t\t\t//hack old version\n\t\t\tif (!self.classList.contains(CLASS_OFF_CANVAS_WRAP)) {\n\t\t\t\tself = findOffCanvasContainer(self);\n\t\t\t}\n\t\t\tvar id = self.getAttribute('data-offCanvas');\n\t\t\tif (!id) {\n\t\t\t\tid = ++$.uuid;\n\t\t\t\t$.data[id] = offCanvasApi = new OffCanvas(self, options);\n\t\t\t\tself.setAttribute('data-offCanvas', id);\n\t\t\t} else {\n\t\t\t\toffCanvasApi = $.data[id];\n\t\t\t}\n\t\t\tif (options === 'show' || options === 'close' || options === 'toggle') {\n\t\t\t\toffCanvasApi.toggle();\n\t\t\t}\n\t\t\toffCanvasApis.push(offCanvasApi);\n\t\t});\n\t\treturn offCanvasApis.length === 1 ? offCanvasApis[0] : offCanvasApis;\n\t};\n\t$.ready(function() {\n\t\t$('.mui-off-canvas-wrap').offCanvas();\n\t});\n})(mui, window, document, 'offcanvas');\n/**\n * actions\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n\tvar CLASS_ACTION = 'mui-action';\n\n\tvar handle = function(event, target) {\n\t\tvar className = target.className || '';\n\t\tif (typeof className !== 'string') { //svg className(SVGAnimatedString)\n\t\t\tclassName = '';\n\t\t}\n\t\tif (className && ~className.indexOf(CLASS_ACTION)) {\n\t\t\tif (target.classList.contains('mui-action-back')) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t\treturn target;\n\t\t}\n\t\treturn false;\n\t};\n\n\t$.registerTarget({\n\t\tname: name,\n\t\tindex: 50,\n\t\thandle: handle,\n\t\ttarget: false,\n\t\tisContinue: true\n\t});\n\n})(mui, 'action');\n/**\n * Modals\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @param {type} name\n * @returns {undefined}\n */\n(function($, window, document, name) {\n\tvar CLASS_MODAL = 'mui-modal';\n\n\tvar handle = function(event, target) {\n\t\tif (target.tagName === 'A' && target.hash) {\n\t\t\tvar modal = document.getElementById(target.hash.replace('#', ''));\n\t\t\tif (modal && modal.classList.contains(CLASS_MODAL)) {\n\t\t\t\treturn modal;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t};\n\n\t$.registerTarget({\n\t\tname: name,\n\t\tindex: 50,\n\t\thandle: handle,\n\t\ttarget: false,\n\t\tisReset: false,\n\t\tisContinue: true\n\t});\n\n\twindow.addEventListener('tap', function(event) {\n\t\tif ($.targets.modal) {\n\t\t\tevent.detail.gesture.preventDefault(); //fixed hashchange\n\t\t\t$.targets.modal.classList.toggle('mui-active');\n\t\t}\n\t});\n})(mui, window, document, 'modal');\n/**\n * Popovers\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @param {type} name\n * @param {type} undefined\n * @returns {undefined}\n */\n(function($, window, document, name) {\n\n\tvar CLASS_POPOVER = 'mui-popover';\n\tvar CLASS_POPOVER_ARROW = 'mui-popover-arrow';\n\tvar CLASS_ACTION_POPOVER = 'mui-popover-action';\n\tvar CLASS_BACKDROP = 'mui-backdrop';\n\tvar CLASS_BAR_POPOVER = 'mui-bar-popover';\n\tvar CLASS_BAR_BACKDROP = 'mui-bar-backdrop';\n\tvar CLASS_ACTION_BACKDROP = 'mui-backdrop-action';\n\tvar CLASS_ACTIVE = 'mui-active';\n\tvar CLASS_BOTTOM = 'mui-bottom';\n\n\n\n\tvar handle = function(event, target) {\n\t\tif (target.tagName === 'A' && target.hash) {\n\t\t\t$.targets._popover = document.getElementById(target.hash.replace('#', ''));\n\t\t\tif ($.targets._popover && $.targets._popover.classList.contains(CLASS_POPOVER)) {\n\t\t\t\treturn target;\n\t\t\t} else {\n\t\t\t\t$.targets._popover = null;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t};\n\n\t$.registerTarget({\n\t\tname: name,\n\t\tindex: 60,\n\t\thandle: handle,\n\t\ttarget: false,\n\t\tisReset: false,\n\t\tisContinue: true\n\t});\n\n\tvar fixedPopoverScroll = function(isPopoverScroll) {\n\t\t//\t\tif (isPopoverScroll) {\n\t\t//\t\t\tdocument.body.setAttribute('style', 'overflow:hidden;');\n\t\t//\t\t} else {\n\t\t//\t\t\tdocument.body.setAttribute('style', '');\n\t\t//\t\t}\n\t};\n\tvar onPopoverShown = function(e) {\n\t\tthis.removeEventListener('webkitTransitionEnd', onPopoverShown);\n\t\tthis.addEventListener($.EVENT_MOVE, $.preventDefault);\n\t\t$.trigger(this, 'shown', this);\n\t}\n\tvar onPopoverHidden = function(e) {\n\t\tsetStyle(this, 'none');\n\t\tthis.removeEventListener('webkitTransitionEnd', onPopoverHidden);\n\t\tthis.removeEventListener($.EVENT_MOVE, $.preventDefault);\n\t\tfixedPopoverScroll(false);\n\t\t$.trigger(this, 'hidden', this);\n\t};\n\n\tvar backdrop = (function() {\n\t\tvar element = document.createElement('div');\n\t\telement.classList.add(CLASS_BACKDROP);\n\t\telement.addEventListener($.EVENT_MOVE, $.preventDefault);\n\t\telement.addEventListener('tap', function(e) {\n\t\t\tvar popover = $.targets._popover;\n\t\t\tif (popover) {\n\t\t\t\tpopover.addEventListener('webkitTransitionEnd', onPopoverHidden);\n\t\t\t\tpopover.classList.remove(CLASS_ACTIVE);\n\t\t\t\tremoveBackdrop(popover);\n\t\t\t\tdocument.body.setAttribute('style', ''); //webkitTransitionEnd有时候不触发？\n\t\t\t}\n\t\t});\n\n\t\treturn element;\n\t}());\n\tvar removeBackdropTimer;\n\tvar removeBackdrop = function(popover) {\n\t\tbackdrop.setAttribute('style', 'opacity:0');\n\t\t$.targets.popover = $.targets._popover = null; //reset\n\t\tremoveBackdropTimer = $.later(function() {\n\t\t\tif (!popover.classList.contains(CLASS_ACTIVE) && backdrop.parentNode && backdrop.parentNode === document.body) {\n\t\t\t\tdocument.body.removeChild(backdrop);\n\t\t\t}\n\t\t}, 350);\n\t};\n\twindow.addEventListener('tap', function(e) {\n\t\tif (!$.targets.popover) {\n\t\t\treturn;\n\t\t}\n\t\tvar toggle = false;\n\t\tvar target = e.target;\n\t\tfor (; target && target !== document; target = target.parentNode) {\n\t\t\tif (target === $.targets.popover) {\n\t\t\t\ttoggle = true;\n\t\t\t}\n\t\t}\n\t\tif (toggle) {\n\t\t\te.detail.gesture.preventDefault(); //fixed hashchange\n\t\t\ttogglePopover($.targets._popover, $.targets.popover);\n\t\t}\n\n\t});\n\n\tvar togglePopover = function(popover, anchor, state) {\n\t\tif ((state === 'show' && popover.classList.contains(CLASS_ACTIVE)) || (state === 'hide' && !popover.classList.contains(CLASS_ACTIVE))) {\n\t\t\treturn;\n\t\t}\n\t\tremoveBackdropTimer && removeBackdropTimer.cancel(); //取消remove的timer\n\t\t//remove一遍，以免来回快速切换，导致webkitTransitionEnd不触发，无法remove\n\t\tpopover.removeEventListener('webkitTransitionEnd', onPopoverShown);\n\t\tpopover.removeEventListener('webkitTransitionEnd', onPopoverHidden);\n\t\tbackdrop.classList.remove(CLASS_BAR_BACKDROP);\n\t\tbackdrop.classList.remove(CLASS_ACTION_BACKDROP);\n\t\tvar _popover = document.querySelector('.mui-popover.mui-active');\n\t\tif (_popover) {\n\t\t\t//\t\t\t_popover.setAttribute('style', '');\n\t\t\t_popover.addEventListener('webkitTransitionEnd', onPopoverHidden);\n\t\t\t_popover.classList.remove(CLASS_ACTIVE);\n\t\t\t//\t\t\t_popover.removeEventListener('webkitTransitionEnd', onPopoverHidden);\n\t\t\t//\t\t\tfixedPopoverScroll(false);\n\t\t\t//同一个弹出则直接返回，解决同一个popover的toggle\n\t\t\tif (popover === _popover) {\n\t\t\t\tremoveBackdrop(_popover);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tvar isActionSheet = false;\n\t\tif (popover.classList.contains(CLASS_BAR_POPOVER) || popover.classList.contains(CLASS_ACTION_POPOVER)) { //navBar\n\t\t\tif (popover.classList.contains(CLASS_ACTION_POPOVER)) { //action sheet popover\n\t\t\t\tisActionSheet = true;\n\t\t\t\tbackdrop.classList.add(CLASS_ACTION_BACKDROP);\n\t\t\t} else { //bar popover\n\t\t\t\tbackdrop.classList.add(CLASS_BAR_BACKDROP);\n\t\t\t\t//\t\t\t\tif (anchor) {\n\t\t\t\t//\t\t\t\t\tif (anchor.parentNode) {\n\t\t\t\t//\t\t\t\t\t\tvar offsetWidth = anchor.offsetWidth;\n\t\t\t\t//\t\t\t\t\t\tvar offsetLeft = anchor.offsetLeft;\n\t\t\t\t//\t\t\t\t\t\tvar innerWidth = window.innerWidth;\n\t\t\t\t//\t\t\t\t\t\tpopover.style.left = (Math.min(Math.max(offsetLeft, defaultPadding), innerWidth - offsetWidth - defaultPadding)) + \"px\";\n\t\t\t\t//\t\t\t\t\t} else {\n\t\t\t\t//\t\t\t\t\t\t//TODO anchor is position:{left,top,bottom,right}\n\t\t\t\t//\t\t\t\t\t}\n\t\t\t\t//\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tsetStyle(popover, 'block'); //actionsheet transform\n\t\tpopover.offsetHeight;\n\t\tpopover.classList.add(CLASS_ACTIVE);\n\t\tbackdrop.setAttribute('style', '');\n\t\tdocument.body.appendChild(backdrop);\n\t\tfixedPopoverScroll(true);\n\t\tcalPosition(popover, anchor, isActionSheet); //position\n\t\tbackdrop.classList.add(CLASS_ACTIVE);\n\t\tpopover.addEventListener('webkitTransitionEnd', onPopoverShown);\n\t};\n\tvar setStyle = function(popover, display, top, left) {\n\t\tvar style = popover.style;\n\t\tif (typeof display !== 'undefined')\n\t\t\tstyle.display = display;\n\t\tif (typeof top !== 'undefined')\n\t\t\tstyle.top = top + 'px';\n\t\tif (typeof left !== 'undefined')\n\t\t\tstyle.left = left + 'px';\n\t};\n\tvar calPosition = function(popover, anchor, isActionSheet) {\n\t\tif (!popover || !anchor) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (isActionSheet) { //actionsheet\n\t\t\tsetStyle(popover, 'block')\n\t\t\treturn;\n\t\t}\n\n\t\tvar wWidth = window.innerWidth;\n\t\tvar wHeight = window.innerHeight;\n\n\t\tvar pWidth = popover.offsetWidth;\n\t\tvar pHeight = popover.offsetHeight;\n\n\t\tvar aWidth = anchor.offsetWidth;\n\t\tvar aHeight = anchor.offsetHeight;\n\t\tvar offset = $.offset(anchor);\n\n\t\tvar arrow = popover.querySelector('.' + CLASS_POPOVER_ARROW);\n\t\tif (!arrow) {\n\t\t\tarrow = document.createElement('div');\n\t\t\tarrow.className = CLASS_POPOVER_ARROW;\n\t\t\tpopover.appendChild(arrow);\n\t\t}\n\t\tvar arrowSize = arrow && arrow.offsetWidth / 2 || 0;\n\n\n\n\t\tvar pTop = 0;\n\t\tvar pLeft = 0;\n\t\tvar diff = 0;\n\t\tvar arrowLeft = 0;\n\t\tvar defaultPadding = popover.classList.contains(CLASS_ACTION_POPOVER) ? 0 : 5;\n\n\t\tvar position = 'top';\n\t\tif ((pHeight + arrowSize) < (offset.top - window.pageYOffset)) { //top\n\t\t\tpTop = offset.top - pHeight - arrowSize;\n\t\t} else if ((pHeight + arrowSize) < (wHeight - (offset.top - window.pageYOffset) - aHeight)) { //bottom\n\t\t\tposition = 'bottom';\n\t\t\tpTop = offset.top + aHeight + arrowSize;\n\t\t} else { //middle\n\t\t\tposition = 'middle';\n\t\t\tpTop = Math.max((wHeight - pHeight) / 2 + window.pageYOffset, 0);\n\t\t\tpLeft = Math.max((wWidth - pWidth) / 2 + window.pageXOffset, 0);\n\t\t}\n\t\tif (position === 'top' || position === 'bottom') {\n\t\t\tpLeft = aWidth / 2 + offset.left - pWidth / 2;\n\t\t\tdiff = pLeft;\n\t\t\tif (pLeft < defaultPadding) pLeft = defaultPadding;\n\t\t\tif (pLeft + pWidth > wWidth) pLeft = wWidth - pWidth - defaultPadding;\n\n\t\t\tif (arrow) {\n\t\t\t\tif (position === 'top') {\n\t\t\t\t\tarrow.classList.add(CLASS_BOTTOM);\n\t\t\t\t} else {\n\t\t\t\t\tarrow.classList.remove(CLASS_BOTTOM);\n\t\t\t\t}\n\t\t\t\tdiff = diff - pLeft;\n\t\t\t\tarrowLeft = (pWidth / 2 - arrowSize / 2 + diff);\n\t\t\t\tarrowLeft = Math.max(Math.min(arrowLeft, pWidth - arrowSize * 2 - 6), 6);\n\t\t\t\tarrow.setAttribute('style', 'left:' + arrowLeft + 'px');\n\t\t\t}\n\t\t} else if (position === 'middle') {\n\t\t\tarrow.setAttribute('style', 'display:none');\n\t\t}\n\t\tsetStyle(popover, 'block', pTop, pLeft);\n\t};\n\n\t$.createMask = function(callback) {\n\t\tvar element = document.createElement('div');\n\t\telement.classList.add(CLASS_BACKDROP);\n\t\telement.addEventListener($.EVENT_MOVE, $.preventDefault);\n\t\telement.addEventListener('tap', function() {\n\t\t\tmask.close();\n\t\t});\n\t\tvar mask = [element];\n\t\tmask._show = false;\n\t\tmask.show = function() {\n\t\t\tmask._show = true;\n\t\t\telement.setAttribute('style', 'opacity:1');\n\t\t\tdocument.body.appendChild(element);\n\t\t\treturn mask;\n\t\t};\n\t\tmask._remove = function() {\n\t\t\tif (mask._show) {\n\t\t\t\tmask._show = false;\n\t\t\t\telement.setAttribute('style', 'opacity:0');\n\t\t\t\t$.later(function() {\n\t\t\t\t\tvar body = document.body;\n\t\t\t\t\telement.parentNode === body && body.removeChild(element);\n\t\t\t\t}, 350);\n\t\t\t}\n\t\t\treturn mask;\n\t\t};\n\t\tmask.close = function() {\n\t\t\tif (callback) {\n\t\t\t\tif (callback() !== false) {\n\t\t\t\t\tmask._remove();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tmask._remove();\n\t\t\t}\n\t\t};\n\t\treturn mask;\n\t};\n\t$.fn.popover = function() {\n\t\tvar args = arguments;\n\t\tthis.each(function() {\n\t\t\t$.targets._popover = this;\n\t\t\tif (args[0] === 'show' || args[0] === 'hide' || args[0] === 'toggle') {\n\t\t\t\ttogglePopover(this, args[1], args[0]);\n\t\t\t}\n\t\t});\n\t};\n\n})(mui, window, document, 'popover');\n/**\n * segmented-controllers\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @param {type} undefined\n * @returns {undefined}\n */\n(function($, window, document, name, undefined) {\n\n\tvar CLASS_CONTROL_ITEM = 'mui-control-item';\n\tvar CLASS_SEGMENTED_CONTROL = 'mui-segmented-control';\n\tvar CLASS_SEGMENTED_CONTROL_VERTICAL = 'mui-segmented-control-vertical';\n\tvar CLASS_CONTROL_CONTENT = 'mui-control-content';\n\tvar CLASS_TAB_BAR = 'mui-bar-tab';\n\tvar CLASS_TAB_ITEM = 'mui-tab-item';\n\tvar CLASS_SLIDER_ITEM = 'mui-slider-item';\n\n\tvar handle = function(event, target) {\n\t\tif (target.classList && (target.classList.contains(CLASS_CONTROL_ITEM) || target.classList.contains(CLASS_TAB_ITEM))) {\n\t\t\tif (target.parentNode && target.parentNode.classList && target.parentNode.classList.contains(CLASS_SEGMENTED_CONTROL_VERTICAL)) {\n\t\t\t\t//vertical 如果preventDefault会导致无法滚动\n\t\t\t} else {\n\t\t\t\tevent.preventDefault(); //stop hash change\t\t\t\t\n\t\t\t}\n\t\t\t//\t\t\tif (target.hash) {\n\t\t\treturn target;\n\t\t\t//\t\t\t}\n\t\t}\n\t\treturn false;\n\t};\n\n\t$.registerTarget({\n\t\tname: name,\n\t\tindex: 80,\n\t\thandle: handle,\n\t\ttarget: false\n\t});\n\n\twindow.addEventListener('tap', function(e) {\n\n\t\tvar targetTab = $.targets.tab;\n\t\tif (!targetTab) {\n\t\t\treturn;\n\t\t}\n\t\tvar activeTab;\n\t\tvar activeBodies;\n\t\tvar targetBody;\n\t\tvar className = 'mui-active';\n\t\tvar classSelector = '.' + className;\n\t\tvar segmentedControl = targetTab.parentNode;\n\n\t\tfor (; segmentedControl && segmentedControl !== document; segmentedControl = segmentedControl.parentNode) {\n\t\t\tif (segmentedControl.classList.contains(CLASS_SEGMENTED_CONTROL)) {\n\t\t\t\tactiveTab = segmentedControl.querySelector(classSelector + '.' + CLASS_CONTROL_ITEM);\n\t\t\t\tbreak;\n\t\t\t} else if (segmentedControl.classList.contains(CLASS_TAB_BAR)) {\n\t\t\t\tactiveTab = segmentedControl.querySelector(classSelector + '.' + CLASS_TAB_ITEM);\n\t\t\t}\n\t\t}\n\n\t\tif (activeTab) {\n\t\t\tactiveTab.classList.remove(className);\n\t\t}\n\n\t\tvar isLastActive = targetTab === activeTab;\n\t\tif (targetTab) {\n\t\t\ttargetTab.classList.add(className);\n\t\t}\n\n\t\tif (!targetTab.hash) {\n\t\t\treturn;\n\t\t}\n\t\ttargetBody = document.getElementById(targetTab.hash.replace('#', ''));\n\n\t\tif (!targetBody) {\n\t\t\treturn;\n\t\t}\n\t\tif (!targetBody.classList.contains(CLASS_CONTROL_CONTENT)) { //tab bar popover\n\t\t\ttargetTab.classList[isLastActive ? 'remove' : 'add'](className);\n\t\t\treturn;\n\t\t}\n\t\tif (isLastActive) { //same\n\t\t\treturn;\n\t\t}\n\t\tvar parentNode = targetBody.parentNode;\n\t\tactiveBodies = parentNode.querySelectorAll('.' + CLASS_CONTROL_CONTENT + classSelector);\n\t\tfor (var i = 0; i < activeBodies.length; i++) {\n\t\t\tvar activeBody = activeBodies[i];\n\t\t\tactiveBody.parentNode === parentNode && activeBody.classList.remove(className);\n\t\t}\n\n\t\ttargetBody.classList.add(className);\n\n\t\tvar contents = [];\n\t\tvar _contents = parentNode.querySelectorAll('.' + CLASS_CONTROL_CONTENT);\n\t\tfor (var i = 0; i < _contents.length; i++) { //查找直属子节点\n\t\t\t_contents[i].parentNode === parentNode && (contents.push(_contents[i]));\n\t\t}\n\t\t$.trigger(targetBody, $.eventName('shown', name), {\n\t\t\ttabNumber: Array.prototype.indexOf.call(contents, targetBody)\n\t\t});\n\t\te.detail && e.detail.gesture.preventDefault(); //fixed hashchange\n\t});\n\n})(mui, window, document, 'tab');\n/**\n * Toggles switch\n * @param {type} $\n * @param {type} window\n * @param {type} name\n * @returns {undefined}\n */\n(function($, window, name) {\n\n\tvar CLASS_SWITCH = 'mui-switch';\n\tvar CLASS_SWITCH_HANDLE = 'mui-switch-handle';\n\tvar CLASS_ACTIVE = 'mui-active';\n\tvar CLASS_DRAGGING = 'mui-dragging';\n\n\tvar CLASS_DISABLED = 'mui-disabled';\n\n\tvar SELECTOR_SWITCH_HANDLE = '.' + CLASS_SWITCH_HANDLE;\n\n\tvar handle = function(event, target) {\n\t\tif (target.classList && target.classList.contains(CLASS_SWITCH)) {\n\t\t\treturn target;\n\t\t}\n\t\treturn false;\n\t};\n\n\t$.registerTarget({\n\t\tname: name,\n\t\tindex: 100,\n\t\thandle: handle,\n\t\ttarget: false\n\t});\n\n\n\tvar Toggle = function(element) {\n\t\tthis.element = element;\n\t\tthis.classList = this.element.classList;\n\t\tthis.handle = this.element.querySelector(SELECTOR_SWITCH_HANDLE);\n\t\tthis.init();\n\t\tthis.initEvent();\n\t};\n\tToggle.prototype.init = function() {\n\t\tthis.toggleWidth = this.element.offsetWidth;\n\t\tthis.handleWidth = this.handle.offsetWidth;\n\t\tthis.handleX = this.toggleWidth - this.handleWidth - 3;\n\t};\n\tToggle.prototype.initEvent = function() {\n\t\tthis.element.addEventListener($.EVENT_START, this);\n\t\tthis.element.addEventListener('drag', this);\n\t\tthis.element.addEventListener('swiperight', this);\n\t\tthis.element.addEventListener($.EVENT_END, this);\n\t\tthis.element.addEventListener($.EVENT_CANCEL, this);\n\n\t};\n\tToggle.prototype.handleEvent = function(e) {\n\t\tif (this.classList.contains(CLASS_DISABLED)) {\n\t\t\treturn;\n\t\t}\n\t\tswitch (e.type) {\n\t\t\tcase $.EVENT_START:\n\t\t\t\tthis.start(e);\n\t\t\t\tbreak;\n\t\t\tcase 'drag':\n\t\t\t\tthis.drag(e);\n\t\t\t\tbreak;\n\t\t\tcase 'swiperight':\n\t\t\t\tthis.swiperight();\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_END:\n\t\t\tcase $.EVENT_CANCEL:\n\t\t\t\tthis.end(e);\n\t\t\t\tbreak;\n\t\t}\n\t};\n\tToggle.prototype.start = function(e) {\n\t\tthis.handle.style.webkitTransitionDuration = this.element.style.webkitTransitionDuration = '.2s';\n\t\tthis.classList.add(CLASS_DRAGGING);\n\t\tif (this.toggleWidth === 0 || this.handleWidth === 0) { //当switch处于隐藏状态时，width为0，需要重新初始化\n\t\t\tthis.init();\n\t\t}\n\t};\n\tToggle.prototype.drag = function(e) {\n\t\tvar detail = e.detail;\n\t\tif (!this.isDragging) {\n\t\t\tif (detail.direction === 'left' || detail.direction === 'right') {\n\t\t\t\tthis.isDragging = true;\n\t\t\t\tthis.lastChanged = undefined;\n\t\t\t\tthis.initialState = this.classList.contains(CLASS_ACTIVE);\n\t\t\t}\n\t\t}\n\t\tif (this.isDragging) {\n\t\t\tthis.setTranslateX(detail.deltaX);\n\t\t\te.stopPropagation();\n\t\t\tdetail.gesture.preventDefault();\n\t\t}\n\t};\n\tToggle.prototype.swiperight = function(e) {\n\t\tif (this.isDragging) {\n\t\t\te.stopPropagation();\n\t\t}\n\t};\n\tToggle.prototype.end = function(e) {\n\t\tthis.classList.remove(CLASS_DRAGGING);\n\t\tif (this.isDragging) {\n\t\t\tthis.isDragging = false;\n\t\t\te.stopPropagation();\n\t\t\t$.trigger(this.element, 'toggle', {\n\t\t\t\tisActive: this.classList.contains(CLASS_ACTIVE)\n\t\t\t});\n\t\t} else {\n\t\t\tthis.toggle();\n\t\t}\n\t};\n\tToggle.prototype.toggle = function(animate) {\n\t\tvar classList = this.classList;\n\t\tif (animate === false) {\n\t\t\tthis.handle.style.webkitTransitionDuration = this.element.style.webkitTransitionDuration = '0s';\n\t\t} else {\n\t\t\tthis.handle.style.webkitTransitionDuration = this.element.style.webkitTransitionDuration = '.2s';\n\t\t}\n\t\tif (classList.contains(CLASS_ACTIVE)) {\n\t\t\tclassList.remove(CLASS_ACTIVE);\n\t\t\tthis.handle.style.webkitTransform = 'translate(0,0)';\n\t\t} else {\n\t\t\tclassList.add(CLASS_ACTIVE);\n\t\t\tthis.handle.style.webkitTransform = 'translate(' + this.handleX + 'px,0)';\n\t\t}\n\t\t$.trigger(this.element, 'toggle', {\n\t\t\tisActive: this.classList.contains(CLASS_ACTIVE)\n\t\t});\n\t};\n\tToggle.prototype.setTranslateX = $.animationFrame(function(x) {\n\t\tif (!this.isDragging) {\n\t\t\treturn;\n\t\t}\n\t\tvar isChanged = false;\n\t\tif ((this.initialState && -x > (this.handleX / 2)) || (!this.initialState && x > (this.handleX / 2))) {\n\t\t\tisChanged = true;\n\t\t}\n\t\tif (this.lastChanged !== isChanged) {\n\t\t\tif (isChanged) {\n\t\t\t\tthis.handle.style.webkitTransform = 'translate(' + (this.initialState ? 0 : this.handleX) + 'px,0)';\n\t\t\t\tthis.classList[this.initialState ? 'remove' : 'add'](CLASS_ACTIVE);\n\t\t\t} else {\n\t\t\t\tthis.handle.style.webkitTransform = 'translate(' + (this.initialState ? this.handleX : 0) + 'px,0)';\n\t\t\t\tthis.classList[this.initialState ? 'add' : 'remove'](CLASS_ACTIVE);\n\t\t\t}\n\t\t\tthis.lastChanged = isChanged;\n\t\t}\n\n\t});\n\n\t$.fn['switch'] = function(options) {\n\t\tvar switchApis = [];\n\t\tthis.each(function() {\n\t\t\tvar switchApi = null;\n\t\t\tvar id = this.getAttribute('data-switch');\n\t\t\tif (!id) {\n\t\t\t\tid = ++$.uuid;\n\t\t\t\t$.data[id] = new Toggle(this);\n\t\t\t\tthis.setAttribute('data-switch', id);\n\t\t\t} else {\n\t\t\t\tswitchApi = $.data[id];\n\t\t\t}\n\t\t\tswitchApis.push(switchApi);\n\t\t});\n\t\treturn switchApis.length > 1 ? switchApis : switchApis[0];\n\t};\n\t$.ready(function() {\n\t\t$('.' + CLASS_SWITCH)['switch']();\n\t});\n})(mui, window, 'toggle');\n/**\n * Tableviews\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @returns {undefined}\n */\n(function($, window, document) {\n\n\tvar CLASS_ACTIVE = 'mui-active';\n\tvar CLASS_SELECTED = 'mui-selected';\n\tvar CLASS_GRID_VIEW = 'mui-grid-view';\n\tvar CLASS_RADIO_VIEW = 'mui-table-view-radio';\n\tvar CLASS_TABLE_VIEW_CELL = 'mui-table-view-cell';\n\tvar CLASS_COLLAPSE_CONTENT = 'mui-collapse-content';\n\tvar CLASS_DISABLED = 'mui-disabled';\n\tvar CLASS_TOGGLE = 'mui-switch';\n\tvar CLASS_BTN = 'mui-btn';\n\n\tvar CLASS_SLIDER_HANDLE = 'mui-slider-handle';\n\tvar CLASS_SLIDER_LEFT = 'mui-slider-left';\n\tvar CLASS_SLIDER_RIGHT = 'mui-slider-right';\n\tvar CLASS_TRANSITIONING = 'mui-transitioning';\n\n\n\tvar SELECTOR_SLIDER_HANDLE = '.' + CLASS_SLIDER_HANDLE;\n\tvar SELECTOR_SLIDER_LEFT = '.' + CLASS_SLIDER_LEFT;\n\tvar SELECTOR_SLIDER_RIGHT = '.' + CLASS_SLIDER_RIGHT;\n\tvar SELECTOR_SELECTED = '.' + CLASS_SELECTED;\n\tvar SELECTOR_BUTTON = '.' + CLASS_BTN;\n\tvar overFactor = 0.8;\n\tvar cell, a;\n\n\tvar isMoved = isOpened = openedActions = progress = false;\n\tvar sliderHandle = sliderActionLeft = sliderActionRight = buttonsLeft = buttonsRight = sliderDirection = sliderRequestAnimationFrame = false;\n\tvar timer = translateX = lastTranslateX = sliderActionLeftWidth = sliderActionRightWidth = 0;\n\n\n\n\tvar toggleActive = function(isActive) {\n\t\tif (isActive) {\n\t\t\tif (a) {\n\t\t\t\ta.classList.add(CLASS_ACTIVE);\n\t\t\t} else if (cell) {\n\t\t\t\tcell.classList.add(CLASS_ACTIVE);\n\t\t\t}\n\t\t} else {\n\t\t\ttimer && timer.cancel();\n\t\t\tif (a) {\n\t\t\t\ta.classList.remove(CLASS_ACTIVE);\n\t\t\t} else if (cell) {\n\t\t\t\tcell.classList.remove(CLASS_ACTIVE);\n\t\t\t}\n\t\t}\n\t};\n\n\tvar updateTranslate = function() {\n\t\tif (translateX !== lastTranslateX) {\n\t\t\tif (buttonsRight && buttonsRight.length > 0) {\n\t\t\t\tprogress = translateX / sliderActionRightWidth;\n\t\t\t\tif (translateX < -sliderActionRightWidth) {\n\t\t\t\t\ttranslateX = -sliderActionRightWidth - Math.pow(-translateX - sliderActionRightWidth, overFactor);\n\t\t\t\t}\n\t\t\t\tfor (var i = 0, len = buttonsRight.length; i < len; i++) {\n\t\t\t\t\tvar buttonRight = buttonsRight[i];\n\t\t\t\t\tif (typeof buttonRight._buttonOffset === 'undefined') {\n\t\t\t\t\t\tbuttonRight._buttonOffset = buttonRight.offsetLeft;\n\t\t\t\t\t}\n\t\t\t\t\tbuttonOffset = buttonRight._buttonOffset;\n\t\t\t\t\tsetTranslate(buttonRight, (translateX - buttonOffset * (1 + Math.max(progress, -1))));\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (buttonsLeft && buttonsLeft.length > 0) {\n\t\t\t\tprogress = translateX / sliderActionLeftWidth;\n\t\t\t\tif (translateX > sliderActionLeftWidth) {\n\t\t\t\t\ttranslateX = sliderActionLeftWidth + Math.pow(translateX - sliderActionLeftWidth, overFactor);\n\t\t\t\t}\n\t\t\t\tfor (var i = 0, len = buttonsLeft.length; i < len; i++) {\n\t\t\t\t\tvar buttonLeft = buttonsLeft[i];\n\t\t\t\t\tif (typeof buttonLeft._buttonOffset === 'undefined') {\n\t\t\t\t\t\tbuttonLeft._buttonOffset = sliderActionLeftWidth - buttonLeft.offsetLeft - buttonLeft.offsetWidth;\n\t\t\t\t\t}\n\t\t\t\t\tbuttonOffset = buttonLeft._buttonOffset;\n\t\t\t\t\tif (buttonsLeft.length > 1) {\n\t\t\t\t\t\tbuttonLeft.style.zIndex = buttonsLeft.length - i;\n\t\t\t\t\t}\n\t\t\t\t\tsetTranslate(buttonLeft, (translateX + buttonOffset * (1 - Math.min(progress, 1))));\n\t\t\t\t}\n\t\t\t}\n\t\t\tsetTranslate(sliderHandle, translateX);\n\t\t\tlastTranslateX = translateX;\n\t\t}\n\t\tsliderRequestAnimationFrame = requestAnimationFrame(function() {\n\t\t\tupdateTranslate();\n\t\t});\n\t};\n\tvar setTranslate = function(element, x) {\n\t\tif (element) {\n\t\t\telement.style.webkitTransform = 'translate(' + x + 'px,0)';\n\t\t}\n\t};\n\n\twindow.addEventListener($.EVENT_START, function(event) {\n\t\tif (cell) {\n\t\t\ttoggleActive(false);\n\t\t}\n\t\tcell = a = false;\n\t\tisMoved = isOpened = openedActions = false;\n\t\tvar target = event.target;\n\t\tvar isDisabled = false;\n\t\tfor (; target && target !== document; target = target.parentNode) {\n\t\t\tif (target.classList) {\n\t\t\t\tvar classList = target.classList;\n\t\t\t\tif ((target.tagName === 'INPUT' && target.type !== 'radio' && target.type !== 'checkbox') || target.tagName === 'BUTTON' || classList.contains(CLASS_TOGGLE) || classList.contains(CLASS_BTN) || classList.contains(CLASS_DISABLED)) {\n\t\t\t\t\tisDisabled = true;\n\t\t\t\t}\n\t\t\t\tif (classList.contains(CLASS_COLLAPSE_CONTENT)) { //collapse content\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (classList.contains(CLASS_TABLE_VIEW_CELL)) {\n\t\t\t\t\tcell = target;\n\t\t\t\t\t//TODO swipe to delete close\n\t\t\t\t\tvar selected = cell.parentNode.querySelector(SELECTOR_SELECTED);\n\t\t\t\t\tif (!cell.parentNode.classList.contains(CLASS_RADIO_VIEW) && selected && selected !== cell) {\n\t\t\t\t\t\t$.swipeoutClose(selected);\n\t\t\t\t\t\tcell = isDisabled = false;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (!cell.parentNode.classList.contains(CLASS_GRID_VIEW)) {\n\t\t\t\t\t\tvar link = cell.querySelector('a');\n\t\t\t\t\t\tif (link && link.parentNode === cell) { //li>a\n\t\t\t\t\t\t\ta = link;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar handle = cell.querySelector(SELECTOR_SLIDER_HANDLE);\n\t\t\t\t\tif (handle) {\n\t\t\t\t\t\ttoggleEvents(cell);\n\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t}\n\t\t\t\t\tif (!isDisabled) {\n\t\t\t\t\t\tif (handle) {\n\t\t\t\t\t\t\tif (timer) {\n\t\t\t\t\t\t\t\ttimer.cancel();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttimer = $.later(function() {\n\t\t\t\t\t\t\t\ttoggleActive(true);\n\t\t\t\t\t\t\t}, 100);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttoggleActive(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\twindow.addEventListener($.EVENT_MOVE, function(event) {\n\t\ttoggleActive(false);\n\t});\n\n\tvar handleEvent = {\n\t\thandleEvent: function(event) {\n\t\t\tswitch (event.type) {\n\t\t\t\tcase 'drag':\n\t\t\t\t\tthis.drag(event);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'dragend':\n\t\t\t\t\tthis.dragend(event);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'flick':\n\t\t\t\t\tthis.flick(event);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'swiperight':\n\t\t\t\t\tthis.swiperight(event);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'swipeleft':\n\t\t\t\t\tthis.swipeleft(event);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\tdrag: function(event) {\n\t\t\tif (!cell) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!isMoved) { //init\n\t\t\t\tsliderHandle = sliderActionLeft = sliderActionRight = buttonsLeft = buttonsRight = sliderDirection = sliderRequestAnimationFrame = false;\n\t\t\t\tsliderHandle = cell.querySelector(SELECTOR_SLIDER_HANDLE);\n\t\t\t\tif (sliderHandle) {\n\t\t\t\t\tsliderActionLeft = cell.querySelector(SELECTOR_SLIDER_LEFT);\n\t\t\t\t\tsliderActionRight = cell.querySelector(SELECTOR_SLIDER_RIGHT);\n\t\t\t\t\tif (sliderActionLeft) {\n\t\t\t\t\t\tsliderActionLeftWidth = sliderActionLeft.offsetWidth;\n\t\t\t\t\t\tbuttonsLeft = sliderActionLeft.querySelectorAll(SELECTOR_BUTTON);\n\t\t\t\t\t}\n\t\t\t\t\tif (sliderActionRight) {\n\t\t\t\t\t\tsliderActionRightWidth = sliderActionRight.offsetWidth;\n\t\t\t\t\t\tbuttonsRight = sliderActionRight.querySelectorAll(SELECTOR_BUTTON);\n\t\t\t\t\t}\n\t\t\t\t\tcell.classList.remove(CLASS_TRANSITIONING);\n\t\t\t\t\tisOpened = cell.classList.contains(CLASS_SELECTED);\n\t\t\t\t\tif (isOpened) {\n\t\t\t\t\t\topenedActions = cell.querySelector(SELECTOR_SLIDER_LEFT + SELECTOR_SELECTED) ? 'left' : 'right';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar detail = event.detail;\n\t\t\tvar direction = detail.direction;\n\t\t\tvar angle = detail.angle;\n\t\t\tif (direction === 'left' && (angle > 150 || angle < -150)) {\n\t\t\t\tif (buttonsRight || (buttonsLeft && isOpened)) { //存在右侧按钮或存在左侧按钮且是已打开状态\n\t\t\t\t\tisMoved = true;\n\t\t\t\t}\n\t\t\t} else if (direction === 'right' && (angle > -30 && angle < 30)) {\n\t\t\t\tif (buttonsLeft || (buttonsRight && isOpened)) { //存在左侧按钮或存在右侧按钮且是已打开状态\n\t\t\t\t\tisMoved = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (isMoved) {\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tevent.detail.gesture.preventDefault();\n\t\t\t\tvar translate = event.detail.deltaX;\n\t\t\t\tif (isOpened) {\n\t\t\t\t\tif (openedActions === 'right') {\n\t\t\t\t\t\ttranslate = translate - sliderActionRightWidth;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttranslate = translate + sliderActionLeftWidth;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif ((translate > 0 && !buttonsLeft) || (translate < 0 && !buttonsRight)) {\n\t\t\t\t\tif (!isOpened) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\ttranslate = 0;\n\t\t\t\t}\n\t\t\t\tif (translate < 0) {\n\t\t\t\t\tsliderDirection = 'toLeft';\n\t\t\t\t} else if (translate > 0) {\n\t\t\t\t\tsliderDirection = 'toRight';\n\t\t\t\t} else {\n\t\t\t\t\tif (!sliderDirection) {\n\t\t\t\t\t\tsliderDirection = 'toLeft';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!sliderRequestAnimationFrame) {\n\t\t\t\t\tupdateTranslate();\n\t\t\t\t}\n\t\t\t\ttranslateX = translate;\n\t\t\t}\n\t\t},\n\t\tflick: function(event) {\n\t\t\tif (isMoved) {\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t},\n\t\tswipeleft: function(event) {\n\t\t\tif (isMoved) {\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t},\n\t\tswiperight: function(event) {\n\t\t\tif (isMoved) {\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t},\n\t\tdragend: function(event) {\n\t\t\tif (!isMoved) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tevent.stopPropagation();\n\t\t\tif (sliderRequestAnimationFrame) {\n\t\t\t\tcancelAnimationFrame(sliderRequestAnimationFrame);\n\t\t\t\tsliderRequestAnimationFrame = null;\n\t\t\t}\n\t\t\tvar detail = event.detail;\n\t\t\tisMoved = false;\n\t\t\tvar action = 'close';\n\t\t\tvar actionsWidth = sliderDirection === 'toLeft' ? sliderActionRightWidth : sliderActionLeftWidth;\n\t\t\tvar isToggle = detail.swipe || (Math.abs(translateX) > actionsWidth / 2);\n\t\t\tif (isToggle) {\n\t\t\t\tif (!isOpened) {\n\t\t\t\t\taction = 'open';\n\t\t\t\t} else if (detail.direction === 'left' && openedActions === 'right') {\n\t\t\t\t\taction = 'open';\n\t\t\t\t} else if (detail.direction === 'right' && openedActions === 'left') {\n\t\t\t\t\taction = 'open';\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tcell.classList.add(CLASS_TRANSITIONING);\n\t\t\tvar buttons;\n\t\t\tif (action === 'open') {\n\t\t\t\tvar newTranslate = sliderDirection === 'toLeft' ? -actionsWidth : actionsWidth;\n\t\t\t\tsetTranslate(sliderHandle, newTranslate);\n\t\t\t\tbuttons = sliderDirection === 'toLeft' ? buttonsRight : buttonsLeft;\n\t\t\t\tif (typeof buttons !== 'undefined') {\n\t\t\t\t\tvar button = null;\n\t\t\t\t\tfor (var i = 0; i < buttons.length; i++) {\n\t\t\t\t\t\tbutton = buttons[i];\n\t\t\t\t\t\tsetTranslate(button, newTranslate);\n\t\t\t\t\t}\n\t\t\t\t\tbutton.parentNode.classList.add(CLASS_SELECTED);\n\t\t\t\t\tcell.classList.add(CLASS_SELECTED);\n\t\t\t\t\tif (!isOpened) {\n\t\t\t\t\t\t$.trigger(cell, sliderDirection === 'toLeft' ? 'slideleft' : 'slideright');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsetTranslate(sliderHandle, 0);\n\t\t\t\tsliderActionLeft && sliderActionLeft.classList.remove(CLASS_SELECTED);\n\t\t\t\tsliderActionRight && sliderActionRight.classList.remove(CLASS_SELECTED);\n\t\t\t\tcell.classList.remove(CLASS_SELECTED);\n\t\t\t}\n\t\t\tvar buttonOffset;\n\t\t\tif (buttonsLeft && buttonsLeft.length > 0 && buttonsLeft !== buttons) {\n\t\t\t\tfor (var i = 0, len = buttonsLeft.length; i < len; i++) {\n\t\t\t\t\tvar buttonLeft = buttonsLeft[i];\n\t\t\t\t\tbuttonOffset = buttonLeft._buttonOffset;\n\t\t\t\t\tif (typeof buttonOffset === 'undefined') {\n\t\t\t\t\t\tbuttonLeft._buttonOffset = sliderActionLeftWidth - buttonLeft.offsetLeft - buttonLeft.offsetWidth;\n\t\t\t\t\t}\n\t\t\t\t\tsetTranslate(buttonLeft, buttonOffset);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (buttonsRight && buttonsRight.length > 0 && buttonsRight !== buttons) {\n\t\t\t\tfor (var i = 0, len = buttonsRight.length; i < len; i++) {\n\t\t\t\t\tvar buttonRight = buttonsRight[i];\n\t\t\t\t\tbuttonOffset = buttonRight._buttonOffset;\n\t\t\t\t\tif (typeof buttonOffset === 'undefined') {\n\t\t\t\t\t\tbuttonRight._buttonOffset = buttonRight.offsetLeft;\n\t\t\t\t\t}\n\t\t\t\t\tsetTranslate(buttonRight, -buttonOffset);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction toggleEvents(element, isRemove) {\n\t\tvar method = !!isRemove ? 'removeEventListener' : 'addEventListener';\n\t\telement[method]('drag', handleEvent);\n\t\telement[method]('dragend', handleEvent);\n\t\telement[method]('swiperight', handleEvent);\n\t\telement[method]('swipeleft', handleEvent);\n\t\telement[method]('flick', handleEvent);\n\t};\n\t/**\n\t * 打开滑动菜单\n\t * @param {Object} el\n\t * @param {Object} direction\n\t */\n\t$.swipeoutOpen = function(el, direction) {\n\t\tif (!el) return;\n\t\tvar classList = el.classList;\n\t\tif (classList.contains(CLASS_SELECTED)) return;\n\t\tif (!direction) {\n\t\t\tif (el.querySelector(SELECTOR_SLIDER_RIGHT)) {\n\t\t\t\tdirection = 'right';\n\t\t\t} else {\n\t\t\t\tdirection = 'left';\n\t\t\t}\n\t\t}\n\t\tvar swipeoutAction = el.querySelector($.classSelector(\".slider-\" + direction));\n\t\tif (!swipeoutAction) return;\n\t\tswipeoutAction.classList.add(CLASS_SELECTED);\n\t\tclassList.add(CLASS_SELECTED);\n\t\tclassList.remove(CLASS_TRANSITIONING);\n\t\tvar buttons = swipeoutAction.querySelectorAll(SELECTOR_BUTTON);\n\t\tvar swipeoutWidth = swipeoutAction.offsetWidth;\n\t\tvar translate = (direction === 'right') ? -swipeoutWidth : swipeoutWidth;\n\t\tvar length = buttons.length;\n\t\tvar button;\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\tbutton = buttons[i];\n\t\t\tif (direction === 'right') {\n\t\t\t\tsetTranslate(button, -button.offsetLeft);\n\t\t\t} else {\n\t\t\t\tsetTranslate(button, (swipeoutWidth - button.offsetWidth - button.offsetLeft));\n\t\t\t}\n\t\t}\n\t\tclassList.add(CLASS_TRANSITIONING);\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\tsetTranslate(buttons[i], translate);\n\t\t}\n\t\tsetTranslate(el.querySelector(SELECTOR_SLIDER_HANDLE), translate);\n\t};\n\t/**\n\t * 关闭滑动菜单\n\t * @param {Object} el\n\t */\n\t$.swipeoutClose = function(el) {\n\t\tif (!el) return;\n\t\tvar classList = el.classList;\n\t\tif (!classList.contains(CLASS_SELECTED)) return;\n\t\tvar direction = el.querySelector(SELECTOR_SLIDER_RIGHT + SELECTOR_SELECTED) ? 'right' : 'left';\n\t\tvar swipeoutAction = el.querySelector($.classSelector(\".slider-\" + direction));\n\t\tif (!swipeoutAction) return;\n\t\tswipeoutAction.classList.remove(CLASS_SELECTED);\n\t\tclassList.remove(CLASS_SELECTED);\n\t\tclassList.add(CLASS_TRANSITIONING);\n\t\tvar buttons = swipeoutAction.querySelectorAll(SELECTOR_BUTTON);\n\t\tvar swipeoutWidth = swipeoutAction.offsetWidth;\n\t\tvar length = buttons.length;\n\t\tvar button;\n\t\tsetTranslate(el.querySelector(SELECTOR_SLIDER_HANDLE), 0);\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\tbutton = buttons[i];\n\t\t\tif (direction === 'right') {\n\t\t\t\tsetTranslate(button, (-button.offsetLeft));\n\t\t\t} else {\n\t\t\t\tsetTranslate(button, (swipeoutWidth - button.offsetWidth - button.offsetLeft));\n\t\t\t}\n\t\t}\n\t};\n\n\twindow.addEventListener($.EVENT_END, function(event) { //使用touchend来取消高亮，避免一次点击既不触发tap，doubletap，longtap的事件\n\t\tif (!cell) {\n\t\t\treturn;\n\t\t}\n\t\ttoggleActive(false);\n\t\tsliderHandle && toggleEvents(cell, true);\n\t});\n\twindow.addEventListener($.EVENT_CANCEL, function(event) { //使用touchcancel来取消高亮，避免一次点击既不触发tap，doubletap，longtap的事件\n\t\tif (!cell) {\n\t\t\treturn;\n\t\t}\n\t\ttoggleActive(false);\n\t\tsliderHandle && toggleEvents(cell, true);\n\t});\n\tvar radioOrCheckboxClick = function(event) {\n\t\tvar type = event.target && event.target.type || '';\n\t\tif (type === 'radio' || type === 'checkbox') {\n\t\t\treturn;\n\t\t}\n\t\tvar classList = cell.classList;\n\t\tif (classList.contains('mui-radio')) {\n\t\t\tvar input = cell.querySelector('input[type=radio]');\n\t\t\tif (input) {\n\t\t\t\t//\t\t\t\tinput.click();\n\t\t\t\tif (!input.disabled && !input.readOnly) {\n\t\t\t\t\tinput.checked = !input.checked;\n\t\t\t\t\t$.trigger(input, 'change');\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (classList.contains('mui-checkbox')) {\n\t\t\tvar input = cell.querySelector('input[type=checkbox]');\n\t\t\tif (input) {\n\t\t\t\t//\t\t\t\tinput.click();\n\t\t\t\tif (!input.disabled && !input.readOnly) {\n\t\t\t\t\tinput.checked = !input.checked;\n\t\t\t\t\t$.trigger(input, 'change');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t//fixed hashchange(android)\n\twindow.addEventListener($.EVENT_CLICK, function(e) {\n\t\tif (cell && cell.classList.contains('mui-collapse')) {\n\t\t\te.preventDefault();\n\t\t}\n\t});\n\twindow.addEventListener('doubletap', function(event) {\n\t\tif (cell) {\n\t\t\tradioOrCheckboxClick(event);\n\t\t}\n\t});\n\tvar preventDefaultException = /^(INPUT|TEXTAREA|BUTTON|SELECT)$/;\n\twindow.addEventListener('tap', function(event) {\n\t\tif (!cell) {\n\t\t\treturn;\n\t\t}\n\t\tvar isExpand = false;\n\t\tvar classList = cell.classList;\n\t\tvar ul = cell.parentNode;\n\t\tif (ul && ul.classList.contains(CLASS_RADIO_VIEW)) {\n\t\t\tif (classList.contains(CLASS_SELECTED)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar selected = ul.querySelector('li' + SELECTOR_SELECTED);\n\t\t\tif (selected) {\n\t\t\t\tselected.classList.remove(CLASS_SELECTED);\n\t\t\t}\n\t\t\tclassList.add(CLASS_SELECTED);\n\t\t\t$.trigger(cell, 'selected', {\n\t\t\t\tel: cell\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tif (classList.contains('mui-collapse') && !cell.parentNode.classList.contains('mui-unfold')) {\n\t\t\tif (!preventDefaultException.test(event.target.tagName)) {\n\t\t\t\tevent.detail.gesture.preventDefault();\n\t\t\t}\n\n\t\t\tif (!classList.contains(CLASS_ACTIVE)) { //展开时,需要收缩其他同类\n\t\t\t\tvar collapse = cell.parentNode.querySelector('.mui-collapse.mui-active');\n\t\t\t\tif (collapse) {\n\t\t\t\t\tcollapse.classList.remove(CLASS_ACTIVE);\n\t\t\t\t}\n\t\t\t\tisExpand = true;\n\t\t\t}\n\t\t\tclassList.toggle(CLASS_ACTIVE);\n\t\t\tif (isExpand) {\n\t\t\t\t//触发展开事件\n\t\t\t\t$.trigger(cell, 'expand');\n\n\t\t\t\t//scroll\n\t\t\t\t//暂不滚动\n\t\t\t\t// var offsetTop = $.offset(cell).top;\n\t\t\t\t// var scrollTop = document.body.scrollTop;\n\t\t\t\t// var height = window.innerHeight;\n\t\t\t\t// var offsetHeight = cell.offsetHeight;\n\t\t\t\t// var cellHeight = (offsetTop - scrollTop + offsetHeight);\n\t\t\t\t// if (offsetHeight > height) {\n\t\t\t\t// \t$.scrollTo(offsetTop, 300);\n\t\t\t\t// } else if (cellHeight > height) {\n\t\t\t\t// \t$.scrollTo(cellHeight - height + scrollTop, 300);\n\t\t\t\t// }\n\t\t\t}\n\t\t} else {\n\t\t\tradioOrCheckboxClick(event);\n\t\t}\n\t});\n})(mui, window, document);\n(function($, window) {\n\t/**\n\t * 警告消息框\n\t */\n\t$.alert = function(message, title, btnValue, callback) {\n\t\tif ($.os.plus) {\n\t\t\tif (typeof message === 'undefined') {\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tif (typeof title === 'function') {\n\t\t\t\t\tcallback = title;\n\t\t\t\t\ttitle = null;\n\t\t\t\t\tbtnValue = '确定';\n\t\t\t\t} else if (typeof btnValue === 'function') {\n\t\t\t\t\tcallback = btnValue;\n\t\t\t\t\tbtnValue = null;\n\t\t\t\t}\n\t\t\t\t$.plusReady(function() {\n\t\t\t\t\tplus.nativeUI.alert(message, callback, title, btnValue);\n\t\t\t\t});\n\t\t\t}\n\n\t\t} else {\n\t\t\t//TODO H5版本\n\t\t\twindow.alert(message);\n\t\t}\n\t};\n\n})(mui, window);\n(function($, window) {\n\t/**\n\t * 确认消息框\n\t */\n\t$.confirm = function(message, title, btnArray, callback) {\n\t\tif ($.os.plus) {\n\t\t\tif (typeof message === 'undefined') {\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tif (typeof title === 'function') {\n\t\t\t\t\tcallback = title;\n\t\t\t\t\ttitle = null;\n\t\t\t\t\tbtnArray = null;\n\t\t\t\t} else if (typeof btnArray === 'function') {\n\t\t\t\t\tcallback = btnArray;\n\t\t\t\t\tbtnArray = null;\n\t\t\t\t}\n\t\t\t\t$.plusReady(function() {\n\t\t\t\t\tplus.nativeUI.confirm(message, callback, title, btnArray);\n\t\t\t\t});\n\t\t\t}\n\n\t\t} else {\n\t\t\t//H5版本，0为确认，1为取消\n\t\t\tif (window.confirm(message)) {\n\t\t\t\tcallback({\n\t\t\t\t\tindex: 0\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcallback({\n\t\t\t\t\tindex: 1\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n})(mui, window);\n(function($, window) {\n\t/**\n\t * 输入对话框\n\t */\n\t$.prompt = function(text, defaultText, title, btnArray, callback) {\n\t\tif ($.os.plus) {\n\t\t\tif (typeof message === 'undefined') {\n\t\t\t\treturn;\n\t\t\t} else {\n\n\t\t\t\tif (typeof defaultText === 'function') {\n\t\t\t\t\tcallback = defaultText;\n\t\t\t\t\tdefaultText = null;\n\t\t\t\t\ttitle = null;\n\t\t\t\t\tbtnArray = null;\n\t\t\t\t} else if (typeof title === 'function') {\n\t\t\t\t\tcallback = title;\n\t\t\t\t\ttitle = null;\n\t\t\t\t\tbtnArray = null;\n\t\t\t\t} else if (typeof btnArray === 'function') {\n\t\t\t\t\tcallback = btnArray;\n\t\t\t\t\tbtnArray = null;\n\t\t\t\t}\n\t\t\t\t$.plusReady(function() {\n\t\t\t\t\tplus.nativeUI.prompt(text, callback, title, defaultText, btnArray);\n\t\t\t\t});\n\t\t\t}\n\n\t\t} else {\n\t\t\t//H5版本(确认index为0，取消index为1)\n\t\t\tvar result = window.prompt(text);\n\t\t\tif (result) {\n\t\t\t\tcallback({\n\t\t\t\t\tindex: 0,\n\t\t\t\t\tvalue: result\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcallback({\n\t\t\t\t\tindex: 1,\n\t\t\t\t\tvalue: ''\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n})(mui, window);\n(function($, window) {\n\tvar CLASS_ACTIVE = 'mui-active';\n\t/**\n\t * 自动消失提示框\n\t */\n\t$.toast = function(message) {\n\t\tif ($.os.plus) {\n\t\t\t//默认显示在底部；\n\t\t\t$.plusReady(function() {\n\t\t\t\tplus.nativeUI.toast(message, {\n\t\t\t\t\tverticalAlign: 'bottom'\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\tvar toast = document.createElement('div');\n\t\t\ttoast.classList.add('mui-toast-container');\n\t\t\ttoast.innerHTML = '<div class=\"' + 'mui-toast-message' + '\">' + message + '</div>';\n\t\t\ttoast.addEventListener('webkitTransitionEnd', function() {\n\t\t\t\tif (!toast.classList.contains(CLASS_ACTIVE)) {\n\t\t\t\t\ttoast.parentNode.removeChild(toast);\n\t\t\t\t}\n\t\t\t});\n\t\t\tdocument.body.appendChild(toast);\n\t\t\ttoast.offsetHeight;\n\t\t\ttoast.classList.add(CLASS_ACTIVE);\n\t\t\tsetTimeout(function() {\n\t\t\t\ttoast.classList.remove(CLASS_ACTIVE);\n\t\t\t}, 2000);\n\t\t}\n\t};\n\n})(mui, window);\n/**\n * Popup(alert,confirm,prompt)  \n * @param {Object} $\n * @param {Object} window\n * @param {Object} document\n */\n(function($, window, document) {\n\tvar CLASS_POPUP = 'mui-popup';\n\tvar CLASS_POPUP_BACKDROP = 'mui-popup-backdrop';\n\tvar CLASS_POPUP_IN = 'mui-popup-in';\n\tvar CLASS_POPUP_OUT = 'mui-popup-out';\n\tvar CLASS_POPUP_INNER = 'mui-popup-inner';\n\tvar CLASS_POPUP_TITLE = 'mui-popup-title';\n\tvar CLASS_POPUP_TEXT = 'mui-popup-text';\n\tvar CLASS_POPUP_INPUT = 'mui-popup-input';\n\tvar CLASS_POPUP_BUTTONS = 'mui-popup-buttons';\n\tvar CLASS_POPUP_BUTTON = 'mui-popup-button';\n\tvar CLASS_POPUP_BUTTON_BOLD = 'mui-popup-button-bold';\n\tvar CLASS_POPUP_BACKDROP = 'mui-popup-backdrop';\n\tvar CLASS_ACTIVE = 'mui-active';\n\n\tvar popupStack = [];\n\tvar backdrop = (function() {\n\t\tvar element = document.createElement('div');\n\t\telement.classList.add(CLASS_POPUP_BACKDROP);\n\t\telement.addEventListener($.EVENT_MOVE, $.preventDefault);\n\t\telement.addEventListener('webkitTransitionEnd', function() {\n\t\t\tif (!this.classList.contains(CLASS_ACTIVE)) {\n\t\t\t\telement.parentNode && element.parentNode.removeChild(element);\n\t\t\t}\n\t\t});\n\t\treturn element;\n\t}());\n\n\tvar createInput = function(placeholder) {\n\t\treturn '<div class=\"' + CLASS_POPUP_INPUT + '\"><input type=\"text\" autofocus placeholder=\"' + (placeholder || '') + '\"/></div>';\n\t};\n\tvar createInner = function(message, title, extra) {\n\t\treturn '<div class=\"' + CLASS_POPUP_INNER + '\"><div class=\"' + CLASS_POPUP_TITLE + '\">' + title + '</div><div class=\"' + CLASS_POPUP_TEXT + '\">' + message.replace(/\\r\\n/g, \"<br/>\").replace(/\\n/g, \"<br/>\") + '</div>' + (extra || '') + '</div>';\n\t};\n\tvar createButtons = function(btnArray) {\n\t\tvar length = btnArray.length;\n\t\tvar btns = [];\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\tbtns.push('<span class=\"' + CLASS_POPUP_BUTTON + (i === length - 1 ? (' ' + CLASS_POPUP_BUTTON_BOLD) : '') + '\">' + btnArray[i] + '</span>');\n\t\t}\n\t\treturn '<div class=\"' + CLASS_POPUP_BUTTONS + '\">' + btns.join('') + '</div>';\n\t};\n\n\tvar createPopup = function(html, callback) {\n\t\tvar popupElement = document.createElement('div');\n\t\tpopupElement.className = CLASS_POPUP;\n\t\tpopupElement.innerHTML = html;\n\t\tvar removePopupElement = function() {\n\t\t\tpopupElement.parentNode && popupElement.parentNode.removeChild(popupElement);\n\t\t\tpopupElement = null;\n\t\t};\n\t\tpopupElement.addEventListener($.EVENT_MOVE, $.preventDefault);\n\t\tpopupElement.addEventListener('webkitTransitionEnd', function(e) {\n\t\t\tif (popupElement && e.target === popupElement && popupElement.classList.contains(CLASS_POPUP_OUT)) {\n\t\t\t\tremovePopupElement();\n\t\t\t}\n\t\t});\n\t\tpopupElement.style.display = 'block';\n\t\tdocument.body.appendChild(popupElement);\n\t\tpopupElement.offsetHeight;\n\t\tpopupElement.classList.add(CLASS_POPUP_IN);\n\n\t\tif (!backdrop.classList.contains(CLASS_ACTIVE)) {\n\t\t\tbackdrop.style.display = 'block';\n\t\t\tdocument.body.appendChild(backdrop);\n\t\t\tbackdrop.offsetHeight;\n\t\t\tbackdrop.classList.add(CLASS_ACTIVE);\n\t\t}\n\t\tvar btns = $.qsa('.' + CLASS_POPUP_BUTTON, popupElement);\n\t\tvar input = popupElement.querySelector('.' + CLASS_POPUP_INPUT + ' input');\n\t\tvar popup = {\n\t\t\telement: popupElement,\n\t\t\tclose: function(index, animate) {\n\t\t\t\tif (popupElement) {\n\t\t\t\t\tcallback && callback({\n\t\t\t\t\t\tindex: index || 0,\n\t\t\t\t\t\tvalue: input && input.value || ''\n\t\t\t\t\t});\n\t\t\t\t\tif (animate !== false) {\n\t\t\t\t\t\tpopupElement.classList.remove(CLASS_POPUP_IN);\n\t\t\t\t\t\tpopupElement.classList.add(CLASS_POPUP_OUT);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tremovePopupElement();\n\t\t\t\t\t}\n\t\t\t\t\tpopupStack.pop();\n\t\t\t\t\t//如果还有其他popup，则不remove backdrop\n\t\t\t\t\tif (popupStack.length) {\n\t\t\t\t\t\tpopupStack[popupStack.length - 1]['show'](animate);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbackdrop.classList.remove(CLASS_ACTIVE);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tvar handleEvent = function(e) {\n\t\t\tpopup.close(btns.indexOf(e.target));\n\t\t};\n\t\t$(popupElement).on('tap', '.' + CLASS_POPUP_BUTTON, handleEvent);\n\t\tif (popupStack.length) {\n\t\t\tpopupStack[popupStack.length - 1]['hide']();\n\t\t}\n\t\tpopupStack.push({\n\t\t\tclose: popup.close,\n\t\t\tshow: function(animate) {\n\t\t\t\tpopupElement.style.display = 'block';\n\t\t\t\tpopupElement.offsetHeight;\n\t\t\t\tpopupElement.classList.add(CLASS_POPUP_IN);\n\t\t\t},\n\t\t\thide: function() {\n\t\t\t\tpopupElement.style.display = 'none';\n\t\t\t\tpopupElement.classList.remove(CLASS_POPUP_IN);\n\t\t\t}\n\t\t});\n\t\treturn popup;\n\t};\n\tvar createAlert = function(message, title, btnValue, callback, type) {\n\t\tif (typeof message === 'undefined') {\n\t\t\treturn;\n\t\t} else {\n\t\t\tif (typeof title === 'function') {\n\t\t\t\tcallback = title;\n\t\t\t\ttype = btnValue;\n\t\t\t\ttitle = null;\n\t\t\t\tbtnValue = null;\n\t\t\t} else if (typeof btnValue === 'function') {\n\t\t\t\ttype = callback;\n\t\t\t\tcallback = btnValue;\n\t\t\t\tbtnValue = null;\n\t\t\t}\n\t\t}\n\t\tif (!$.os.plus || type === 'div') {\n\t\t\treturn createPopup(createInner(message, title || '提示') + createButtons([btnValue || '确定']), callback);\n\t\t}\n\t\treturn plus.nativeUI.alert(message, callback, title || '提示', btnValue || '确定');\n\t};\n\tvar createConfirm = function(message, title, btnArray, callback, type) {\n\t\tif (typeof message === 'undefined') {\n\t\t\treturn;\n\t\t} else {\n\t\t\tif (typeof title === 'function') {\n\t\t\t\tcallback = title;\n\t\t\t\ttype = btnArray;\n\t\t\t\ttitle = null;\n\t\t\t\tbtnArray = null;\n\t\t\t} else if (typeof btnArray === 'function') {\n\t\t\t\ttype = callback;\n\t\t\t\tcallback = btnArray;\n\t\t\t\tbtnArray = null;\n\t\t\t}\n\t\t}\n\t\tif (!$.os.plus || type === 'div') {\n\t\t\treturn createPopup(createInner(message, title || '提示') + createButtons(btnArray || ['取消', '确认']), callback);\n\t\t}\n\t\treturn plus.nativeUI.confirm(message, callback, title, btnArray || ['取消', '确认']);\n\t};\n\tvar createPrompt = function(message, placeholder, title, btnArray, callback, type) {\n\t\tif (typeof message === 'undefined') {\n\t\t\treturn;\n\t\t} else {\n\t\t\tif (typeof placeholder === 'function') {\n\t\t\t\tcallback = placeholder;\n\t\t\t\ttype = title;\n\t\t\t\tplaceholder = null;\n\t\t\t\ttitle = null;\n\t\t\t\tbtnArray = null;\n\t\t\t} else if (typeof title === 'function') {\n\t\t\t\tcallback = title;\n\t\t\t\ttype = btnArray;\n\t\t\t\ttitle = null;\n\t\t\t\tbtnArray = null;\n\t\t\t} else if (typeof btnArray === 'function') {\n\t\t\t\ttype = callback;\n\t\t\t\tcallback = btnArray;\n\t\t\t\tbtnArray = null;\n\t\t\t}\n\t\t}\n\t\tif (!$.os.plus || type === 'div') {\n\t\t\treturn createPopup(createInner(message, title || '提示', createInput(placeholder)) + createButtons(btnArray || ['取消', '确认']), callback);\n\t\t}\n\t\treturn plus.nativeUI.prompt(message, callback, title || '提示', placeholder, btnArray || ['取消', '确认']);\n\t};\n\tvar closePopup = function() {\n\t\tif (popupStack.length) {\n\t\t\tpopupStack[popupStack.length - 1]['close']();\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t};\n\tvar closePopups = function() {\n\t\twhile (popupStack.length) {\n\t\t\tpopupStack[popupStack.length - 1]['close']();\n\t\t}\n\t};\n\n\t$.closePopup = closePopup;\n\t$.closePopups = closePopups;\n\t$.alert = createAlert;\n\t$.confirm = createConfirm;\n\t$.prompt = createPrompt;\n})(mui, window, document);\n(function($, document) {\n\tvar CLASS_PROGRESSBAR = 'mui-progressbar';\n\tvar CLASS_PROGRESSBAR_IN = 'mui-progressbar-in';\n\tvar CLASS_PROGRESSBAR_OUT = 'mui-progressbar-out';\n\tvar CLASS_PROGRESSBAR_INFINITE = 'mui-progressbar-infinite';\n\n\tvar SELECTOR_PROGRESSBAR = '.mui-progressbar';\n\n\tvar _findProgressbar = function(container) {\n\t\tcontainer = $(container || 'body');\n\t\tif (container.length === 0) return;\n\t\tcontainer = container[0];\n\t\tif (container.classList.contains(CLASS_PROGRESSBAR)) {\n\t\t\treturn container;\n\t\t}\n\t\tvar progressbars = container.querySelectorAll(SELECTOR_PROGRESSBAR);\n\t\tif (progressbars) {\n\t\t\tfor (var i = 0, len = progressbars.length; i < len; i++) {\n\t\t\t\tvar progressbar = progressbars[i];\n\t\t\t\tif (progressbar.parentNode === container) {\n\t\t\t\t\treturn progressbar;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t/**\n\t * 创建并显示进度条 \n\t * @param {Object} container  可选，默认body，支持selector,DOM Node,mui wrapper\n\t * @param {Object} progress 可选，undefined表示循环，数字表示具体进度\n\t * @param {Object} color 可选，指定颜色样式(目前暂未提供实际样式，可暂时不暴露此参数)\n\t */\n\tvar showProgressbar = function(container, progress, color) {\n\t\tif (typeof container === 'number') {\n\t\t\tcolor = progress;\n\t\t\tprogress = container;\n\t\t\tcontainer = 'body';\n\t\t}\n\t\tcontainer = $(container || 'body');\n\t\tif (container.length === 0) return;\n\t\tcontainer = container[0];\n\t\tvar progressbar;\n\t\tif (container.classList.contains(CLASS_PROGRESSBAR)) {\n\t\t\tprogressbar = container;\n\t\t} else {\n\t\t\tvar progressbars = container.querySelectorAll(SELECTOR_PROGRESSBAR + ':not(.' + CLASS_PROGRESSBAR_OUT + ')');\n\t\t\tif (progressbars) {\n\t\t\t\tfor (var i = 0, len = progressbars.length; i < len; i++) {\n\t\t\t\t\tvar _progressbar = progressbars[i];\n\t\t\t\t\tif (_progressbar.parentNode === container) {\n\t\t\t\t\t\tprogressbar = _progressbar;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!progressbar) {\n\t\t\t\tprogressbar = document.createElement('span');\n\t\t\t\tprogressbar.className = CLASS_PROGRESSBAR + ' ' + CLASS_PROGRESSBAR_IN + (typeof progress !== 'undefined' ? '' : (' ' + CLASS_PROGRESSBAR_INFINITE)) + (color ? (' ' + CLASS_PROGRESSBAR + '-' + color) : '');\n\t\t\t\tif (typeof progress !== 'undefined') {\n\t\t\t\t\tprogressbar.innerHTML = '<span></span>';\n\t\t\t\t}\n\t\t\t\tcontainer.appendChild(progressbar);\n\t\t\t} else {\n\t\t\t\tprogressbar.classList.add(CLASS_PROGRESSBAR_IN);\n\t\t\t}\n\t\t}\n\t\tif (progress) setProgressbar(container, progress);\n\t\treturn progressbar;\n\t};\n\t/**\n\t * 关闭进度条 \n\t * @param {Object} container 可选，默认body，支持selector,DOM Node,mui wrapper\n\t */\n\tvar hideProgressbar = function(container) {\n\t\tvar progressbar = _findProgressbar(container);\n\t\tif (!progressbar) {\n\t\t\treturn;\n\t\t}\n\t\tvar classList = progressbar.classList;\n\t\tif (!classList.contains(CLASS_PROGRESSBAR_IN) || classList.contains(CLASS_PROGRESSBAR_OUT)) {\n\t\t\treturn;\n\t\t}\n\t\tclassList.remove(CLASS_PROGRESSBAR_IN);\n\t\tclassList.add(CLASS_PROGRESSBAR_OUT);\n\t\tprogressbar.addEventListener('webkitAnimationEnd', function() {\n\t\t\tprogressbar.parentNode && progressbar.parentNode.removeChild(progressbar);\n\t\t\tprogressbar = null;\n\t\t});\n\t\treturn;\n\t};\n\t/**\n\t * 设置指定进度条进度 \n\t * @param {Object} container  可选，默认body，支持selector,DOM Node,mui wrapper\n\t * @param {Object} progress 可选，默认0 取值范围[0-100]\n\t * @param {Object} speed 进度条动画时间\n\t */\n\tvar setProgressbar = function(container, progress, speed) {\n\t\tif (typeof container === 'number') {\n\t\t\tspeed = progress;\n\t\t\tprogress = container;\n\t\t\tcontainer = false;\n\t\t}\n\t\tvar progressbar = _findProgressbar(container);\n\t\tif (!progressbar || progressbar.classList.contains(CLASS_PROGRESSBAR_INFINITE)) {\n\t\t\treturn;\n\t\t}\n\t\tif (progress) progress = Math.min(Math.max(progress, 0), 100);\n\t\tprogressbar.offsetHeight;\n\t\tvar span = progressbar.querySelector('span');\n\t\tif (span) {\n\t\t\tvar style = span.style;\n\t\t\tstyle.webkitTransform = 'translate3d(' + (-100 + progress) + '%,0,0)';\n\t\t\tif (typeof speed !== 'undefined') {\n\t\t\t\tstyle.webkitTransitionDuration = speed + 'ms';\n\t\t\t} else {\n\t\t\t\tstyle.webkitTransitionDuration = '';\n\t\t\t}\n\t\t}\n\t\treturn progressbar;\n\t};\n\t$.fn.progressbar = function(options) {\n\t\tvar progressbarApis = [];\n\t\toptions = options || {};\n\t\tthis.each(function() {\n\t\t\tvar self = this;\n\t\t\tvar progressbarApi = self.mui_plugin_progressbar;\n\t\t\tif (!progressbarApi) {\n\t\t\t\tself.mui_plugin_progressbar = progressbarApi = {\n\t\t\t\t\toptions: options,\n\t\t\t\t\tsetOptions: function(options) {\n\t\t\t\t\t\tthis.options = options;\n\t\t\t\t\t},\n\t\t\t\t\tshow: function() {\n\t\t\t\t\t\treturn showProgressbar(self, this.options.progress, this.options.color);\n\t\t\t\t\t},\n\t\t\t\t\tsetProgress: function(progress) {\n\t\t\t\t\t\treturn setProgressbar(self, progress);\n\t\t\t\t\t},\n\t\t\t\t\thide: function() {\n\t\t\t\t\t\treturn hideProgressbar(self);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t} else if (options) {\n\t\t\t\tprogressbarApi.setOptions(options);\n\t\t\t}\n\t\t\tprogressbarApis.push(progressbarApi);\n\t\t});\n\t\treturn progressbarApis.length === 1 ? progressbarApis[0] : progressbarApis;\n\t};\n\t//\t$.setProgressbar = setProgressbar;\n\t//\t$.showProgressbar = showProgressbar;\n\t//\t$.hideProgressbar = hideProgressbar;\n})(mui, document);\n/**\n * Input(TODO resize)\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @returns {undefined}\n */\n(function($, window, document) {\n\tvar CLASS_ICON = 'mui-icon';\n\tvar CLASS_ICON_CLEAR = 'mui-icon-clear';\n\tvar CLASS_ICON_SPEECH = 'mui-icon-speech';\n\tvar CLASS_ICON_SEARCH = 'mui-icon-search';\n\tvar CLASS_ICON_PASSWORD = 'mui-icon-eye';\n\tvar CLASS_INPUT_ROW = 'mui-input-row';\n\tvar CLASS_PLACEHOLDER = 'mui-placeholder';\n\tvar CLASS_TOOLTIP = 'mui-tooltip';\n\tvar CLASS_HIDDEN = 'mui-hidden';\n\tvar CLASS_FOCUSIN = 'mui-focusin';\n\tvar SELECTOR_ICON_CLOSE = '.' + CLASS_ICON_CLEAR;\n\tvar SELECTOR_ICON_SPEECH = '.' + CLASS_ICON_SPEECH;\n\tvar SELECTOR_ICON_PASSWORD = '.' + CLASS_ICON_PASSWORD;\n\tvar SELECTOR_PLACEHOLDER = '.' + CLASS_PLACEHOLDER;\n\tvar SELECTOR_TOOLTIP = '.' + CLASS_TOOLTIP;\n\n\tvar findRow = function(target) {\n\t\tfor (; target && target !== document; target = target.parentNode) {\n\t\t\tif (target.classList && target.classList.contains(CLASS_INPUT_ROW)) {\n\t\t\t\treturn target;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t};\n\tvar Input = function(element, options) {\n\t\tthis.element = element;\n\t\tthis.options = options || {\n\t\t\tactions: 'clear'\n\t\t};\n\t\tif (~this.options.actions.indexOf('slider')) { //slider\n\t\t\tthis.sliderActionClass = CLASS_TOOLTIP + ' ' + CLASS_HIDDEN;\n\t\t\tthis.sliderActionSelector = SELECTOR_TOOLTIP;\n\t\t} else { //clear,speech,search\n\t\t\tif (~this.options.actions.indexOf('clear')) {\n\t\t\t\tthis.clearActionClass = CLASS_ICON + ' ' + CLASS_ICON_CLEAR + ' ' + CLASS_HIDDEN;\n\t\t\t\tthis.clearActionSelector = SELECTOR_ICON_CLOSE;\n\t\t\t}\n\t\t\tif (~this.options.actions.indexOf('speech')) { //only for 5+\n\t\t\t\tthis.speechActionClass = CLASS_ICON + ' ' + CLASS_ICON_SPEECH;\n\t\t\t\tthis.speechActionSelector = SELECTOR_ICON_SPEECH;\n\t\t\t}\n\t\t\tif (~this.options.actions.indexOf('search')) {\n\t\t\t\tthis.searchActionClass = CLASS_PLACEHOLDER;\n\t\t\t\tthis.searchActionSelector = SELECTOR_PLACEHOLDER;\n\t\t\t}\n\t\t\tif (~this.options.actions.indexOf('password')) {\n\t\t\t\tthis.passwordActionClass = CLASS_ICON + ' ' + CLASS_ICON_PASSWORD;\n\t\t\t\tthis.passwordActionSelector = SELECTOR_ICON_PASSWORD;\n\t\t\t}\n\t\t}\n\t\tthis.init();\n\t};\n\tInput.prototype.init = function() {\n\t\tthis.initAction();\n\t\tthis.initElementEvent();\n\t};\n\tInput.prototype.initAction = function() {\n\t\tvar self = this;\n\n\t\tvar row = self.element.parentNode;\n\t\tif (row) {\n\t\t\tif (self.sliderActionClass) {\n\t\t\t\tself.sliderAction = self.createAction(row, self.sliderActionClass, self.sliderActionSelector);\n\t\t\t} else {\n\t\t\t\tif (self.searchActionClass) {\n\t\t\t\t\tself.searchAction = self.createAction(row, self.searchActionClass, self.searchActionSelector);\n\t\t\t\t\tself.searchAction.addEventListener('tap', function(e) {\n\t\t\t\t\t\t$.focus(self.element);\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (self.speechActionClass) {\n\t\t\t\t\tself.speechAction = self.createAction(row, self.speechActionClass, self.speechActionSelector);\n\t\t\t\t\tself.speechAction.addEventListener('click', $.stopPropagation);\n\t\t\t\t\tself.speechAction.addEventListener('tap', function(event) {\n\t\t\t\t\t\tself.speechActionClick(event);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (self.clearActionClass) {\n\t\t\t\t\tself.clearAction = self.createAction(row, self.clearActionClass, self.clearActionSelector);\n\t\t\t\t\tself.clearAction.addEventListener('tap', function(event) {\n\t\t\t\t\t\tself.clearActionClick(event);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (self.passwordActionClass) {\n\t\t\t\t\tself.passwordAction = self.createAction(row, self.passwordActionClass, self.passwordActionSelector);\n\t\t\t\t\tself.passwordAction.addEventListener('tap', function(event) {\n\t\t\t\t\t\tself.passwordActionClick(event);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tInput.prototype.createAction = function(row, actionClass, actionSelector) {\n\t\tvar action = row.querySelector(actionSelector);\n\t\tif (!action) {\n\t\t\tvar action = document.createElement('span');\n\t\t\taction.className = actionClass;\n\t\t\tif (actionClass === this.searchActionClass) {\n\t\t\t\taction.innerHTML = '<span class=\"' + CLASS_ICON + ' ' + CLASS_ICON_SEARCH + '\"></span><span>' + this.element.getAttribute('placeholder') + '</span>';\n\t\t\t\tthis.element.setAttribute('placeholder', '');\n\t\t\t\tif (this.element.value.trim()) {\n\t\t\t\t\trow.classList.add('mui-active');\n\t\t\t\t}\n\t\t\t}\n\t\t\trow.insertBefore(action, this.element.nextSibling);\n\t\t}\n\t\treturn action;\n\t};\n\tInput.prototype.initElementEvent = function() {\n\t\tvar element = this.element;\n\n\t\tif (this.sliderActionClass) {\n\t\t\tvar tooltip = this.sliderAction;\n\t\t\tvar timer = null;\n\t\t\tvar showTip = function() { //每次重新计算是因为控件可能被隐藏，初始化时计算是不正确的\n\t\t\t\ttooltip.classList.remove(CLASS_HIDDEN);\n\t\t\t\tvar offsetLeft = element.offsetLeft;\n\t\t\t\tvar width = element.offsetWidth - 28;\n\t\t\t\tvar tooltipWidth = tooltip.offsetWidth;\n\t\t\t\tvar distince = Math.abs(element.max - element.min);\n\t\t\t\tvar scaleWidth = (width / distince) * Math.abs(element.value - element.min);\n\t\t\t\ttooltip.style.left = (14 + offsetLeft + scaleWidth - tooltipWidth / 2) + 'px';\n\t\t\t\ttooltip.innerText = element.value;\n\t\t\t\tif (timer) {\n\t\t\t\t\tclearTimeout(timer);\n\t\t\t\t}\n\t\t\t\ttimer = setTimeout(function() {\n\t\t\t\t\ttooltip.classList.add(CLASS_HIDDEN);\n\t\t\t\t}, 1000);\n\t\t\t};\n\t\t\telement.addEventListener('input', showTip);\n\t\t\telement.addEventListener('tap', showTip);\n\t\t\telement.addEventListener($.EVENT_MOVE, function(e) {\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t} else {\n\t\t\tif (this.clearActionClass) {\n\t\t\t\tvar action = this.clearAction;\n\t\t\t\tif (!action) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t$.each(['keyup', 'change', 'input', 'focus', 'cut', 'paste'], function(index, type) {\n\t\t\t\t\t(function(type) {\n\t\t\t\t\t\telement.addEventListener(type, function() {\n\t\t\t\t\t\t\taction.classList[element.value.trim() ? 'remove' : 'add'](CLASS_HIDDEN);\n\t\t\t\t\t\t});\n\t\t\t\t\t})(type);\n\t\t\t\t});\n\t\t\t\telement.addEventListener('blur', function() {\n\t\t\t\t\taction.classList.add(CLASS_HIDDEN);\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (this.searchActionClass) {\n\t\t\t\telement.addEventListener('focus', function() {\n\t\t\t\t\telement.parentNode.classList.add('mui-active');\n\t\t\t\t});\n\t\t\t\telement.addEventListener('blur', function() {\n\t\t\t\t\tif (!element.value.trim()) {\n\t\t\t\t\t\telement.parentNode.classList.remove('mui-active');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\tInput.prototype.setPlaceholder = function(text) {\n\t\tif (this.searchActionClass) {\n\t\t\tvar placeholder = this.element.parentNode.querySelector(SELECTOR_PLACEHOLDER);\n\t\t\tplaceholder && (placeholder.getElementsByTagName('span')[1].innerText = text);\n\t\t} else {\n\t\t\tthis.element.setAttribute('placeholder', text);\n\t\t}\n\t};\n\tInput.prototype.passwordActionClick = function(event) {\n\t\tif (this.element.type === 'text') {\n\t\t\tthis.element.type = 'password';\n\t\t} else {\n\t\t\tthis.element.type = 'text';\n\t\t}\n\t\tthis.passwordAction.classList.toggle('mui-active');\n\t\tevent.preventDefault();\n\t};\n\tInput.prototype.clearActionClick = function(event) {\n\t\tvar self = this;\n\t\tself.element.value = '';\n\t\t$.focus(self.element);\n\t\tself.clearAction.classList.add(CLASS_HIDDEN);\n\t\tevent.preventDefault();\n\t};\n\tInput.prototype.speechActionClick = function(event) {\n\t\tif (window.plus) {\n\t\t\tvar self = this;\n\t\t\tvar oldValue = self.element.value;\n\t\t\tself.element.value = '';\n\t\t\tdocument.body.classList.add(CLASS_FOCUSIN);\n\t\t\tplus.speech.startRecognize({\n\t\t\t\tengine: 'iFly'\n\t\t\t}, function(s) {\n\t\t\t\tself.element.value += s;\n\t\t\t\t$.focus(self.element);\n\t\t\t\tplus.speech.stopRecognize();\n\t\t\t\t$.trigger(self.element, 'recognized', {\n\t\t\t\t\tvalue: self.element.value\n\t\t\t\t});\n\t\t\t\tif (oldValue !== self.element.value) {\n\t\t\t\t\t$.trigger(self.element, 'change');\n\t\t\t\t\t$.trigger(self.element, 'input');\n\t\t\t\t}\n\t\t\t\t// document.body.classList.remove(CLASS_FOCUSIN);\n\t\t\t}, function(e) {\n\t\t\t\tdocument.body.classList.remove(CLASS_FOCUSIN);\n\t\t\t});\n\t\t} else {\n\t\t\talert('only for 5+');\n\t\t}\n\t\tevent.preventDefault();\n\t};\n\t$.fn.input = function(options) {\n\t\tvar inputApis = [];\n\t\tthis.each(function() {\n\t\t\tvar inputApi = null;\n\t\t\tvar actions = [];\n\t\t\tvar row = findRow(this.parentNode);\n\t\t\tif (this.type === 'range' && row.classList.contains('mui-input-range')) {\n\t\t\t\tactions.push('slider');\n\t\t\t} else {\n\t\t\t\tvar classList = this.classList;\n\t\t\t\tif (classList.contains('mui-input-clear')) {\n\t\t\t\t\tactions.push('clear');\n\t\t\t\t}\n\t\t\t\tif (!($.os.android && $.os.stream) && classList.contains('mui-input-speech')) {\n\t\t\t\t\tactions.push('speech');\n\t\t\t\t}\n\t\t\t\tif (classList.contains('mui-input-password')) {\n\t\t\t\t\tactions.push('password');\n\t\t\t\t}\n\t\t\t\tif (this.type === 'search' && row.classList.contains('mui-search')) {\n\t\t\t\t\tactions.push('search');\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar id = this.getAttribute('data-input-' + actions[0]);\n\t\t\tif (!id) {\n\t\t\t\tid = ++$.uuid;\n\t\t\t\tinputApi = $.data[id] = new Input(this, {\n\t\t\t\t\tactions: actions.join(',')\n\t\t\t\t});\n\t\t\t\tfor (var i = 0, len = actions.length; i < len; i++) {\n\t\t\t\t\tthis.setAttribute('data-input-' + actions[i], id);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tinputApi = $.data[id];\n\t\t\t}\n\t\t\tinputApis.push(inputApi);\n\t\t});\n\t\treturn inputApis.length === 1 ? inputApis[0] : inputApis;\n\t};\n\t$.ready(function() {\n\t\t$('.mui-input-row input').input();\n\t});\n})(mui, window, document);\n(function($, window) {\n\tvar rgbaRegex = /^rgba\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3})\\)$/;\n\tvar getColor = function(colorStr) {\n\t\tvar matches = colorStr.match(rgbaRegex);\n\t\tif (matches && matches.length === 5) {\n\t\t\treturn [\n\t\t\t\tmatches[1],\n\t\t\t\tmatches[2],\n\t\t\t\tmatches[3],\n\t\t\t\tmatches[4]\n\t\t\t];\n\t\t}\n\t\treturn [];\n\t};\n\tvar Transparent = function(element, options) {\n\t\tthis.element = element;\n\t\tthis.options = $.extend({\n\t\t\ttop: 0,\n\t\t\toffset: 150,\n\t\t\tduration: 16\n\t\t}, options || {});\n\t\tthis._style = this.element.style;\n\t\tthis._bgColor = this._style.backgroundColor;\n\t\tvar color = getColor(mui.getStyles(this.element, 'backgroundColor'));\n\t\tif (color.length) {\n\t\t\tthis._R = color[0];\n\t\t\tthis._G = color[1];\n\t\t\tthis._B = color[2];\n\t\t\tthis._A = color[3];\n\t\t\tthis._bufferFn = $.buffer(this.handleScroll, this.options.duration, this);\n\t\t\tthis.initEvent();\n\t\t} else {\n\t\t\tthrow new Error(\"元素背景颜色必须为RGBA\");\n\t\t}\n\t};\n\n\tTransparent.prototype.initEvent = function() {\n\t\twindow.addEventListener('scroll', this._bufferFn);\n\t\twindow.addEventListener($.EVENT_MOVE, this._bufferFn);\n\t};\n\tTransparent.prototype.handleScroll = function() {\n\t\tthis._style.backgroundColor = 'rgba(' + this._R + ',' + this._G + ',' + this._B + ',' + (window.scrollY - this.options.top) / this.options.offset + ')';\n\t};\n\tTransparent.prototype.destory = function() {\n\t\twindow.removeEventListener('scroll', this._bufferFn);\n\t\twindow.removeEventListener($.EVENT_MOVE, this._bufferFn);\n\t\tthis.element.style.backgroundColor = this._bgColor;\n\t\tthis.element.mui_plugin_transparent = null;\n\t};\n\t$.fn.transparent = function(options) {\n\t\toptions = options || {};\n\t\tvar transparentApis = [];\n\t\tthis.each(function() {\n\t\t\tvar transparentApi = this.mui_plugin_transparent;\n\t\t\tif (!transparentApi) {\n\t\t\t\tvar top = this.getAttribute('data-top');\n\t\t\t\tvar offset = this.getAttribute('data-offset');\n\t\t\t\tvar duration = this.getAttribute('data-duration');\n\t\t\t\tif (top !== null && typeof options.top === 'undefined') {\n\t\t\t\t\toptions.top = top;\n\t\t\t\t}\n\t\t\t\tif (offset !== null && typeof options.offset === 'undefined') {\n\t\t\t\t\toptions.offset = offset;\n\t\t\t\t}\n\t\t\t\tif (duration !== null && typeof options.duration === 'undefined') {\n\t\t\t\t\toptions.duration = duration;\n\t\t\t\t}\n\t\t\t\ttransparentApi = this.mui_plugin_transparent = new Transparent(this, options);\n\t\t\t}\n\t\t\ttransparentApis.push(transparentApi);\n\t\t});\n\t\treturn transparentApis.length === 1 ? transparentApis[0] : transparentApis;\n\t};\n\t$.ready(function() {\n\t\t$('.mui-bar-transparent').transparent();\n\t});\n})(mui, window);\n/**\n * 数字输入框\n * varstion 1.0.1\n * by Houfeng\n * Houfeng@DCloud.io\n */\n\n(function($) {\n\n\tvar touchSupport = ('ontouchstart' in document);\n\tvar tapEventName = touchSupport ? 'tap' : 'click';\n\tvar changeEventName = 'change';\n\tvar holderClassName = 'mui-numbox';\n\tvar plusClassSelector = '.mui-btn-numbox-plus,.mui-numbox-btn-plus';\n\tvar minusClassSelector = '.mui-btn-numbox-minus,.mui-numbox-btn-minus';\n\tvar inputClassSelector = '.mui-input-numbox,.mui-numbox-input';\n\n\tvar Numbox = $.Numbox = $.Class.extend({\n\t\t/**\n\t\t * 构造函数\n\t\t **/\n\t\tinit: function(holder, options) {\n\t\t\tvar self = this;\n\t\t\tif (!holder) {\n\t\t\t\tthrow \"构造 numbox 时缺少容器元素\";\n\t\t\t}\n\t\t\tself.holder = holder;\n\t\t\toptions = options || {};\n\t\t\toptions.step = parseInt(options.step || 1);\n\t\t\tself.options = options;\n\t\t\tself.input = $.qsa(inputClassSelector, self.holder)[0];\n\t\t\tself.plus = $.qsa(plusClassSelector, self.holder)[0];\n\t\t\tself.minus = $.qsa(minusClassSelector, self.holder)[0];\n\t\t\tself.checkValue();\n\t\t\tself.initEvent();\n\t\t},\n\t\t/**\n\t\t * 初始化事件绑定\n\t\t **/\n\t\tinitEvent: function() {\n\t\t\tvar self = this;\n\t\t\tself.plus.addEventListener(tapEventName, function(event) {\n\t\t\t\tvar val = parseInt(self.input.value) + self.options.step;\n\t\t\t\tself.input.value = val.toString();\n\t\t\t\t$.trigger(self.input, changeEventName, null);\n\t\t\t});\n\t\t\tself.minus.addEventListener(tapEventName, function(event) {\n\t\t\t\tvar val = parseInt(self.input.value) - self.options.step;\n\t\t\t\tself.input.value = val.toString();\n\t\t\t\t$.trigger(self.input, changeEventName, null);\n\t\t\t});\n\t\t\tself.input.addEventListener(changeEventName, function(event) {\n\t\t\t\tself.checkValue();\n\t\t\t\tvar val = parseInt(self.input.value);\n\t\t\t\t//触发顶层容器\n\t\t\t\t$.trigger(self.holder, changeEventName, {\n\t\t\t\t\tvalue: val\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * 获取当前值\n\t\t **/\n\t\tgetValue: function() {\n\t\t\tvar self = this;\n\t\t\treturn parseInt(self.input.value);\n\t\t},\n\t\t/**\n\t\t * 验证当前值是法合法\n\t\t **/\n\t\tcheckValue: function() {\n\t\t\tvar self = this;\n\t\t\tvar val = self.input.value;\n\t\t\tif (val == null || val == '' || isNaN(val)) {\n\t\t\t\tself.input.value = self.options.min || 0;\n\t\t\t\tself.minus.disabled = self.options.min != null;\n\t\t\t} else {\n\t\t\t\tvar val = parseInt(val);\n\t\t\t\tif (self.options.max != null && !isNaN(self.options.max) && val >= parseInt(self.options.max)) {\n\t\t\t\t\tval = self.options.max;\n\t\t\t\t\tself.plus.disabled = true;\n\t\t\t\t} else {\n\t\t\t\t\tself.plus.disabled = false;\n\t\t\t\t}\n\t\t\t\tif (self.options.min != null && !isNaN(self.options.min) && val <= parseInt(self.options.min)) {\n\t\t\t\t\tval = self.options.min;\n\t\t\t\t\tself.minus.disabled = true;\n\t\t\t\t} else {\n\t\t\t\t\tself.minus.disabled = false;\n\t\t\t\t}\n\t\t\t\tself.input.value = val;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * 更新选项\n\t\t **/\n\t\tsetOption: function(name, value) {\n\t\t\tvar self = this;\n\t\t\tself.options[name] = value;\n\t\t}\n\t});\n\n\t$.fn.numbox = function(options) {\n\t\tvar instanceArray = [];\n\t\t//遍历选择的元素\n\t\tthis.each(function(i, element) {\n\t\t\tif (element.numbox) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (options) {\n\t\t\t\telement.numbox = new Numbox(element, options);\n\t\t\t} else {\n\t\t\t\tvar optionsText = element.getAttribute('data-numbox-options');\n\t\t\t\tvar options = optionsText ? JSON.parse(optionsText) : {};\n\t\t\t\toptions.step = element.getAttribute('data-numbox-step') || options.step;\n\t\t\t\toptions.min = element.getAttribute('data-numbox-min') || options.min;\n\t\t\t\toptions.max = element.getAttribute('data-numbox-max') || options.max;\n\t\t\t\telement.numbox = new Numbox(element, options);\n\t\t\t}\n\t\t});\n\t\treturn this[0] ? this[0].numbox : null;\n\t}\n\n\t//自动处理 class='mui-locker' 的 dom\n\t$.ready(function() {\n\t\t$('.' + holderClassName).numbox();\n\t});\n}(mui))\n"],"sourceRoot":"/source/"}